!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=79)}([function(e,t,n){"use strict";function r(e,t,n,r,o,a,s,c){if(i(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,o,a,s,c],h=0;l=new Error(t.replace(/%s/g,function(){return u[h++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var i=function(e){};e.exports=r},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var i=new Error(n);throw i.name="Invariant Violation",i.framesToPop=1,i}e.exports=r},function(e,t,n){"use strict";var r=n(7),i=r;e.exports=i},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,c=r(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var u in n)o.call(n,u)&&(c[u]=n[u]);if(i){s=i(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(c[s[h]]=n[s[h]])}}return c}},function(e,t,n){"use strict";function r(e,t){return 1===e.nodeType&&e.getAttribute(f)===String(t)||8===e.nodeType&&e.nodeValue===" react-text: "+t+" "||8===e.nodeType&&e.nodeValue===" react-empty: "+t+" "}function i(e){for(var t;t=e._renderedComponent;)e=t;return e}function o(e,t){var n=i(e);n._hostNode=t,t[g]=n}function a(e){var t=e._hostNode;t&&(delete t[g],e._hostNode=null)}function s(e,t){if(!(e._flags&m.hasCachedChildNodes)){var n=e._renderedChildren,a=t.firstChild;e:for(var s in n)if(n.hasOwnProperty(s)){var c=n[s],l=i(c)._domID;if(0!==l){for(;null!==a;a=a.nextSibling)if(r(a,l)){o(c,a);continue e}h("32",l)}}e._flags|=m.hasCachedChildNodes}}function c(e){if(e[g])return e[g];for(var t=[];!e[g];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,r;e&&(r=e[g]);e=t.pop())n=r,t.length&&s(r,e);return n}function l(e){var t=c(e);return null!=t&&t._hostNode===e?t:null}function u(e){if(void 0===e._hostNode&&h("33"),e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent||h("34"),e=e._hostParent;for(;t.length;e=t.pop())s(e,e._hostNode);return e._hostNode}var h=n(1),p=n(14),d=n(53),f=(n(0),p.ID_ATTRIBUTE_NAME),m=d,g="__reactInternalInstance$"+Math.random().toString(36).slice(2),v={getClosestInstanceFromNode:c,getInstanceFromNode:l,getNodeFromInstance:u,precacheChildNodes:s,precacheNode:o,uncacheNode:a};e.exports=v},function(e,t,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},function(e,t,n){"use strict";var r=null;e.exports={debugTool:r}},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";function r(){C.ReactReconcileTransaction&&w||u("123")}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=p.getPooled(),this.reconcileTransaction=C.ReactReconcileTransaction.getPooled(!0)}function o(e,t,n,i,o,a){return r(),w.batchedUpdates(e,t,n,i,o,a)}function a(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;t!==y.length&&u("124",t,y.length),y.sort(a),x++;for(var n=0;n<t;n++){var r=y[n],i=r._pendingCallbacks;r._pendingCallbacks=null;var o;if(f.logTopLevelRenders){var s=r;r._currentElement.type.isReactTopLevelWrapper&&(s=r._renderedComponent),o="React update: "+s.getName(),console.time(o)}if(m.performUpdateIfNecessary(r,e.reconcileTransaction,x),o&&console.timeEnd(o),i)for(var c=0;c<i.length;c++)e.callbackQueue.enqueue(i[c],r.getPublicInstance())}}function c(e){if(r(),!w.isBatchingUpdates)return void w.batchedUpdates(c,e);y.push(e),null==e._updateBatchNumber&&(e._updateBatchNumber=x+1)}function l(e,t){v(w.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),b.enqueue(e,t),_=!0}var u=n(1),h=n(3),p=n(57),d=n(11),f=n(58),m=n(15),g=n(23),v=n(0),y=[],x=0,b=p.getPooled(),_=!1,w=null,E={initialize:function(){this.dirtyComponentsLength=y.length},close:function(){this.dirtyComponentsLength!==y.length?(y.splice(0,this.dirtyComponentsLength),S()):y.length=0}},M={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},T=[E,M];h(i.prototype,g,{getTransactionWrappers:function(){return T},destructor:function(){this.dirtyComponentsLength=null,p.release(this.callbackQueue),this.callbackQueue=null,C.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return g.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),d.addPoolingTo(i);var S=function(){for(;y.length||_;){if(y.length){var e=i.getPooled();e.perform(s,null,e),i.release(e)}if(_){_=!1;var t=b;b=p.getPooled(),t.notifyAll(),p.release(t)}}},A={injectReconcileTransaction:function(e){e||u("126"),C.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e||u("127"),"function"!==typeof e.batchedUpdates&&u("128"),"boolean"!==typeof e.isBatchingUpdates&&u("129"),w=e}},C={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:c,flushBatchedUpdates:S,injection:A,asap:l};e.exports=C},function(e,t,n){"use strict";var r={current:null};e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var i=this.constructor.Interface;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s?this[o]=s(n):"target"===o?this.target=r:this[o]=n[o]}var c=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=c?a.thatReturnsTrue:a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var i=n(3),o=n(11),a=n(7),s=(n(2),["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),c={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),r.Interface=c,r.augmentClass=function(e,t){var n=this,r=function(){};r.prototype=n.prototype;var a=new r;i(a,e.prototype),e.prototype=a,e.prototype.constructor=e,e.Interface=i({},n.Interface,t),e.augmentClass=n.augmentClass,o.addPoolingTo(e,o.fourArgumentPooler)},o.addPoolingTo(r,o.fourArgumentPooler),e.exports=r},function(e,t,n){"use strict";var r=n(1),i=(n(0),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),o=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},a=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},s=function(e,t,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,e,t,n,r),o}return new i(e,t,n,r)},c=function(e){var t=this;e instanceof t||r("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},l=i,u=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=10),n.release=c,n},h={addPoolingTo:u,oneArgumentPooler:i,twoArgumentPooler:o,threeArgumentPooler:a,fourArgumentPooler:s};e.exports=h},function(e,t,n){"use strict";var r=n(3),i=n(48),o=n(88),a=n(93),s=n(13),c=n(94),l=n(98),u=n(99),h=n(101),p=s.createElement,d=s.createFactory,f=s.cloneElement,m=r,g=function(e){return e},v={Children:{map:o.map,forEach:o.forEach,count:o.count,toArray:o.toArray,only:h},Component:i.Component,PureComponent:i.PureComponent,createElement:p,cloneElement:f,isValidElement:s.isValidElement,PropTypes:c,createClass:u,createFactory:d,createMixin:g,DOM:a,version:l,__spread:m};e.exports=v},function(e,t,n){"use strict";function r(e){return void 0!==e.ref}function i(e){return void 0!==e.key}var o=n(3),a=n(9),s=(n(2),n(50),Object.prototype.hasOwnProperty),c=n(51),l={key:!0,ref:!0,__self:!0,__source:!0},u=function(e,t,n,r,i,o,a){var s={$$typeof:c,type:e,key:t,ref:n,props:a,_owner:o};return s};u.createElement=function(e,t,n){var o,c={},h=null,p=null;if(null!=t){r(t)&&(p=t.ref),i(t)&&(h=""+t.key),void 0===t.__self?null:t.__self,void 0===t.__source?null:t.__source;for(o in t)s.call(t,o)&&!l.hasOwnProperty(o)&&(c[o]=t[o])}var d=arguments.length-2;if(1===d)c.children=n;else if(d>1){for(var f=Array(d),m=0;m<d;m++)f[m]=arguments[m+2];c.children=f}if(e&&e.defaultProps){var g=e.defaultProps;for(o in g)void 0===c[o]&&(c[o]=g[o])}return u(e,h,p,0,0,a.current,c)},u.createFactory=function(e){var t=u.createElement.bind(null,e);return t.type=e,t},u.cloneAndReplaceKey=function(e,t){return u(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},u.cloneElement=function(e,t,n){var c,h=o({},e.props),p=e.key,d=e.ref,f=(e._self,e._source,e._owner);if(null!=t){r(t)&&(d=t.ref,f=a.current),i(t)&&(p=""+t.key);var m;e.type&&e.type.defaultProps&&(m=e.type.defaultProps);for(c in t)s.call(t,c)&&!l.hasOwnProperty(c)&&(void 0===t[c]&&void 0!==m?h[c]=m[c]:h[c]=t[c])}var g=arguments.length-2;if(1===g)h.children=n;else if(g>1){for(var v=Array(g),y=0;y<g;y++)v[y]=arguments[y+2];h.children=v}return u(e.type,p,d,0,0,f,h)},u.isValidElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===c},e.exports=u},function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var i=n(1),o=(n(0),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=o,n=e.Properties||{},a=e.DOMAttributeNamespaces||{},c=e.DOMAttributeNames||{},l=e.DOMPropertyNames||{},u=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var h in n){s.properties.hasOwnProperty(h)&&i("48",h);var p=h.toLowerCase(),d=n[h],f={attributeName:p,attributeNamespace:null,propertyName:h,mutationMethod:null,mustUseProperty:r(d,t.MUST_USE_PROPERTY),hasBooleanValue:r(d,t.HAS_BOOLEAN_VALUE),hasNumericValue:r(d,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(d,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(d,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(f.hasBooleanValue+f.hasNumericValue+f.hasOverloadedBooleanValue<=1||i("50",h),c.hasOwnProperty(h)){var m=c[h];f.attributeName=m}a.hasOwnProperty(h)&&(f.attributeNamespace=a[h]),l.hasOwnProperty(h)&&(f.propertyName=l[h]),u.hasOwnProperty(h)&&(f.mutationMethod=u[h]),s.properties[h]=f}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){if((0,s._isCustomAttributeFunctions[t])(e))return!0}return!1},injection:o};e.exports=s},function(e,t,n){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=n(111),o=(n(6),n(2),{mountComponent:function(e,t,n,i,o,a){var s=e.mountComponent(t,n,i,o,a);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(r,e),s},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){i.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,o){var a=e._currentElement;if(t!==a||o!==e._context){var s=i.shouldUpdateRefs(a,t);s&&i.detachRefs(e,a),e.receiveComponent(t,n,o),s&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}});e.exports=o},function(e,t,n){"use strict";function r(e){if(f){var t=e.node,n=e.children;if(n.length)for(var r=0;r<n.length;r++)m(t,n[r],null);else null!=e.html?h(t,e.html):null!=e.text&&d(t,e.text)}}function i(e,t){e.parentNode.replaceChild(t.node,e),r(t)}function o(e,t){f?e.children.push(t):e.node.appendChild(t.node)}function a(e,t){f?e.html=t:h(e.node,t)}function s(e,t){f?e.text=t:d(e.node,t)}function c(){return this.node.nodeName}function l(e){return{node:e,children:[],html:null,text:null,toString:c}}var u=n(36),h=n(25),p=n(37),d=n(62),f="undefined"!==typeof document&&"number"===typeof document.documentMode||"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),m=p(function(e,t,n){11===t.node.nodeType||1===t.node.nodeType&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===u.html)?(r(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),r(t))});l.insertTreeBefore=m,l.replaceChildWithTree=i,l.queueChild=o,l.queueHTML=a,l.queueText=s,e.exports=l},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var i=new Error(n);throw i.name="Invariant Violation",i.framesToPop=1,i}e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return v(e,r)}function i(e,t,n){var i=r(e,n,t);i&&(n._dispatchListeners=m(n._dispatchListeners,i),n._dispatchInstances=m(n._dispatchInstances,e))}function o(e){e&&e.dispatchConfig.phasedRegistrationNames&&f.traverseTwoPhase(e._targetInst,i,e)}function a(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?f.getParentInstance(t):null;f.traverseTwoPhase(n,i,e)}}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=v(e,r);i&&(n._dispatchListeners=m(n._dispatchListeners,i),n._dispatchInstances=m(n._dispatchInstances,e))}}function c(e){e&&e.dispatchConfig.registrationName&&s(e._targetInst,null,e)}function l(e){g(e,o)}function u(e){g(e,a)}function h(e,t,n,r){f.traverseEnterLeave(n,r,s,e,t)}function p(e){g(e,c)}var d=n(19),f=n(30),m=n(54),g=n(55),v=(n(2),d.getListener),y={accumulateTwoPhaseDispatches:l,accumulateTwoPhaseDispatchesSkipTarget:u,accumulateDirectDispatches:p,accumulateEnterLeaveDispatches:h};e.exports=y},function(e,t,n){"use strict";function r(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}function i(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!r(t));default:return!1}}var o=n(1),a=n(29),s=n(30),c=n(31),l=n(54),u=n(55),h=(n(0),{}),p=null,d=function(e,t){e&&(s.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},f=function(e){return d(e,!0)},m=function(e){return d(e,!1)},g=function(e){return"."+e._rootNodeID},v={injection:{injectEventPluginOrder:a.injectEventPluginOrder,injectEventPluginsByName:a.injectEventPluginsByName},putListener:function(e,t,n){"function"!==typeof n&&o("94",t,typeof n);var r=g(e);(h[t]||(h[t]={}))[r]=n;var i=a.registrationNameModules[t];i&&i.didPutListener&&i.didPutListener(e,t,n)},getListener:function(e,t){var n=h[t];if(i(t,e._currentElement.type,e._currentElement.props))return null;var r=g(e);return n&&n[r]},deleteListener:function(e,t){var n=a.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var r=h[t];if(r){delete r[g(e)]}},deleteAllListeners:function(e){var t=g(e);for(var n in h)if(h.hasOwnProperty(n)&&h[n][t]){var r=a.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(e,n),delete h[n][t]}},extractEvents:function(e,t,n,r){for(var i,o=a.plugins,s=0;s<o.length;s++){var c=o[s];if(c){var u=c.extractEvents(e,t,n,r);u&&(i=l(i,u))}}return i},enqueueEvents:function(e){e&&(p=l(p,e))},processEventQueue:function(e){var t=p;p=null,e?u(t,f):u(t,m),p&&o("95"),c.rethrowCaughtError()},__purge:function(){h={}},__getListenerBank:function(){return h}};e.exports=v},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(10),o=n(32),a={view:function(e){if(e.view)return e.view;var t=o(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};i.augmentClass(r,a),e.exports=r},function(e,t,n){"use strict";var r={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=r},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";var r=n(1),i=(n(0),{}),o={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,i,o,a,s,c){this.isInTransaction()&&r("27");var l,u;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),u=e.call(t,n,i,o,a,s,c),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return u},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=i,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()||r("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var o,a=t[n],s=this.wrapperInitData[n];try{o=!0,s!==i&&a.close&&a.close.call(this,s),o=!1}finally{if(o)try{this.closeAll(n+1)}catch(e){}}}this.wrapperInitData.length=0}};e.exports=o},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(20),o=n(61),a=n(34),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+o.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+o.currentScrollTop}};i.augmentClass(r,s),e.exports=r},function(e,t,n){"use strict";var r,i=n(5),o=n(36),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,c=n(37),l=c(function(e,t){if(e.namespaceURI!==o.svg||"innerHTML"in e)e.innerHTML=t;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+t+"</svg>";for(var n=r.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(i.canUseDOM){var u=document.createElement("div");u.innerHTML=" ",""===u.innerHTML&&(l=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),a.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),u=null}e.exports=l},function(e,t,n){"use strict";function r(e){var t=""+e,n=o.exec(t);if(!n)return t;var r,i="",a=0,s=0;for(a=n.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==a&&(i+=t.substring(s,a)),s=a+1,i+=r}return s!==a?i+t.substring(s,a):i}function i(e){return"boolean"===typeof e||"number"===typeof e?""+e:r(e)}var o=/["'&<>]/;e.exports=i},function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,m)||(e[m]=d++,h[e[m]]={}),h[e[m]]}var i,o=n(3),a=n(29),s=n(132),c=n(61),l=n(133),u=n(33),h={},p=!1,d=0,f={topAbort:"abort",topAnimationEnd:l("animationend")||"animationend",topAnimationIteration:l("animationiteration")||"animationiteration",topAnimationStart:l("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:l("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),g=o({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=e}},setEnabled:function(e){g.ReactEventListener&&g.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,i=r(n),o=a.registrationNameDependencies[e],s=0;s<o.length;s++){var c=o[s];i.hasOwnProperty(c)&&i[c]||("topWheel"===c?u("wheel")?g.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):u("mousewheel")?g.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):g.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===c?u("scroll",!0)?g.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):g.ReactEventListener.trapBubbledEvent("topScroll","scroll",g.ReactEventListener.WINDOW_HANDLE):"topFocus"===c||"topBlur"===c?(u("focus",!0)?(g.ReactEventListener.trapCapturedEvent("topFocus","focus",n),g.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):u("focusin")&&(g.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),g.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),i.topBlur=!0,i.topFocus=!0):f.hasOwnProperty(c)&&g.ReactEventListener.trapBubbledEvent(c,f[c],n),i[c]=!0)}},trapBubbledEvent:function(e,t,n){return g.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return g.ReactEventListener.trapCapturedEvent(e,t,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===i&&(i=g.supportsEventPageXY()),!i&&!p){var e=c.refreshScrollValues;g.ReactEventListener.monitorScrollValue(e),p=!0}}});e.exports=g},function(e,t,n){(function(e){!function(e,n){n(t)}(0,function(t){function n(){}function r(e,t){this.x=e||0,this.y=t||0}function i(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function o(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function a(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function s(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function c(e,t,n,i,o,a,l,u,h,p){Object.defineProperty(this,"id",{value:ro++}),this.uuid=to.generateUUID(),this.name="",this.image=void 0!==e?e:c.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:c.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:1001,this.wrapT=void 0!==i?i:1001,this.magFilter=void 0!==o?o:1006,this.minFilter=void 0!==a?a:1008,this.anisotropy=void 0!==h?h:1,this.format=void 0!==l?l:1023,this.type=void 0!==u?u:1009,this.offset=new r(0,0),this.repeat=new r(1,1),this.center=new r(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new s,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==p?p:3e3,this.version=0,this.onUpdate=null}function l(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function u(e,t,n){this.width=e,this.height=t,this.scissor=new l(0,0,e,t),this.scissorTest=!1,this.viewport=new l(0,0,e,t),n=n||{},void 0===n.minFilter&&(n.minFilter=1006),this.texture=new c(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0===n.generateMipmaps||n.generateMipmaps,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function h(e,t,n){u.call(this,e,t,n),this.activeMipMapLevel=this.activeCubeFace=0}function p(e,t,n,r,i,o,a,s,l,u,h,p){c.call(this,null,o,a,s,l,u,r,i,h,p),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:1003,this.minFilter=void 0!==u?u:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function d(e,t){this.min=void 0!==e?e:new a(1/0,1/0,1/0),this.max=void 0!==t?t:new a(-1/0,-1/0,-1/0)}function f(e,t){this.center=void 0!==e?e:new a,this.radius=void 0!==t?t:0}function m(e,t){this.normal=void 0!==e?e:new a(1,0,0),this.constant=void 0!==t?t:0}function g(e,t,n,r,i,o){this.planes=[void 0!==e?e:new m,void 0!==t?t:new m,void 0!==n?n:new m,void 0!==r?r:new m,void 0!==i?i:new m,void 0!==o?o:new m]}function v(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function y(){function e(i,o){!1!==n&&(r(i,o),t.requestAnimationFrame(e))}var t=null,n=!1,r=null;return{start:function(){!0!==n&&null!==r&&(t.requestAnimationFrame(e),n=!0)},stop:function(){n=!1},setAnimationLoop:function(e){r=e},setContext:function(e){t=e}}}function x(e){function t(t,n){var r=t.array,i=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();return e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback(),n=e.FLOAT,r instanceof Float32Array?n=e.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?n=e.UNSIGNED_SHORT:r instanceof Int16Array?n=e.SHORT:r instanceof Uint32Array?n=e.UNSIGNED_INT:r instanceof Int32Array?n=e.INT:r instanceof Int8Array?n=e.BYTE:r instanceof Uint8Array&&(n=e.UNSIGNED_BYTE),{buffer:o,type:n,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}var n=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),n.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var r=n.get(t);r&&(e.deleteBuffer(r.buffer),n.delete(t))},update:function(r,i){r.isInterleavedBufferAttribute&&(r=r.data);var o=n.get(r);if(void 0===o)n.set(r,t(r,i));else if(o.version<r.version){var a=r,s=a.array,c=a.updateRange;e.bindBuffer(i,o.buffer),!1===a.dynamic?e.bufferData(i,s,e.STATIC_DRAW):-1===c.count?e.bufferSubData(i,0,s):0===c.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,c.offset*s.BYTES_PER_ELEMENT,s.subarray(c.offset,c.offset+c.count)),c.count=-1),o.version=r.version}}}}function b(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||b.DefaultOrder}function _(){this.mask=1}function w(){Object.defineProperty(this,"id",{value:lo++}),this.uuid=to.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=w.DefaultUp.clone();var e=new a,t=new b,n=new o,r=new a(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new i},normalMatrix:{value:new s}}),this.matrix=new i,this.matrixWorld=new i,this.matrixAutoUpdate=w.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new _,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function E(){w.call(this),this.type="Camera",this.matrixWorldInverse=new i,this.projectionMatrix=new i,this.projectionMatrixInverse=new i}function M(e,t,n,r,i,o){E.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function T(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new a,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new v,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function S(){Object.defineProperty(this,"id",{value:uo+=2}),this.uuid=to.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function A(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function C(e,t,n){A.call(this,new Int8Array(e),t,n)}function R(e,t,n){A.call(this,new Uint8Array(e),t,n)}function L(e,t,n){A.call(this,new Uint8ClampedArray(e),t,n)}function P(e,t,n){A.call(this,new Int16Array(e),t,n)}function I(e,t,n){A.call(this,new Uint16Array(e),t,n)}function O(e,t,n){A.call(this,new Int32Array(e),t,n)}function N(e,t,n){A.call(this,new Uint32Array(e),t,n)}function D(e,t,n){A.call(this,new Float32Array(e),t,n)}function U(e,t,n){A.call(this,new Float64Array(e),t,n)}function F(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function B(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function k(){Object.defineProperty(this,"id",{value:ho+=2}),this.uuid=to.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function H(e,t,n,r,i,o){S.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new G(e,t,n,r,i,o)),this.mergeVertices()}function G(e,t,n,r,i,o){function s(e,t,n,r,i,o,s,m,g,v,y){var x=o/g,b=s/v,_=o/2,w=s/2,E=m/2;s=g+1;var M,T,S=v+1,A=o=0,C=new a;for(T=0;T<S;T++){var R=T*b-w;for(M=0;M<s;M++)C[e]=(M*x-_)*r,C[t]=R*i,C[n]=E,u.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=0<m?1:-1,h.push(C.x,C.y,C.z),p.push(M/g),p.push(1-T/v),o+=1}for(T=0;T<v;T++)for(M=0;M<g;M++)e=d+M+s*(T+1),t=d+(M+1)+s*(T+1),n=d+(M+1)+s*T,l.push(d+M+s*T,e,n),l.push(e,t,n),A+=6;c.addGroup(f,A,y),f+=A,d+=o}k.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var c=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var l=[],u=[],h=[],p=[],d=0,f=0;s("z","y","x",-1,-1,n,t,e,o,i,0),s("z","y","x",1,-1,n,t,-e,o,i,1),s("x","z","y",1,1,e,n,t,r,o,2),s("x","z","y",1,-1,e,n,-t,r,o,3),s("x","y","z",1,-1,e,t,n,r,i,4),s("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(l),this.addAttribute("position",new D(u,3)),this.addAttribute("normal",new D(h,3)),this.addAttribute("uv",new D(p,2))}function z(e,t,n,r){S.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new j(e,t,n,r)),this.mergeVertices()}function j(e,t,n,r){k.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},e=e||1,t=t||1;var i=e/2,o=t/2;n=Math.floor(n)||1,r=Math.floor(r)||1;var a=n+1,s=r+1,c=e/n,l=t/r,u=[],h=[],p=[],d=[];for(e=0;e<s;e++){var f=e*l-o;for(t=0;t<a;t++)h.push(t*c-i,-f,0),p.push(0,0,1),d.push(t/n),d.push(1-e/r)}for(e=0;e<r;e++)for(t=0;t<n;t++)i=t+a*(e+1),o=t+1+a*(e+1),s=t+1+a*e,u.push(t+a*e,i,s),u.push(i,o,s);this.setIndex(u),this.addAttribute("position",new D(h,3)),this.addAttribute("normal",new D(p,3)),this.addAttribute("uv",new D(d,2))}function V(){Object.defineProperty(this,"id",{value:po++}),this.uuid=to.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function W(e){V.call(this),this.type="MeshBasicMaterial",this.color=new v(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(e)}function X(e){V.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function q(e,t){this.origin=void 0!==e?e:new a,this.direction=void 0!==t?t:new a}function Y(e,t,n){this.a=void 0!==e?e:new a,this.b=void 0!==t?t:new a,this.c=void 0!==n?n:new a}function Z(e,t){w.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new k,this.material=void 0!==t?t:new W({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function K(e,t,n,r){function i(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}var o,a,s,c=new v(0),l=0;return{getClearColor:function(){return c},setClearColor:function(e,t){c.set(e),l=void 0!==t?t:1,i(c,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,i(c,l)},render:function(t,r,u,h){r=r.background,null===r?i(c,l):r&&r.isColor&&(i(r,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),r&&r.isCubeTexture?(void 0===s&&(s=new Z(new G(1,1,1),new X({uniforms:co.cube.uniforms,vertexShader:co.cube.vertexShader,fragmentShader:co.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1})),s.geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(s)),s.material.uniforms.tCube.value=r,t.push(s,s.geometry,s.material,0,null)):r&&r.isTexture&&(void 0===o&&(o=new M(-1,1,1,-1,0,1),a=new Z(new j(2,2),new W({depthTest:!1,depthWrite:!1,fog:!1})),n.update(a)),a.material.map=r,e.renderBufferDirect(o,null,a.geometry,a.material,a,null))}}}function J(e,t,n,r){var i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(o,a,s){if(r.isWebGL2)var c=e;else if(null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),n.update(s,i,o.maxInstancedCount)}}function Q(e,t,n){function r(t){if("highp"===t){if(0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision)return"highp";t="mediump"}return"mediump"===t&&0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision?"mediump":"lowp"}var i,o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s),n=!0===n.logarithmicDepthBuffer,s=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);var c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_TEXTURE_SIZE),u=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),h=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),d=e.getParameter(e.MAX_VARYING_VECTORS),f=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),m=0<c,g=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:n,maxTextures:s,maxVertexTextures:c,maxTextureSize:l,maxCubemapSize:u,maxAttributes:h,maxVertexUniforms:p,maxVaryings:d,maxFragmentUniforms:f,vertexTextures:m,floatFragmentTextures:g,floatVertexTextures:m&&g}}function $(){function e(){u.value!==r&&(u.value=r,u.needsUpdate=0<i),n.numPlanes=i,n.numIntersection=0}function t(e,t,r,i){var o=null!==e?e.length:0,a=null;if(0!==o){if(a=u.value,!0!==i||null===a)for(i=r+4*o,t=t.matrixWorldInverse,l.getNormalMatrix(t),(null===a||a.length<i)&&(a=new Float32Array(i)),i=0;i!==o;++i,r+=4)c.copy(e[i]).applyMatrix4(t,l),c.normal.toArray(a,r),a[r+3]=c.constant;u.value=a,u.needsUpdate=!0}return n.numPlanes=o,a}var n=this,r=null,i=0,o=!1,a=!1,c=new m,l=new s,u={value:null,needsUpdate:!1};this.uniform=u,this.numIntersection=this.numPlanes=0,this.init=function(e,n,a){var s=0!==e.length||n||0!==i||o;return o=n,r=t(e,a,0),i=e.length,s},this.beginShadows=function(){a=!0,t(null)},this.endShadows=function(){a=!1,e()},this.setState=function(n,s,c,l,h,p){if(!o||null===n||0===n.length||a&&!c)a?t(null):e();else{c=a?0:i;var d=4*c,f=h.clippingState||null;for(u.value=f,f=t(n,l,d,p),n=0;n!==d;++n)f[n]=r[n];h.clippingState=f,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=c}}}function ee(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];switch(n){case"WEBGL_depth_texture":var r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r}}}function te(e,t,n){function r(e){var a=e.target;e=i[a.id],null!==e.index&&t.remove(e.index);for(var s in e.attributes)t.remove(e.attributes[s]);a.removeEventListener("dispose",r),delete i[a.id],(s=o[e.id])&&(t.remove(s),delete o[e.id]),n.memory.geometries--}var i={},o={};return{get:function(e,t){var o=i[t.id];return o||(t.addEventListener("dispose",r),t.isBufferGeometry?o=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new k).setFromObject(e)),o=t._bufferGeometry),i[t.id]=o,n.memory.geometries++,o)},update:function(n){var r=n.index,i=n.attributes;null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER);for(var o in i)t.update(i[o],e.ARRAY_BUFFER);n=n.morphAttributes;for(o in n){r=n[o],i=0;for(var a=r.length;i<a;i++)t.update(r[i],e.ARRAY_BUFFER)}},getWireframeAttribute:function(n){var r=o[n.id];if(r)return r;r=[];var i=n.index,a=n.attributes;if(null!==i){i=i.array,a=0;for(var s=i.length;a<s;a+=3){var c=i[a+0],l=i[a+1],u=i[a+2];r.push(c,l,l,u,u,c)}}else for(i=a.position.array,a=0,s=i.length/3-1;a<s;a+=3)c=a+0,l=a+1,u=a+2,r.push(c,l,l,u,u,c);return r=new(65535<B(r)?N:I)(r,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),o[n.id]=r}}}function ne(e,t,n,r){var i,o,a;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i)},this.renderInstances=function(s,c,l){if(r.isWebGL2)var u=e;else if(null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,l,o,c*a,s.maxInstancedCount),n.update(l,i,s.maxInstancedCount)}}function re(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(i=i||1,t.calls++,r){case e.TRIANGLES:t.triangles+=n/3*i;break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=i*(n-2);break;case e.LINES:t.lines+=n/2*i;break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function ie(e,t){return Math.abs(t[1])-Math.abs(e[1])}function oe(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,c=s.length;if(void 0===(r=t[i.id])){r=[];for(var l=0;l<c;l++)r[l]=[l,0];t[i.id]=r}var u=o.morphTargets&&i.morphAttributes.position;for(o=o.morphNormals&&i.morphAttributes.normal,l=0;l<c;l++){var h=r[l];0!==h[1]&&(u&&i.removeAttribute("morphTarget"+l),o&&i.removeAttribute("morphNormal"+l))}for(l=0;l<c;l++)h=r[l],h[0]=l,h[1]=s[l];for(r.sort(ie),l=0;8>l;l++)(h=r[l])&&(s=h[0],c=h[1])?(u&&i.addAttribute("morphTarget"+l,u[s]),o&&i.addAttribute("morphNormal"+l,o[s]),n[l]=c):n[l]=0;a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function ae(e,t){var n={};return{update:function(r){var i=t.render.frame,o=r.geometry,a=e.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),e.update(a),n[a.id]=i),a},dispose:function(){n={}}}}function se(e,t,n,r,i,o,a,s,l,u){e=void 0!==e?e:[],c.call(this,e,void 0!==t?t:301,n,r,i,o,a,s,l,u),this.flipY=!1}function ce(e,t,n){var r=e[0];if(0>=r||0<r)return e;var i=t*n,o=go[i];if(void 0===o&&(o=new Float32Array(i),go[i]=o),0!==t)for(r.toArray(o,0),r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i);return o}function le(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function ue(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function he(e,t){var n=vo[t];void 0===n&&(n=new Int32Array(t),vo[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function pe(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function de(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function fe(e,t){var n=this.cache;void 0!==t.x?n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y):le(n,t)||(e.uniform2fv(this.addr,t),ue(n,t))}function me(e,t){var n=this.cache;void 0!==t.x?n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z):void 0!==t.r?n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b):le(n,t)||(e.uniform3fv(this.addr,t),ue(n,t))}function ge(e,t){var n=this.cache;void 0!==t.x?n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w):le(n,t)||(e.uniform4fv(this.addr,t),ue(n,t))}function ve(e,t){var n=this.cache,r=t.elements;void 0===r?le(n,t)||(e.uniformMatrix2fv(this.addr,!1,t),ue(n,t)):le(n,r)||(bo.set(r),e.uniformMatrix2fv(this.addr,!1,bo),ue(n,r))}function ye(e,t){var n=this.cache,r=t.elements;void 0===r?le(n,t)||(e.uniformMatrix3fv(this.addr,!1,t),ue(n,t)):le(n,r)||(xo.set(r),e.uniformMatrix3fv(this.addr,!1,xo),ue(n,r))}function xe(e,t){var n=this.cache,r=t.elements;void 0===r?le(n,t)||(e.uniformMatrix4fv(this.addr,!1,t),ue(n,t)):le(n,r)||(yo.set(r),e.uniformMatrix4fv(this.addr,!1,yo),ue(n,r))}function be(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||fo,i)}function _e(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||mo,i)}function we(e,t){var n=this.cache;le(n,t)||(e.uniform2iv(this.addr,t),ue(n,t))}function Ee(e,t){var n=this.cache;le(n,t)||(e.uniform3iv(this.addr,t),ue(n,t))}function Me(e,t){var n=this.cache;le(n,t)||(e.uniform4iv(this.addr,t),ue(n,t))}function Te(e){switch(e){case 5126:return pe;case 35664:return fe;case 35665:return me;case 35666:return ge;case 35674:return ve;case 35675:return ye;case 35676:return xe;case 35678:case 36198:return be;case 35680:return _e;case 5124:case 35670:return de;case 35667:case 35671:return we;case 35668:case 35672:return Ee;case 35669:case 35673:return Me}}function Se(e,t){var n=this.cache;le(n,t)||(e.uniform1fv(this.addr,t),ue(n,t))}function Ae(e,t){var n=this.cache;le(n,t)||(e.uniform1iv(this.addr,t),ue(n,t))}function Ce(e,t){var n=this.cache;t=ce(t,this.size,2),le(n,t)||(e.uniform2fv(this.addr,t),this.updateCache(t))}function Re(e,t){var n=this.cache;t=ce(t,this.size,3),le(n,t)||(e.uniform3fv(this.addr,t),this.updateCache(t))}function Le(e,t){var n=this.cache;t=ce(t,this.size,4),le(n,t)||(e.uniform4fv(this.addr,t),this.updateCache(t))}function Pe(e,t){var n=this.cache;t=ce(t,this.size,4),le(n,t)||(e.uniformMatrix2fv(this.addr,!1,t),this.updateCache(t))}function Ie(e,t){var n=this.cache;t=ce(t,this.size,9),le(n,t)||(e.uniformMatrix3fv(this.addr,!1,t),this.updateCache(t))}function Oe(e,t){var n=this.cache;t=ce(t,this.size,16),le(n,t)||(e.uniformMatrix4fv(this.addr,!1,t),this.updateCache(t))}function Ne(e,t,n){var r=this.cache,i=t.length,o=he(n,i);for(!1===le(r,o)&&(e.uniform1iv(this.addr,o),ue(r,o)),e=0;e!==i;++e)n.setTexture2D(t[e]||fo,o[e])}function De(e,t,n){var r=this.cache,i=t.length,o=he(n,i);for(!1===le(r,o)&&(e.uniform1iv(this.addr,o),ue(r,o)),e=0;e!==i;++e)n.setTextureCube(t[e]||mo,o[e])}function Ue(e){switch(e){case 5126:return Se;case 35664:return Ce;case 35665:return Re;case 35666:return Le;case 35674:return Pe;case 35675:return Ie;case 35676:return Oe;case 35678:return Ne;case 35680:return De;case 5124:case 35670:return Ae;case 35667:case 35671:return we;case 35668:case 35672:return Ee;case 35669:case 35673:return Me}}function Fe(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Te(t.type)}function Be(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=Ue(t.type)}function ke(e){this.id=e,this.seq=[],this.map={}}function He(e,t,n){this.seq=[],this.map={},this.renderer=n,n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(var r=0;r<n;++r){var i=e.getActiveUniform(t,r),o=e.getUniformLocation(t,i.name),a=this,s=i.name,c=s.length;for(_o.lastIndex=0;;){var l=_o.exec(s),u=_o.lastIndex,h=l[1],p=l[3];if("]"===l[2]&&(h|=0),void 0===p||"["===p&&u+2===c){s=a,i=void 0===p?new Fe(h,i,o):new Be(h,i,o),s.seq.push(i),s.map[i.id]=i;break}p=a.map[h],void 0===p&&(p=new ke(h),h=a,a=p,h.seq.push(a),h.map[a.id]=a),a=p}}}function Ge(e){e=e.split("\n");for(var t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}function ze(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),Ge(n)),r}function je(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+e)}}function Ve(e,t){return t=je(t),"vec4 "+e+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function We(e,t){return t=je(t),"vec4 "+e+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Xe(e,t){switch(t){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="Uncharted2";break;case 4:t="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function qe(e,t,n){return e=e||{},[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ze).join("\n")}function Ye(e){var t,n=[];for(t in e){var r=e[t];!1!==r&&n.push("#define "+t+" "+r)}return n.join("\n")}function Ze(e){return""!==e}function Ke(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Je(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Qe(e){return e.replace(/^[ \t]*#include +<([\w\d.\/]+)>/gm,function(e,t){if(void 0===(e=io[t]))throw Error("Can not resolve #include <"+t+">");return Qe(e)})}function $e(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,r){for(e="",t=parseInt(t);t<parseInt(n);t++)e+=r.replace(/\[ i \]/g,"[ "+t+" ]");return e})}function et(e,t,n,r,i,o,a){var s=e.context,c=r.defines,l=i.vertexShader,u=i.fragmentShader,h="SHADOWMAP_TYPE_BASIC";1===o.shadowMapType?h="SHADOWMAP_TYPE_PCF":2===o.shadowMapType&&(h="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case 301:case 302:p="ENVMAP_TYPE_CUBE";break;case 306:case 307:p="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:p="ENVMAP_TYPE_EQUIREC";break;case 305:p="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case 302:case 304:d="ENVMAP_MODE_REFRACTION"}switch(r.combine){case 0:f="ENVMAP_BLENDING_MULTIPLY";break;case 1:f="ENVMAP_BLENDING_MIX";break;case 2:f="ENVMAP_BLENDING_ADD"}}var m=0<e.gammaFactor?e.gammaFactor:1,g=a.isWebGL2?"":qe(r.extensions,o,t),v=Ye(c),y=s.createProgram();r.isRawShaderMaterial?(c=[v].filter(Ze).join("\n"),0<c.length&&(c+="\n"),t=[g,v].filter(Ze).join("\n"),0<t.length&&(t+="\n")):(c=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,v,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ze).join("\n"),t=[g,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,v,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.envMap?"#define "+d:"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==o.toneMapping?"#define TONE_MAPPING":"",0!==o.toneMapping?io.tonemapping_pars_fragment:"",0!==o.toneMapping?Xe("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?io.encodings_pars_fragment:"",o.mapEncoding?Ve("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?Ve("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Ve("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?We("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Ze).join("\n")),l=Qe(l),l=Ke(l,o),l=Je(l,o),u=Qe(u),u=Ke(u,o),u=Je(u,o),l=$e(l),u=$e(u),a.isWebGL2&&!r.isRawShaderMaterial&&(a=!1,h=/^\s*#version\s+300\s+es\s*\n/,r.isShaderMaterial&&null!==l.match(h)&&null!==u.match(h)&&(a=!0,l=l.replace(h,""),u=u.replace(h,"")),c="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n"+c,t=["#version 300 es\n\n#define varying in",a?"":"out highp vec4 pc_fragColor;",a?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+t),u=t+u,l=ze(s,s.VERTEX_SHADER,c+l),u=ze(s,s.FRAGMENT_SHADER,u),s.attachShader(y,l),s.attachShader(y,u),void 0!==r.index0AttributeName?s.bindAttribLocation(y,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(y,0,"position"),s.linkProgram(y),o=s.getProgramInfoLog(y).trim(),a=s.getShaderInfoLog(l).trim(),h=s.getShaderInfoLog(u).trim(),d=p=!0,!1===s.getProgramParameter(y,s.LINK_STATUS)?(p=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(y,s.VALIDATE_STATUS),"gl.getProgramInfoLog",o,a,h)):""!==o?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",o):""!==a&&""!==h||(d=!1),d&&(this.diagnostics={runnable:p,material:r,programLog:o,vertexShader:{log:a,prefix:c},fragmentShader:{log:h,prefix:t}}),s.deleteShader(l),s.deleteShader(u);var x;this.getUniforms=function(){return void 0===x&&(x=new He(s,y,e)),x};var b;return this.getAttributes=function(){if(void 0===b){for(var e={},t=s.getProgramParameter(y,s.ACTIVE_ATTRIBUTES),n=0;n<t;n++){var r=s.getActiveAttrib(y,n).name;e[r]=s.getAttribLocation(y,r)}b=e}return b},this.destroy=function(){s.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=wo++,this.code=n,this.usedTimes=1,this.program=y,this.vertexShader=l,this.fragmentShader=u,this}function tt(e,t,n){function r(e,t){if(e)e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding);else var n=3e3;return 3e3===n&&t&&(n=3007),n}var i=[],o={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},a="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");this.getParameters=function(t,i,a,s,c,l,u){var h=o[t.type];if(u.isSkinnedMesh){var p=u.skeleton.bones;if(n.floatVertexTextures)p=1024;else{var d=Math.min(Math.floor((n.maxVertexUniforms-20)/4),p.length);d<p.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+p.length+" bones. This GPU supports "+d+"."),p=0):p=d}}else p=0;d=n.precision,null!==t.precision&&(d=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",d,"instead.");var f=e.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:n.vertexTextures,outputEncoding:r(f?f.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:r(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:r(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(306===t.envMap.mapping||307===t.envMap.mapping),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:r(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:1===t.normalMapType,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&0<p,maxBones:p,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:c,numClipIntersection:l,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&0<a.length,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:2===t.side,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(i=0;i<a.length;i++)r.push(n[a[i]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(r,o,a,s){for(var c,l=0,u=i.length;l<u;l++){var h=i[l];if(h.code===s){c=h,++c.usedTimes;break}}return void 0===c&&(c=new et(e,t,s,r,o,a,n),i.push(c)),c},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function nt(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function rt(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function it(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ot(){var e=[],t=0,n=[],r=[];return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(i,o,a,s,c){var l=e[t];void 0===l?(l={id:i.id,object:i,geometry:o,material:a,program:a.program,renderOrder:i.renderOrder,z:s,group:c},e[t]=l):(l.id=i.id,l.object=i,l.geometry=o,l.material=a,l.program=a.program,l.renderOrder=i.renderOrder,l.z=s,l.group=c),(!0===a.transparent?r:n).push(l),t++},sort:function(){1<n.length&&n.sort(rt),1<r.length&&r.sort(it)}}}function at(){var e={};return{get:function(t,n){return t=t.id+","+n.id,n=e[t],void 0===n&&(n=new ot,e[t]=n),n},dispose:function(){e={}}}}function st(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":var n={direction:new a,color:new v,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"SpotLight":n={position:new a,direction:new a,color:new v,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"PointLight":n={position:new a,color:new v,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new a,skyColor:new v,groundColor:new v};break;case"RectAreaLight":n={color:new v,position:new a,halfWidth:new a,halfHeight:new a}}return e[t.id]=n}}}function ct(){var e=new st,t={id:Eo++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new a,r=new i,o=new i;return{setup:function(i,a,s){var c=0,l=0,u=0,h=0,p=0,d=0,f=0,m=0;s=s.matrixWorldInverse;for(var g=0,v=i.length;g<v;g++){var y=i[g],x=y.color,b=y.intensity,_=y.distance,w=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)c+=x.r*b,l+=x.g*b,u+=x.b*b;else if(y.isDirectionalLight){var E=e.get(y);E.color.copy(y.color).multiplyScalar(y.intensity),E.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),E.direction.sub(n),E.direction.transformDirection(s),(E.shadow=y.castShadow)&&(x=y.shadow,E.shadowBias=x.bias,E.shadowRadius=x.radius,E.shadowMapSize=x.mapSize),t.directionalShadowMap[h]=w,t.directionalShadowMatrix[h]=y.shadow.matrix,t.directional[h]=E,h++}else y.isSpotLight?(E=e.get(y),E.position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(s),E.color.copy(x).multiplyScalar(b),E.distance=_,E.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),E.direction.sub(n),E.direction.transformDirection(s),E.coneCos=Math.cos(y.angle),E.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),E.decay=0===y.distance?0:y.decay,(E.shadow=y.castShadow)&&(x=y.shadow,E.shadowBias=x.bias,E.shadowRadius=x.radius,E.shadowMapSize=x.mapSize),t.spotShadowMap[d]=w,t.spotShadowMatrix[d]=y.shadow.matrix,t.spot[d]=E,d++):y.isRectAreaLight?(E=e.get(y),E.color.copy(x).multiplyScalar(b),E.position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(s),o.identity(),r.copy(y.matrixWorld),r.premultiply(s),o.extractRotation(r),E.halfWidth.set(.5*y.width,0,0),E.halfHeight.set(0,.5*y.height,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),t.rectArea[f]=E,f++):y.isPointLight?(E=e.get(y),E.position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(s),E.color.copy(y.color).multiplyScalar(y.intensity),E.distance=y.distance,E.decay=0===y.distance?0:y.decay,(E.shadow=y.castShadow)&&(x=y.shadow,E.shadowBias=x.bias,E.shadowRadius=x.radius,E.shadowMapSize=x.mapSize,E.shadowCameraNear=x.camera.near,E.shadowCameraFar=x.camera.far),t.pointShadowMap[p]=w,t.pointShadowMatrix[p]=y.shadow.matrix,t.point[p]=E,p++):y.isHemisphereLight&&(E=e.get(y),E.direction.setFromMatrixPosition(y.matrixWorld),E.direction.transformDirection(s),E.direction.normalize(),E.skyColor.copy(y.color).multiplyScalar(b),E.groundColor.copy(y.groundColor).multiplyScalar(b),t.hemi[m]=E,m++)}t.ambient[0]=c,t.ambient[1]=l,t.ambient[2]=u,t.directional.length=h,t.spot.length=d,t.rectArea.length=f,t.point.length=p,t.hemi.length=m,t.hash.stateID=t.id,t.hash.directionalLength=h,t.hash.pointLength=p,t.hash.spotLength=d,t.hash.rectAreaLength=f,t.hash.hemiLength=m,t.hash.shadowsLength=a.length},state:t}}function lt(){var e=new ct,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function ut(){var e={};return{get:function(t,n){if(void 0===e[t.id]){var r=new lt;e[t.id]={},e[t.id][n.id]=r}else void 0===e[t.id][n.id]?(r=new lt,e[t.id][n.id]=r):r=e[t.id][n.id];return r},dispose:function(){e={}}}}function ht(e){V.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(e)}function pt(e){V.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new a,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.lights=this.fog=!1,this.setValues(e)}function dt(e,t,n){function o(t,n,r,i,o,a){var s=t.geometry,c=v,l=t.customDepthMaterial;return r&&(c=y,l=t.customDistanceMaterial),l?c=l:(l=!1,n.morphTargets&&(s&&s.isBufferGeometry?l=s.morphAttributes&&s.morphAttributes.position&&0<s.morphAttributes.position.length:s&&s.isGeometry&&(l=s.morphTargets&&0<s.morphTargets.length)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t),t=t.isSkinnedMesh&&n.skinning,s=0,l&&(s|=1),t&&(s|=2),c=c[s]),e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length&&(s=c.uuid,l=n.uuid,t=x[s],void 0===t&&(t={},x[s]=t),s=t[l],void 0===s&&(s=c.clone(),t[l]=s),c=s),c.visible=n.visible,c.wireframe=n.wireframe,c.side=null!=n.shadowSide?n.shadowSide:b[n.side],c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,r&&c.isMeshDistanceMaterial&&(c.referencePosition.copy(i),c.nearDistance=o,c.farDistance=a),c}function s(n,r,i,a){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||c.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);var l=t.update(n),u=n.material;if(Array.isArray(u))for(var h=l.groups,p=0,d=h.length;p<d;p++){var f=h[p],g=u[f.materialIndex];g&&g.visible&&(g=o(n,g,a,m,i.near,i.far),e.renderBufferDirect(i,null,l,g,n,f))}else u.visible&&(g=o(n,u,a,m,i.near,i.far),e.renderBufferDirect(i,null,l,g,n,null))}for(n=n.children,l=0,u=n.length;l<u;l++)s(n[l],r,i,a)}}var c=new g,h=new i,p=new r,d=new r(n,n),f=new a,m=new a,v=Array(4),y=Array(4),x={},b={0:1,1:0,2:2},_=[new a(1,0,0),new a(-1,0,0),new a(0,0,1),new a(0,0,-1),new a(0,1,0),new a(0,-1,0)],w=[new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,0,1),new a(0,0,-1)],E=[new l,new l,new l,new l,new l,new l];for(n=0;4!==n;++n){var M=0!==(1&n),T=0!==(2&n),S=new ht({depthPacking:3201,morphTargets:M,skinning:T});v[n]=S,M=new pt({morphTargets:M,skinning:T}),y[n]=M}var A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,r){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==t.length){var i=e.state;i.disable(e.context.BLEND),i.buffers.color.setClear(1,1,1,1),i.buffers.depth.setTest(!0),i.setScissorTest(!1);for(var o,a=0,l=t.length;a<l;a++){var g=t[a];o=g.shadow;var v=g&&g.isPointLight;if(void 0===o)console.warn("THREE.WebGLShadowMap:",g,"has no shadow.");else{var y=o.camera;if(p.copy(o.mapSize),p.min(d),v){var x=p.x,b=p.y;E[0].set(2*x,b,x,b),E[1].set(0,b,x,b),E[2].set(3*x,b,x,b),E[3].set(x,b,x,b),E[4].set(3*x,0,x,b),E[5].set(x,0,x,b),p.x*=4,p.y*=2}for(null===o.map&&(o.map=new u(p.x,p.y,{minFilter:1003,magFilter:1003,format:1023}),o.map.texture.name=g.name+".shadowMap",y.updateProjectionMatrix()),o.isSpotLightShadow&&o.update(g),x=o.map,b=o.matrix,m.setFromMatrixPosition(g.matrixWorld),y.position.copy(m),v?(o=6,b.makeTranslation(-m.x,-m.y,-m.z)):(o=1,f.setFromMatrixPosition(g.target.matrixWorld),y.lookAt(f),y.updateMatrixWorld(),b.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),b.multiply(y.projectionMatrix),b.multiply(y.matrixWorldInverse)),e.setRenderTarget(x),e.clear(),g=0;g<o;g++)v&&(f.copy(y.position),f.add(_[g]),y.up.copy(w[g]),y.lookAt(f),y.updateMatrixWorld(),i.viewport(E[g])),h.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),c.setFromMatrix(h),s(n,r,y,v)}}A.needsUpdate=!1}}}function ft(e,t,n,r){function i(t,n,r){var i=new Uint8Array(4),o=e.createTexture();for(e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST),t=0;t<r;t++)e.texImage2D(n+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}function o(n,i){y[n]=1,0===x[n]&&(e.enableVertexAttribArray(n),x[n]=1),b[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),b[n]=i)}function a(t){!0!==_[t]&&(e.enable(t),_[t]=!0)}function s(t){!1!==_[t]&&(e.disable(t),_[t]=!1)}function c(t,r,i,o,c,l,u,h){if(0===t)M&&(s(e.BLEND),M=!1);else if(M||(a(e.BLEND),M=!0),5!==t){if(t!==T||h!==I){if(100===S&&100===R||(e.blendEquation(e.FUNC_ADD),R=S=100),h)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}P=L=C=A=null,T=t,I=h}}else c=c||r,l=l||i,u=u||o,r===S&&c===R||(e.blendEquationSeparate(n.convert(r),n.convert(c)),S=r,R=c),i===A&&o===C&&l===L&&u===P||(e.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(l),n.convert(u)),A=i,C=o,L=l,P=u),T=t,I=null}function u(t){O!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),O=t)}function h(t){0!==t?(a(e.CULL_FACE),t!==N&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):s(e.CULL_FACE),N=t}function p(t,n,r){t?(a(e.POLYGON_OFFSET_FILL),(U!==n||F!==r)&&(e.polygonOffset(n,r),U=n,F=r)):s(e.POLYGON_OFFSET_FILL)}function d(t){void 0===t&&(t=e.TEXTURE0+B-1),H!==t&&(e.activeTexture(t),H=t)}var f=new function(){var t=!1,n=new l,r=null,i=new l(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},m=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?a(e.DEPTH_TEST):s(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,i=r=n=null}}},g=new function(){var t=!1,n=null,r=null,i=null,o=null,c=null,l=null,u=null,h=null;return{setTest:function(t){t?a(e.STENCIL_TEST):s(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){c===t&&l===n&&u===r||(e.stencilOp(t,n,r),c=t,l=n,u=r)},setLocked:function(e){t=e},setClear:function(t){h!==t&&(e.clearStencil(t),h=t)},reset:function(){t=!1,h=u=l=c=o=i=r=n=null}}},v=e.getParameter(e.MAX_VERTEX_ATTRIBS),y=new Uint8Array(v),x=new Uint8Array(v),b=new Uint8Array(v),_={},w=null,E=null,M=null,T=null,S=null,A=null,C=null,R=null,L=null,P=null,I=!1,O=null,N=null,D=null,U=null,F=null,B=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),k=!1;v=0,v=e.getParameter(e.VERSION),-1!==v.indexOf("WebGL")?(v=parseFloat(/^WebGL ([0-9])/.exec(v)[1]),k=1<=v):-1!==v.indexOf("OpenGL ES")&&(v=parseFloat(/^OpenGL ES ([0-9])/.exec(v)[1]),k=2<=v);var H=null,G={},z=new l,j=new l,V={};return V[e.TEXTURE_2D]=i(e.TEXTURE_2D,e.TEXTURE_2D,1),V[e.TEXTURE_CUBE_MAP]=i(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),f.setClear(0,0,0,1),m.setClear(1),g.setClear(0),a(e.DEPTH_TEST),m.setFunc(3),u(!1),h(1),a(e.CULL_FACE),c(0),{buffers:{color:f,depth:m,stencil:g},initAttributes:function(){for(var e=0,t=y.length;e<t;e++)y[e]=0},enableAttribute:function(e){o(e,0)},enableAttributeAndDivisor:o,disableUnusedAttributes:function(){for(var t=0,n=x.length;t!==n;++t)x[t]!==y[t]&&(e.disableVertexAttribArray(t),x[t]=0)},enable:a,disable:s,getCompressedTextureFormats:function(){if(null===w&&(w=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)w.push(n[r]);return w},useProgram:function(t){return E!==t&&(e.useProgram(t),E=t,!0)},setBlending:c,setMaterial:function(t,n){2===t.side?s(e.CULL_FACE):a(e.CULL_FACE);var r=1===t.side;n&&(r=!r),u(r),1===t.blending&&!1===t.transparent?c(0):c(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),m.setFunc(t.depthFunc),m.setTest(t.depthTest),m.setMask(t.depthWrite),f.setMask(t.colorWrite),p(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:u,setCullFace:h,setLineWidth:function(t){t!==D&&(k&&e.lineWidth(t),D=t)},setPolygonOffset:p,setScissorTest:function(t){t?a(e.SCISSOR_TEST):s(e.SCISSOR_TEST)},activeTexture:d,bindTexture:function(t,n){null===H&&d();var r=G[H];void 0===r&&(r={type:void 0,texture:void 0},G[H]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||V[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===z.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),z.copy(t))},viewport:function(t){!1===j.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),j.copy(t))},reset:function(){for(var t=0;t<x.length;t++)1===x[t]&&(e.disableVertexAttribArray(t),x[t]=0);_={},H=w=null,G={},N=O=T=E=null,f.reset(),m.reset(),g.reset()}}}function mt(e,t,n,r,i,o,a){function s(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");t/=Math.max(e.width,e.height);var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.width=Math.floor(e.width*t),n.height=Math.floor(e.height*t),n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height),n}return e}function c(e){return to.isPowerOfTwo(e.width)&&to.isPowerOfTwo(e.height)}function l(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function u(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function h(t,n){if(!i.isWebGL2)return t;if(t===e.RGB){if(n===e.FLOAT)return e.RGB32F;if(n===e.HALF_FLOAT)return e.RGB16F;if(n===e.UNSIGNED_BYTE)return e.RGB8}if(t===e.RGBA){if(n===e.FLOAT)return e.RGBA32F;if(n===e.HALF_FLOAT)return e.RGBA16F;if(n===e.UNSIGNED_BYTE)return e.RGBA8}return t}function p(t){return 1003===t||1004===t||1005===t?e.NEAREST:e.LINEAR}function d(t){t=t.target,t.removeEventListener("dispose",d);e:{var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)break e;e.deleteTexture(n.__webglTexture)}r.remove(t)}t.isVideoTexture&&delete b[t.id],a.memory.textures--}function f(t){t=t.target,t.removeEventListener("dispose",f);var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(i=0;6>i;i++)e.deleteFramebuffer(n.__webglFramebuffer[i]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[i]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}a.memory.textures--}function m(t,p){var f=r.get(t);if(t.isVideoTexture){var m=t.id,v=a.render.frame;b[m]!==v&&(b[m]=v,t.update())}if(0<t.version&&f.__version!==t.version)if(void 0===(m=t.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==m.complete){void 0===f.__webglInit&&(f.__webglInit=!0,t.addEventListener("dispose",d),f.__webglTexture=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+p),n.bindTexture(e.TEXTURE_2D,f.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,t.unpackAlignment),p=s(t.image,i.maxTextureSize),(i.isWebGL2?0:1001!==t.wrapS||1001!==t.wrapT||1003!==t.minFilter&&1006!==t.minFilter)&&!1===c(p)&&(p instanceof HTMLImageElement||p instanceof HTMLCanvasElement||p instanceof ImageBitmap)&&(void 0===x&&(x=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),x.width=to.floorPowerOfTwo(p.width),x.height=to.floorPowerOfTwo(p.height),x.getContext("2d").drawImage(p,0,0,x.width,x.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+p.width+"x"+p.height+"). Resized to "+x.width+"x"+x.height),p=x),m=c(p),v=o.convert(t.format);var y=o.convert(t.type),_=h(v,y);g(e.TEXTURE_2D,t,m);var w=t.mipmaps;if(t.isDepthTexture){if(_=e.DEPTH_COMPONENT,1015===t.type){if(!i.isWebGL2)throw Error("Float Depth Texture only supported in WebGL2.0");_=e.DEPTH_COMPONENT32F}else i.isWebGL2&&(_=e.DEPTH_COMPONENT16);1026===t.format&&_===e.DEPTH_COMPONENT&&1012!==t.type&&1014!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),t.type=1012,y=o.convert(t.type)),1027===t.format&&(_=e.DEPTH_STENCIL,1020!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),t.type=1020,y=o.convert(t.type))),n.texImage2D(e.TEXTURE_2D,0,_,p.width,p.height,0,v,y,null)}else if(t.isDataTexture)if(0<w.length&&m){for(var E=0,M=w.length;E<M;E++){var T=w[E];n.texImage2D(e.TEXTURE_2D,E,_,T.width,T.height,0,v,y,T.data)}t.generateMipmaps=!1,f.__maxMipLevel=w.length-1}else n.texImage2D(e.TEXTURE_2D,0,_,p.width,p.height,0,v,y,p.data),f.__maxMipLevel=0;else if(t.isCompressedTexture){for(E=0,M=w.length;E<M;E++)T=w[E],1023!==t.format&&1022!==t.format?-1<n.getCompressedTextureFormats().indexOf(v)?n.compressedTexImage2D(e.TEXTURE_2D,E,_,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,E,_,T.width,T.height,0,v,y,T.data);f.__maxMipLevel=w.length-1}else if(0<w.length&&m){for(E=0,M=w.length;E<M;E++)T=w[E],n.texImage2D(e.TEXTURE_2D,E,_,v,y,T);t.generateMipmaps=!1,f.__maxMipLevel=w.length-1}else n.texImage2D(e.TEXTURE_2D,0,_,v,y,p),f.__maxMipLevel=0;return l(t,m)&&u(e.TEXTURE_2D,t,p.width,p.height),f.__version=t.version,void(t.onUpdate&&t.onUpdate(t))}console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}n.activeTexture(e.TEXTURE0+p),n.bindTexture(e.TEXTURE_2D,f.__webglTexture)}function g(n,a,s){s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),1001===a.wrapS&&1001===a.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,p(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,p(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(s=t.get("EXT_texture_filter_anisotropic"))||1015===a.type&&null===t.get("OES_texture_float_linear")||1016===a.type&&null===(i.isWebGL2||t.get("OES_texture_half_float_linear"))||!(1<a.anisotropy||r.get(a).__currentAnisotropy)||(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}function v(t,i,a,s){var c=o.convert(i.texture.format),l=o.convert(i.texture.type),u=h(c,l);n.texImage2D(s,0,u,i.width,i.height,0,c,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function y(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}var x,b={};this.setTexture2D=m,this.setTextureCube=function(t,p){var f=r.get(t);if(6===t.image.length)if(0<t.version&&f.__version!==t.version){f.__image__webglTextureCube||(t.addEventListener("dispose",d),f.__image__webglTextureCube=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+p),n.bindTexture(e.TEXTURE_CUBE_MAP,f.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY),p=t&&t.isCompressedTexture;for(var m=t.image[0]&&t.image[0].isDataTexture,v=[],y=0;6>y;y++)v[y]=p||m?m?t.image[y].image:t.image[y]:s(t.image[y],i.maxCubemapSize);var x=v[0],b=c(x),_=o.convert(t.format),w=o.convert(t.type),E=h(_,w);for(g(e.TEXTURE_CUBE_MAP,t,b),y=0;6>y;y++)if(p)for(var M,T=v[y].mipmaps,S=0,A=T.length;S<A;S++)M=T[S],1023!==t.format&&1022!==t.format?-1<n.getCompressedTextureFormats().indexOf(_)?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,S,E,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,S,E,M.width,M.height,0,_,w,M.data);else m?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,E,v[y].width,v[y].height,0,_,w,v[y].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,E,_,w,v[y]);f.__maxMipLevel=p?T.length-1:0,l(t,b)&&u(e.TEXTURE_CUBE_MAP,t,x.width,x.height),f.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+p),n.bindTexture(e.TEXTURE_CUBE_MAP,f.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",f),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,h=c(t);if(s){i.__webglFramebuffer=[];for(var p=0;6>p;p++)i.__webglFramebuffer[p]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){for(n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),g(e.TEXTURE_CUBE_MAP,t.texture,h),p=0;6>p;p++)v(i.__webglFramebuffer[p],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+p);l(t.texture,h)&&u(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),g(e.TEXTURE_2D,t.texture,h),v(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),l(t.texture,h)&&u(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);if(t.depthBuffer){if(i=r.get(t),o=!0===t.isWebGLRenderTargetCube,t.depthTexture){if(o)throw Error("target.depthTexture not supported in Cube render targets");if(t&&t.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),!t.depthTexture||!t.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(r.get(t.depthTexture).__webglTexture&&t.depthTexture.image.width===t.width&&t.depthTexture.image.height===t.height||(t.depthTexture.image.width=t.width,t.depthTexture.image.height=t.height,t.depthTexture.needsUpdate=!0),m(t.depthTexture,0),i=r.get(t.depthTexture).__webglTexture,1026===t.depthTexture.format)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(1027!==t.depthTexture.format)throw Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}else if(o)for(i.__webglDepthbuffer=[],o=0;6>o;o++)e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),y(i.__webglDepthbuffer[o],t);else e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),y(i.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}},this.updateRenderTargetMipmap=function(t){var i=t.texture,o=c(t);if(l(i,o)){o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D;var a=r.get(i).__webglTexture;n.bindTexture(o,a),u(o,i,t.width,t.height),n.bindTexture(o,null)}}}function gt(e,t,n){return{convert:function(r){if(1e3===r)return e.REPEAT;if(1001===r)return e.CLAMP_TO_EDGE;if(1002===r)return e.MIRRORED_REPEAT;if(1003===r)return e.NEAREST;if(1004===r)return e.NEAREST_MIPMAP_NEAREST;if(1005===r)return e.NEAREST_MIPMAP_LINEAR;if(1006===r)return e.LINEAR;if(1007===r)return e.LINEAR_MIPMAP_NEAREST;if(1008===r)return e.LINEAR_MIPMAP_LINEAR;if(1009===r)return e.UNSIGNED_BYTE;if(1017===r)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===r)return e.UNSIGNED_SHORT_5_5_5_1;if(1019===r)return e.UNSIGNED_SHORT_5_6_5;if(1010===r)return e.BYTE;if(1011===r)return e.SHORT;if(1012===r)return e.UNSIGNED_SHORT;if(1013===r)return e.INT;if(1014===r)return e.UNSIGNED_INT;if(1015===r)return e.FLOAT;if(1016===r){if(n.isWebGL2)return e.HALF_FLOAT;var i=t.get("OES_texture_half_float");if(null!==i)return i.HALF_FLOAT_OES}if(1021===r)return e.ALPHA;if(1022===r)return e.RGB;if(1023===r)return e.RGBA;if(1024===r)return e.LUMINANCE;if(1025===r)return e.LUMINANCE_ALPHA;if(1026===r)return e.DEPTH_COMPONENT;if(1027===r)return e.DEPTH_STENCIL;if(100===r)return e.FUNC_ADD;if(101===r)return e.FUNC_SUBTRACT;if(102===r)return e.FUNC_REVERSE_SUBTRACT;if(200===r)return e.ZERO;if(201===r)return e.ONE;if(202===r)return e.SRC_COLOR;if(203===r)return e.ONE_MINUS_SRC_COLOR;if(204===r)return e.SRC_ALPHA;if(205===r)return e.ONE_MINUS_SRC_ALPHA;if(206===r)return e.DST_ALPHA;if(207===r)return e.ONE_MINUS_DST_ALPHA;if(208===r)return e.DST_COLOR;if(209===r)return e.ONE_MINUS_DST_COLOR;if(210===r)return e.SRC_ALPHA_SATURATE;if((33776===r||33777===r||33778===r||33779===r)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(33776===r)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===r)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===r)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===r)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===r||35841===r||35842===r||35843===r)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(35840===r)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===r)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===r)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===r)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===r&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((37808===r||37809===r||37810===r||37811===r||37812===r||37813===r||37814===r||37815===r||37816===r||37817===r||37818===r||37819===r||37820===r||37821===r)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return r;if(103===r||104===r){if(n.isWebGL2){if(103===r)return e.MIN;if(104===r)return e.MAX}if(null!==(i=t.get("EXT_blend_minmax"))){if(103===r)return i.MIN_EXT;if(104===r)return i.MAX_EXT}}if(1020===r){if(n.isWebGL2)return e.UNSIGNED_INT_24_8;if(null!==(i=t.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function vt(){w.call(this),this.type="Group"}function yt(e,t,n,r){E.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function xt(e){yt.call(this),this.cameras=e||[]}function bt(e){function t(){return null!==s&&!0===s.isPresenting}function n(){if(t()){var n=s.getEyeParameters("left"),i=n.renderWidth;n=n.renderHeight,E=e.getPixelRatio(),w=e.getSize(),e.setDrawingBufferSize(2*i,n,1),T.start()}else r.enabled&&e.setDrawingBufferSize(w.width,w.height,E),T.stop()}var r=this,s=null,c=null,u=null,h=[],p=new i,d=new i,f="stage";"undefined"!==typeof window&&"VRFrameData"in window&&(c=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",n,!1));var m=new i,g=new o,v=new a,x=new yt;x.bounds=new l(0,0,.5,1),x.layers.enable(1);var b=new yt;b.bounds=new l(.5,0,.5,1),b.layers.enable(2);var _=new xt([x,b]);_.layers.enable(1),_.layers.enable(2);var w,E,M=[];this.enabled=!1,this.getController=function(e){var t=h[e];return void 0===t&&(t=new vt,t.matrixAutoUpdate=!1,t.visible=!1,h[e]=t),t},this.getDevice=function(){return s},this.setDevice=function(e){void 0!==e&&(s=e),T.setContext(e)},this.setFrameOfReferenceType=function(e){f=e},this.setPoseTarget=function(e){void 0!==e&&(u=e)},this.getCamera=function(e){var t="stage"===f?1.6:0;if(null===s)return e.position.set(0,t,0),e;if(s.depthNear=e.near,s.depthFar=e.far,s.getFrameData(c),"stage"===f){var n=s.stageParameters;n?p.fromArray(n.sittingToStandingTransform):p.makeTranslation(0,t,0)}if(t=c.pose,n=null!==u?u:e,n.matrix.copy(p),n.matrix.decompose(n.position,n.quaternion,n.scale),null!==t.orientation&&(g.fromArray(t.orientation),n.quaternion.multiply(g)),null!==t.position&&(g.setFromRotationMatrix(p),v.fromArray(t.position),v.applyQuaternion(g),n.position.add(v)),n.updateMatrixWorld(),!1===s.isPresenting)return e;x.near=e.near,b.near=e.near,x.far=e.far,b.far=e.far,_.matrixWorld.copy(e.matrixWorld),_.matrixWorldInverse.copy(e.matrixWorldInverse),x.matrixWorldInverse.fromArray(c.leftViewMatrix),b.matrixWorldInverse.fromArray(c.rightViewMatrix),d.getInverse(p),"stage"===f&&(x.matrixWorldInverse.multiply(d),b.matrixWorldInverse.multiply(d)),e=n.parent,null!==e&&(m.getInverse(e.matrixWorld),x.matrixWorldInverse.multiply(m),b.matrixWorldInverse.multiply(m)),x.matrixWorld.getInverse(x.matrixWorldInverse),b.matrixWorld.getInverse(b.matrixWorldInverse),x.projectionMatrix.fromArray(c.leftProjectionMatrix),b.projectionMatrix.fromArray(c.rightProjectionMatrix),_.projectionMatrix.copy(x.projectionMatrix),e=s.getLayers(),e.length&&(e=e[0],null!==e.leftBounds&&4===e.leftBounds.length&&x.bounds.fromArray(e.leftBounds),null!==e.rightBounds&&4===e.rightBounds.length&&b.bounds.fromArray(e.rightBounds));e:for(e=0;e<h.length;e++){t=h[e];t:{n=e;for(var r=navigator.getGamepads&&navigator.getGamepads(),i=0,o=0,a=r.length;i<a;i++){var l=r[i];if(l&&("Daydream Controller"===l.id||"Gear VR Controller"===l.id||"Oculus Go Controller"===l.id||"OpenVR Gamepad"===l.id||l.id.startsWith("Oculus Touch")||l.id.startsWith("Spatial Controller"))){if(o===n){n=l;break t}o++}}n=void 0}if(void 0!==n&&void 0!==n.pose){if(null===n.pose)break e;r=n.pose,!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(p),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0,r="Daydream Controller"===n.id?0:1,M[e]!==n.buttons[r].pressed&&(M[e]=n.buttons[r].pressed,!0===M[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}return _},this.getStandingMatrix=function(){return p},this.isPresenting=t;var T=new y;this.setAnimationLoop=function(e){T.setAnimationLoop(e)},this.submitFrame=function(){t()&&s.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",n)}}function _t(t){function n(){return null!==c&&null!==u}function r(e){var t=d[f.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function i(){t.setFramebuffer(null),b.stop()}function o(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}var a=t.context,s=null,c=null,u=null,h="stage",p=null,d=[],f=[],m=new yt;m.layers.enable(1),m.viewport=new l;var g=new yt;g.layers.enable(2),g.viewport=new l;var v=new xt([m,g]);v.layers.enable(1),v.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=d[e];return void 0===t&&(t=new vt,t.matrixAutoUpdate=!1,t.visible=!1,d[e]=t),t},this.getDevice=function(){return s},this.setDevice=function(e){void 0!==e&&(s=e),e instanceof XRDevice&&a.setCompatibleXRDevice(e)},this.setFrameOfReferenceType=function(e){h=e},this.setSession=function(e){null!==(c=e)&&(c.addEventListener("select",r),c.addEventListener("selectstart",r),c.addEventListener("selectend",r),c.addEventListener("end",i),c.baseLayer=new XRWebGLLayer(c,a),c.requestFrameOfReference(h).then(function(e){u=e,t.setFramebuffer(c.baseLayer.framebuffer),b.setContext(c),b.start()}),f=c.getInputSources(),c.addEventListener("inputsourceschange",function(){f=c.getInputSources(),console.log(f)}))},this.getCamera=function(e){if(n()){var t=e.parent,r=v.cameras;o(v,t);for(var i=0;i<r.length;i++)o(r[i],t);for(e.matrixWorld.copy(v.matrixWorld),e=e.children,i=0,t=e.length;i<t;i++)e[i].updateMatrixWorld(!0);return v}return e},this.isPresenting=n;var x=null,b=new y;b.setAnimationLoop(function(e,t){if(null!==(p=t.getDevicePose(u)))for(var n=c.baseLayer,r=t.views,i=0;i<r.length;i++){var o=r[i],a=n.getViewport(o),s=p.getViewMatrix(o),l=v.cameras[i];l.matrix.fromArray(s).getInverse(l.matrix),l.projectionMatrix.fromArray(o.projectionMatrix),l.viewport.set(a.x,a.y,a.width,a.height),0===i&&(v.matrix.copy(l.matrix),v.projectionMatrix.copy(l.projectionMatrix))}for(i=0;i<d.length;i++)n=d[i],(r=f[i])&&null!==(r=t.getInputPose(r,u))?("targetRay"in r?n.matrix.elements=r.targetRay.transformMatrix:"pointerMatrix"in r&&(n.matrix.elements=r.pointerMatrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.visible=!0):n.visible=!1;x&&x(e)}),this.setAnimationLoop=function(e){x=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new e.Matrix4},this.submitFrame=function(){}}function wt(e){function t(){ve=new ee(ge),ye=new Q(ge,ve,e),ye.isWebGL2||(ve.get("WEBGL_depth_texture"),ve.get("OES_texture_float"),ve.get("OES_texture_half_float"),ve.get("OES_texture_half_float_linear"),ve.get("OES_standard_derivatives"),ve.get("OES_element_index_uint"),ve.get("ANGLE_instanced_arrays")),ve.get("OES_texture_float_linear"),Oe=new gt(ge,ve,ye),xe=new ft(ge,ve,Oe,ye),xe.scissor(W.copy(ce).multiplyScalar(ie)),xe.viewport(V.copy(se).multiplyScalar(ie)),be=new re(ge),_e=new nt,we=new mt(ge,ve,xe,_e,ye,Oe,be),Ee=new x(ge),Me=new te(ge,Ee,be),Te=new ae(Me,be),Le=new oe(ge),Se=new tt(N,ve,ye),Ae=new at,Ce=new ut,Re=new K(N,xe,Te,R),Pe=new J(ge,ve,be,ye),Ie=new ne(ge,ve,be,ye),be.programs=Se.programs,N.context=ge,N.capabilities=ye,N.extensions=ve,N.properties=_e,N.renderLists=Ae,N.state=xe,N.info=be}function n(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function r(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1,t()}function o(e){e=e.target,e.removeEventListener("dispose",o),s(e),_e.remove(e)}function s(e){var t=_e.get(e).program;e.program=void 0,void 0!==t&&Se.releaseProgram(t)}function c(e,t){e.render(function(e){N.renderBufferImmediate(e,t)})}function u(e,t,n){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isLight)O.pushLight(e),e.castShadow&&O.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||ue.intersectsSprite(e)){n&&me.setFromMatrixPosition(e.matrixWorld).applyMatrix4(fe);var r=Te.update(e),i=e.material;I.push(e,r,i,me.z,null)}}else if(e.isImmediateRenderObject)n&&me.setFromMatrixPosition(e.matrixWorld).applyMatrix4(fe),I.push(e,null,e.material,me.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||ue.intersectsObject(e)))if(n&&me.setFromMatrixPosition(e.matrixWorld).applyMatrix4(fe),r=Te.update(e),i=e.material,Array.isArray(i))for(var o=r.groups,a=0,s=o.length;a<s;a++){var c=o[a],l=i[c.materialIndex];l&&l.visible&&I.push(e,r,l,me.z,c)}else i.visible&&I.push(e,r,i,me.z,null);for(e=e.children,a=0,s=e.length;a<s;a++)u(e[a],t,n)}}function h(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,c=a.geometry,l=void 0===r?a.material:r;if(a=a.group,n.isArrayCamera){j=n;for(var u=n.cameras,h=0,p=u.length;h<p;h++){var f=u[h];if(s.layers.test(f.layers)){if("viewport"in f)xe.viewport(V.copy(f.viewport));else{var m=f.bounds;xe.viewport(V.set(m.x*Y,m.y*Z,m.z*Y,m.w*Z).multiplyScalar(ie))}O.setupLights(f),d(s,t,f,c,l,a)}}}else j=null,d(s,t,n,c,l,a)}}function d(e,t,n,r,i,o){if(e.onBeforeRender(N,t,n,r,i,o),O=Ce.get(t,j||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){xe.setMaterial(i);var a=m(n,t.fog,i,e);H=w=null,G=!1,c(e,a)}else N.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(N,t,n,r,i,o),O=Ce.get(t,j||n)}function f(e,t,n){var r=_e.get(e),i=O.state.lights,a=r.lightsHash,c=i.state.hash;n=Se.getParameters(e,i.state,O.state.shadowsArray,t,he.numPlanes,he.numIntersection,n);var l=Se.getProgramCode(e,n),u=r.program,h=!0;if(void 0===u)e.addEventListener("dispose",o);else if(u.code!==l)s(e);else{if(a.stateID!==c.stateID||a.directionalLength!==c.directionalLength||a.pointLength!==c.pointLength||a.spotLength!==c.spotLength||a.rectAreaLength!==c.rectAreaLength||a.hemiLength!==c.hemiLength||a.shadowsLength!==c.shadowsLength)a.stateID=c.stateID,a.directionalLength=c.directionalLength,a.pointLength=c.pointLength,a.spotLength=c.spotLength,a.rectAreaLength=c.rectAreaLength,a.hemiLength=c.hemiLength,a.shadowsLength=c.shadowsLength;else if(void 0!==n.shaderID)return;h=!1}if(h&&(n.shaderID?(l=co[n.shaderID],r.shader={name:e.type,uniforms:oo.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}):r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader},e.onBeforeCompile(r.shader,N),l=Se.getProgramCode(e,n),u=Se.acquireProgram(e,r.shader,n,l),r.program=u,e.program=u),n=u.getAttributes(),e.morphTargets)for(l=e.numSupportedMorphTargets=0;l<N.maxMorphTargets;l++)0<=n["morphTarget"+l]&&e.numSupportedMorphTargets++;if(e.morphNormals)for(l=e.numSupportedMorphNormals=0;l<N.maxMorphNormals;l++)0<=n["morphNormal"+l]&&e.numSupportedMorphNormals++;n=r.shader.uniforms,(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=he.numPlanes,r.numIntersection=he.numIntersection,n.clippingPlanes=he.uniform),r.fog=t,void 0===a&&(r.lightsHash=a={}),a.stateID=c.stateID,a.directionalLength=c.directionalLength,a.pointLength=c.pointLength,a.spotLength=c.spotLength,a.rectAreaLength=c.rectAreaLength,a.hemiLength=c.hemiLength,a.shadowsLength=c.shadowsLength,e.lights&&(n.ambientLightColor.value=i.state.ambient,n.directionalLights.value=i.state.directional,n.spotLights.value=i.state.spot,n.rectAreaLights.value=i.state.rectArea,n.pointLights.value=i.state.point,n.hemisphereLights.value=i.state.hemi,n.directionalShadowMap.value=i.state.directionalShadowMap,n.directionalShadowMatrix.value=i.state.directionalShadowMatrix,n.spotShadowMap.value=i.state.spotShadowMap,n.spotShadowMatrix.value=i.state.spotShadowMatrix,n.pointShadowMap.value=i.state.pointShadowMap,n.pointShadowMatrix.value=i.state.pointShadowMatrix),e=r.program.getUniforms(),e=He.seqWithValue(e.seq,n),r.uniformsList=e}function m(e,t,n,r){q=0;var i=_e.get(n),o=i.lightsHash,a=O.state.lights.state.hash;pe&&(de||e!==z)&&he.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,e===z&&n.id===k),!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:!n.lights||o.stateID===a.stateID&&o.directionalLength===a.directionalLength&&o.pointLength===a.pointLength&&o.spotLength===a.spotLength&&o.rectAreaLength===a.rectAreaLength&&o.hemiLength===a.hemiLength&&o.shadowsLength===a.shadowsLength?void 0===i.numClippingPlanes||i.numClippingPlanes===he.numPlanes&&i.numIntersection===he.numIntersection||(n.needsUpdate=!0):n.needsUpdate=!0),n.needsUpdate&&(f(n,t,r),n.needsUpdate=!1);var s=!1,c=!1,l=!1;o=i.program,a=o.getUniforms();var u=i.shader.uniforms;if(xe.useProgram(o.program)&&(l=c=s=!0),n.id!==k&&(k=n.id,c=!0),(s||z!==e)&&(a.setValue(ge,"projectionMatrix",e.projectionMatrix),ye.logarithmicDepthBuffer&&a.setValue(ge,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),z!==e&&(z=e,l=c=!0),(n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap)&&void 0!==(s=a.map.cameraPosition)&&s.setValue(ge,me.setFromMatrixPosition(e.matrixWorld)),(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&a.setValue(ge,"viewMatrix",e.matrixWorldInverse)),n.skinning&&(a.setOptional(ge,r,"bindMatrix"),a.setOptional(ge,r,"bindMatrixInverse"),e=r.skeleton))if(s=e.bones,ye.floatVertexTextures){if(void 0===e.boneTexture){s=Math.sqrt(4*s.length),s=to.ceilPowerOfTwo(s),s=Math.max(s,4);var h=new Float32Array(s*s*4);h.set(e.boneMatrices);var d=new p(h,s,s,1023,1015);d.needsUpdate=!0,e.boneMatrices=h,e.boneTexture=d,e.boneTextureSize=s}a.setValue(ge,"boneTexture",e.boneTexture),a.setValue(ge,"boneTextureSize",e.boneTextureSize)}else a.setOptional(ge,e,"boneMatrices");return c&&(a.setValue(ge,"toneMappingExposure",N.toneMappingExposure),a.setValue(ge,"toneMappingWhitePoint",N.toneMappingWhitePoint),n.lights&&(c=l,u.ambientLightColor.needsUpdate=c,u.directionalLights.needsUpdate=c,u.pointLights.needsUpdate=c,u.spotLights.needsUpdate=c,u.rectAreaLights.needsUpdate=c,u.hemisphereLights.needsUpdate=c),t&&n.fog&&(u.fogColor.value=t.color,t.isFog?(u.fogNear.value=t.near,u.fogFar.value=t.far):t.isFogExp2&&(u.fogDensity.value=t.density)),n.isMeshBasicMaterial?v(u,n):n.isMeshLambertMaterial?(v(u,n),n.emissiveMap&&(u.emissiveMap.value=n.emissiveMap)):n.isMeshPhongMaterial?(v(u,n),n.isMeshToonMaterial?(b(u,n),n.gradientMap&&(u.gradientMap.value=n.gradientMap)):b(u,n)):n.isMeshStandardMaterial?(v(u,n),n.isMeshPhysicalMaterial?(_(u,n),u.reflectivity.value=n.reflectivity,u.clearCoat.value=n.clearCoat,u.clearCoatRoughness.value=n.clearCoatRoughness):_(u,n)):n.isMeshDepthMaterial?(v(u,n),n.displacementMap&&(u.displacementMap.value=n.displacementMap,u.displacementScale.value=n.displacementScale,u.displacementBias.value=n.displacementBias)):n.isMeshDistanceMaterial?(v(u,n),n.displacementMap&&(u.displacementMap.value=n.displacementMap,u.displacementScale.value=n.displacementScale,u.displacementBias.value=n.displacementBias),u.referencePosition.value.copy(n.referencePosition),u.nearDistance.value=n.nearDistance,u.farDistance.value=n.farDistance):n.isMeshNormalMaterial?(v(u,n),n.bumpMap&&(u.bumpMap.value=n.bumpMap,u.bumpScale.value=n.bumpScale,1===n.side&&(u.bumpScale.value*=-1)),n.normalMap&&(u.normalMap.value=n.normalMap,u.normalScale.value.copy(n.normalScale),1===n.side&&u.normalScale.value.negate()),n.displacementMap&&(u.displacementMap.value=n.displacementMap,u.displacementScale.value=n.displacementScale,u.displacementBias.value=n.displacementBias)):n.isLineBasicMaterial?(u.diffuse.value=n.color,u.opacity.value=n.opacity,n.isLineDashedMaterial&&(u.dashSize.value=n.dashSize,u.totalSize.value=n.dashSize+n.gapSize,u.scale.value=n.scale)):n.isPointsMaterial?(u.diffuse.value=n.color,u.opacity.value=n.opacity,u.size.value=n.size*ie,u.scale.value=.5*Z,u.map.value=n.map,null!==n.map&&(!0===n.map.matrixAutoUpdate&&n.map.updateMatrix(),u.uvTransform.value.copy(n.map.matrix))):n.isSpriteMaterial?(u.diffuse.value=n.color,u.opacity.value=n.opacity,u.rotation.value=n.rotation,u.map.value=n.map,null!==n.map&&(!0===n.map.matrixAutoUpdate&&n.map.updateMatrix(),u.uvTransform.value.copy(n.map.matrix))):n.isShadowMaterial&&(u.color.value=n.color,u.opacity.value=n.opacity),void 0!==u.ltc_1&&(u.ltc_1.value=so.LTC_1),void 0!==u.ltc_2&&(u.ltc_2.value=so.LTC_2),He.upload(ge,i.uniformsList,u,N)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(He.upload(ge,i.uniformsList,u,N),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&a.setValue(ge,"center",r.center),a.setValue(ge,"modelViewMatrix",r.modelViewMatrix),a.setValue(ge,"normalMatrix",r.normalMatrix),a.setValue(ge,"modelMatrix",r.matrixWorld),o}function v(e,t){if(e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=_e.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map)var n=t.map;else t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap);void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function b(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function _(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}var w;console.log("THREE.WebGLRenderer","96"),e=e||{};var E=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),M=void 0!==e.context?e.context:null,T=void 0!==e.alpha&&e.alpha,S=void 0===e.depth||e.depth,A=void 0===e.stencil||e.stencil,C=void 0!==e.antialias&&e.antialias,R=void 0===e.premultipliedAlpha||e.premultipliedAlpha,L=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,P=void 0!==e.powerPreference?e.powerPreference:"default",I=null,O=null;this.domElement=E,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var N=this,D=!1,U=null,F=null,B=null,k=-1,H=w=null,G=!1,z=null,j=null,V=new l,W=new l,X=null,q=0,Y=E.width,Z=E.height,ie=1,se=new l(0,0,Y,Z),ce=new l(0,0,Y,Z),le=!1,ue=new g,he=new $,pe=!1,de=!1,fe=new i,me=new a;try{T={alpha:T,depth:S,stencil:A,antialias:C,premultipliedAlpha:R,preserveDrawingBuffer:L,powerPreference:P},E.addEventListener("webglcontextlost",n,!1),E.addEventListener("webglcontextrestored",r,!1);var ge=M||E.getContext("webgl",T)||E.getContext("experimental-webgl",T);if(null===ge){if(null!==E.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===ge.getShaderPrecisionFormat&&(ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}var ve,ye,xe,be,_e,we,Ee,Me,Te,Se,Ae,Ce,Re,Le,Pe,Ie,Oe;t();var Ne="xr"in navigator?new _t(N):new bt(N);this.vr=Ne;var De=new dt(N,Te,ye.maxTextureSize);this.shadowMap=De,this.getContext=function(){return ge},this.getContextAttributes=function(){return ge.getContextAttributes()},this.forceContextLoss=function(){var e=ve.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=ve.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ie},this.setPixelRatio=function(e){void 0!==e&&(ie=e,this.setSize(Y,Z,!1))},this.getSize=function(){return{width:Y,height:Z}},this.setSize=function(e,t,n){Ne.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Y=e,Z=t,E.width=e*ie,E.height=t*ie,!1!==n&&(E.style.width=e+"px",E.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(){return{width:Y*ie,height:Z*ie}},this.setDrawingBufferSize=function(e,t,n){Y=e,Z=t,ie=n,E.width=e*n,E.height=t*n,this.setViewport(0,0,e,t)},this.getCurrentViewport=function(){return V},this.setViewport=function(e,t,n,r){se.set(e,Z-t-r,n,r),xe.viewport(V.copy(se).multiplyScalar(ie))},this.setScissor=function(e,t,n,r){ce.set(e,Z-t-r,n,r),xe.scissor(W.copy(ce).multiplyScalar(ie))},this.setScissorTest=function(e){xe.setScissorTest(le=e)},this.getClearColor=function(){return Re.getClearColor()},this.setClearColor=function(){Re.setClearColor.apply(Re,arguments)},this.getClearAlpha=function(){return Re.getClearAlpha()},this.setClearAlpha=function(){Re.setClearAlpha.apply(Re,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=ge.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=ge.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=ge.STENCIL_BUFFER_BIT),ge.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.dispose=function(){E.removeEventListener("webglcontextlost",n,!1),E.removeEventListener("webglcontextrestored",r,!1),Ae.dispose(),Ce.dispose(),_e.dispose(),Te.dispose(),Ne.dispose(),Fe.stop()},this.renderBufferImmediate=function(e,t){xe.initAttributes();var n=_e.get(e);e.hasPositions&&!n.position&&(n.position=ge.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ge.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ge.createBuffer()),e.hasColors&&!n.color&&(n.color=ge.createBuffer()),t=t.getAttributes(),e.hasPositions&&(ge.bindBuffer(ge.ARRAY_BUFFER,n.position),ge.bufferData(ge.ARRAY_BUFFER,e.positionArray,ge.DYNAMIC_DRAW),xe.enableAttribute(t.position),ge.vertexAttribPointer(t.position,3,ge.FLOAT,!1,0,0)),e.hasNormals&&(ge.bindBuffer(ge.ARRAY_BUFFER,n.normal),ge.bufferData(ge.ARRAY_BUFFER,e.normalArray,ge.DYNAMIC_DRAW),xe.enableAttribute(t.normal),ge.vertexAttribPointer(t.normal,3,ge.FLOAT,!1,0,0)),e.hasUvs&&(ge.bindBuffer(ge.ARRAY_BUFFER,n.uv),ge.bufferData(ge.ARRAY_BUFFER,e.uvArray,ge.DYNAMIC_DRAW),xe.enableAttribute(t.uv),ge.vertexAttribPointer(t.uv,2,ge.FLOAT,!1,0,0)),e.hasColors&&(ge.bindBuffer(ge.ARRAY_BUFFER,n.color),ge.bufferData(ge.ARRAY_BUFFER,e.colorArray,ge.DYNAMIC_DRAW),xe.enableAttribute(t.color),ge.vertexAttribPointer(t.color,3,ge.FLOAT,!1,0,0)),xe.disableUnusedAttributes(),ge.drawArrays(ge.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){var a=i.isMesh&&0>i.normalMatrix.determinant();xe.setMaterial(r,a);var s=m(e,t,r,i),c=!1;w===n.id&&H===s.id&&G===(!0===r.wireframe)||(w=n.id,H=s.id,G=!0===r.wireframe,c=!0),i.morphTargetInfluences&&(Le.update(i,n,r,s),c=!0),a=n.index;var l=n.attributes.position;if(t=1,!0===r.wireframe&&(a=Me.getWireframeAttribute(n),t=2),e=Pe,null!==a){var u=Ee.get(a);e=Ie,e.setIndex(u)}if(c){if(n&&n.isInstancedBufferGeometry&!ye.isWebGL2&&null===ve.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{xe.initAttributes(),c=n.attributes,s=s.getAttributes();var h=r.defaultAttributeValues;for(E in s){var p=s[E];if(0<=p){var d=c[E];if(void 0!==d){var f=d.normalized,g=d.itemSize,v=Ee.get(d);if(void 0!==v){var y=v.buffer,x=v.type;if(v=v.bytesPerElement,d.isInterleavedBufferAttribute){var b=d.data,_=b.stride;d=d.offset,b&&b.isInstancedInterleavedBuffer?(xe.enableAttributeAndDivisor(p,b.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=b.meshPerAttribute*b.count)):xe.enableAttribute(p),ge.bindBuffer(ge.ARRAY_BUFFER,y),ge.vertexAttribPointer(p,g,x,f,_*v,d*v)}else d.isInstancedBufferAttribute?(xe.enableAttributeAndDivisor(p,d.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=d.meshPerAttribute*d.count)):xe.enableAttribute(p),ge.bindBuffer(ge.ARRAY_BUFFER,y),ge.vertexAttribPointer(p,g,x,f,0,0)}}else if(void 0!==h&&void 0!==(f=h[E]))switch(f.length){case 2:ge.vertexAttrib2fv(p,f);break;case 3:ge.vertexAttrib3fv(p,f);break;case 4:ge.vertexAttrib4fv(p,f);break;default:ge.vertexAttrib1fv(p,f)}}}xe.disableUnusedAttributes()}null!==a&&ge.bindBuffer(ge.ELEMENT_ARRAY_BUFFER,u.buffer)}u=1/0,null!==a?u=a.count:void 0!==l&&(u=l.count),a=n.drawRange.start*t,l=null!==o?o.start*t:0;var E=Math.max(a,l);if(0!==(o=Math.max(0,Math.min(u,a+n.drawRange.count*t,l+(null!==o?o.count*t:1/0))-1-E+1))){if(i.isMesh)if(!0===r.wireframe)xe.setLineWidth(r.wireframeLinewidth*(null===F?ie:1)),e.setMode(ge.LINES);else switch(i.drawMode){case 0:e.setMode(ge.TRIANGLES);break;case 1:e.setMode(ge.TRIANGLE_STRIP);break;case 2:e.setMode(ge.TRIANGLE_FAN)}else i.isLine?(r=r.linewidth,void 0===r&&(r=1),xe.setLineWidth(r*(null===F?ie:1)),i.isLineSegments?e.setMode(ge.LINES):i.isLineLoop?e.setMode(ge.LINE_LOOP):e.setMode(ge.LINE_STRIP)):i.isPoints?e.setMode(ge.POINTS):i.isSprite&&e.setMode(ge.TRIANGLES);n&&n.isInstancedBufferGeometry?0<n.maxInstancedCount&&e.renderInstances(n,E,o):e.render(E,o)}},this.compile=function(e,t){O=Ce.get(e,t),O.init(),e.traverse(function(e){e.isLight&&(O.pushLight(e),e.castShadow&&O.pushShadow(e))}),O.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)f(t.material[n],e.fog,t);else f(t.material,e.fog,t)})};var Ue=null,Fe=new y;Fe.setAnimationLoop(function(e){Ne.isPresenting()||Ue&&Ue(e)}),"undefined"!==typeof window&&Fe.setContext(window),this.setAnimationLoop=function(e){Ue=e,Ne.setAnimationLoop(e),Fe.start()},this.render=function(e,t,n,r){if(t&&t.isCamera){if(!D){H=w=null,G=!1,k=-1,z=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Ne.enabled&&(t=Ne.getCamera(t)),O=Ce.get(e,t),O.init(),e.onBeforeRender(N,e,t,n),fe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ue.setFromMatrix(fe),de=this.localClippingEnabled,pe=he.init(this.clippingPlanes,de,t),I=Ae.get(e,t),I.init(),u(e,t,N.sortObjects),!0===N.sortObjects&&I.sort(),pe&&he.beginShadows(),De.render(O.state.shadowsArray,e,t),O.setupLights(t),pe&&he.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),Re.render(I,e,t,r),r=I.opaque;var i=I.transparent;if(e.overrideMaterial){var o=e.overrideMaterial;r.length&&h(r,e,t,o),i.length&&h(i,e,t,o)}else r.length&&h(r,e,t),i.length&&h(i,e,t);n&&we.updateRenderTargetMipmap(n),xe.buffers.depth.setTest(!0),xe.buffers.depth.setMask(!0),xe.buffers.color.setMask(!0),xe.setPolygonOffset(!1),e.onAfterRender(N,e,t),Ne.enabled&&Ne.submitFrame(),O=I=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=q;return e>=ye.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+ye.maxTextures),q+=1,e},this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),we.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),we.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?we.setTextureCube(t,n):we.setTextureCubeDynamic(t,n)}}(),this.setFramebuffer=function(e){U=e},this.getRenderTarget=function(){return F},this.setRenderTarget=function(e){(F=e)&&void 0===_e.get(e).__webglFramebuffer&&we.setupRenderTarget(e);var t=U,n=!1;e?(t=_e.get(e).__webglFramebuffer,e.isWebGLRenderTargetCube&&(t=t[e.activeCubeFace],n=!0),V.copy(e.viewport),W.copy(e.scissor),X=e.scissorTest):(V.copy(se).multiplyScalar(ie),W.copy(ce).multiplyScalar(ie),X=le),B!==t&&(ge.bindFramebuffer(ge.FRAMEBUFFER,t),B=t),xe.viewport(V),xe.scissor(W),xe.setScissorTest(X),n&&(n=_e.get(e.texture),ge.framebufferTexture2D(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,ge.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,n.__webglTexture,e.activeMipMapLevel))},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(e&&e.isWebGLRenderTarget){var a=_e.get(e).__webglFramebuffer;if(a){var s=!1;a!==B&&(ge.bindFramebuffer(ge.FRAMEBUFFER,a),s=!0);try{var c=e.texture,l=c.format,u=c.type;1023!==l&&Oe.convert(l)!==ge.getParameter(ge.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===u||Oe.convert(u)===ge.getParameter(ge.IMPLEMENTATION_COLOR_READ_TYPE)||1015===u&&(ye.isWebGL2||ve.get("OES_texture_float")||ve.get("WEBGL_color_buffer_float"))||1016===u&&(ye.isWebGL2?ve.get("EXT_color_buffer_float"):ve.get("EXT_color_buffer_half_float"))?ge.checkFramebufferStatus(ge.FRAMEBUFFER)===ge.FRAMEBUFFER_COMPLETE?0<=t&&t<=e.width-r&&0<=n&&n<=e.height-i&&ge.readPixels(t,n,r,i,Oe.convert(l),Oe.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{s&&ge.bindFramebuffer(ge.FRAMEBUFFER,B)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,o=Oe.convert(t.format);this.setTexture2D(t,0),ge.copyTexImage2D(ge.TEXTURE_2D,n||0,o,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=Oe.convert(n.format),s=Oe.convert(n.type);this.setTexture2D(n,0),t.isDataTexture?ge.texSubImage2D(ge.TEXTURE_2D,r||0,e.x,e.y,i,o,a,s,t.image.data):ge.texSubImage2D(ge.TEXTURE_2D,r||0,e.x,e.y,a,s,t.image)}}function Et(e,t){this.name="",this.color=new v(e),this.density=void 0!==t?t:25e-5}function Mt(e,t,n){this.name="",this.color=new v(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Tt(){w.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function St(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function At(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Ct(e){V.call(this),this.type="SpriteMaterial",this.color=new v(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function Rt(e){if(w.call(this),this.type="Sprite",void 0===Mo){Mo=new k;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);t=new St(t,5),Mo.setIndex([0,1,2,0,2,3]),Mo.addAttribute("position",new At(t,3,0,!1)),Mo.addAttribute("uv",new At(t,2,3,!1))}this.geometry=Mo,this.material=void 0!==e?e:new Ct,this.center=new r(.5,.5)}function Lt(){w.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Pt(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new i)}function It(){w.call(this),this.type="Bone"}function Ot(e,t){Z.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new i,this.bindMatrixInverse=new i,e=this.initBones(),e=new Pt(e),this.bind(e,this.matrixWorld),this.normalizeSkinWeights()}function Nt(e){V.call(this),this.type="LineBasicMaterial",this.color=new v(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(e)}function Dt(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),w.call(this),this.type="Line",this.geometry=void 0!==e?e:new k,this.material=void 0!==t?t:new Nt({color:16777215*Math.random()})}function Ut(e,t){Dt.call(this,e,t),this.type="LineSegments"}function Ft(e,t){Dt.call(this,e,t),this.type="LineLoop"}function Bt(e){V.call(this),this.type="PointsMaterial",this.color=new v(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=this.morphTargets=!1,this.setValues(e)}function kt(e,t){w.call(this),this.type="Points",this.geometry=void 0!==e?e:new k,this.material=void 0!==t?t:new Bt({color:16777215*Math.random()})}function Ht(e,t,n,r,i,o,a,s,l){c.call(this,e,t,n,r,i,o,a,s,l),this.generateMipmaps=!1}function Gt(e,t,n,r,i,o,a,s,l,u,h,p){c.call(this,null,o,a,s,l,u,r,i,h,p),this.image={width:t,height:n},this.mipmaps=e,this.generateMipmaps=this.flipY=!1}function zt(e,t,n,r,i,o,a,s,l){c.call(this,e,t,n,r,i,o,a,s,l),this.needsUpdate=!0}function jt(e,t,n,r,i,o,a,s,l,u){if(1026!==(u=void 0!==u?u:1026)&&1027!==u)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===u&&(n=1012),void 0===n&&1027===u&&(n=1020),c.call(this,null,r,i,o,a,s,u,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==s?s:1003,this.generateMipmaps=this.flipY=!1}function Vt(e){k.call(this),this.type="WireframeGeometry";var t,n,r,i=[],o=[0,0],s={},c=["a","b","c"];if(e&&e.isGeometry){var l=e.faces,u=0;for(n=l.length;u<n;u++){var h=l[u];for(t=0;3>t;t++){var p=h[c[t]],d=h[c[(t+1)%3]];o[0]=Math.min(p,d),o[1]=Math.max(p,d),p=o[0]+","+o[1],void 0===s[p]&&(s[p]={index1:o[0],index2:o[1]})}}for(p in s)u=s[p],c=e.vertices[u.index1],i.push(c.x,c.y,c.z),c=e.vertices[u.index2],i.push(c.x,c.y,c.z)}else if(e&&e.isBufferGeometry)if(c=new a,null!==e.index){l=e.attributes.position,h=e.index;var f=e.groups;for(0===f.length&&(f=[{start:0,count:h.count,materialIndex:0}]),e=0,r=f.length;e<r;++e)for(u=f[e],t=u.start,n=u.count,u=t,n=t+n;u<n;u+=3)for(t=0;3>t;t++)p=h.getX(u+t),d=h.getX(u+(t+1)%3),o[0]=Math.min(p,d),o[1]=Math.max(p,d),p=o[0]+","+o[1],void 0===s[p]&&(s[p]={index1:o[0],index2:o[1]});for(p in s)u=s[p],c.fromBufferAttribute(l,u.index1),i.push(c.x,c.y,c.z),c.fromBufferAttribute(l,u.index2),i.push(c.x,c.y,c.z)}else for(l=e.attributes.position,u=0,n=l.count/3;u<n;u++)for(t=0;3>t;t++)s=3*u+t,c.fromBufferAttribute(l,s),i.push(c.x,c.y,c.z),s=3*u+(t+1)%3,c.fromBufferAttribute(l,s),i.push(c.x,c.y,c.z);this.addAttribute("position",new D(i,3))}function Wt(e,t,n){S.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Xt(e,t,n)),this.mergeVertices()}function Xt(e,t,n){k.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],s=[],c=[],l=[],u=new a,h=new a,p=new a,d=new a,f=new a;3>e.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(r=0;r<=n;r++){var g=r/n;for(i=0;i<=t;i++){var v=i/t;e(v,g,h),s.push(h.x,h.y,h.z),0<=v-1e-5?(e(v-1e-5,g,p),d.subVectors(h,p)):(e(v+1e-5,g,p),d.subVectors(p,h)),0<=g-1e-5?(e(v,g-1e-5,p),f.subVectors(h,p)):(e(v,g+1e-5,p),f.subVectors(p,h)),u.crossVectors(d,f).normalize(),c.push(u.x,u.y,u.z),l.push(v,g)}}for(r=0;r<n;r++)for(i=0;i<t;i++)e=r*m+i+1,u=(r+1)*m+i+1,h=(r+1)*m+i,o.push(r*m+i,e,h),o.push(e,u,h);this.setIndex(o),this.addAttribute("position",new D(s,3)),this.addAttribute("normal",new D(c,3)),this.addAttribute("uv",new D(l,2))}function qt(e,t,n,r){S.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Yt(e,t,n,r)),this.mergeVertices()}function Yt(e,t,n,i){function o(e){l.push(e.x,e.y,e.z)}function s(t,n){t*=3,n.x=e[t+0],n.y=e[t+1],n.z=e[t+2]}function c(e,t,n,r){0>r&&1===e.x&&(u[t]=e.x-1),0===n.x&&0===n.z&&(u[t]=r/2/Math.PI+.5)}k.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1,i=i||0;var l=[],u=[];!function(e){for(var n=new a,r=new a,i=new a,c=0;c<t.length;c+=3){s(t[c+0],n),s(t[c+1],r),s(t[c+2],i);var l,u,h=n,p=r,d=i,f=Math.pow(2,e),m=[];for(u=0;u<=f;u++){m[u]=[];var g=h.clone().lerp(d,u/f),v=p.clone().lerp(d,u/f),y=f-u;for(l=0;l<=y;l++)m[u][l]=0===l&&u===f?g:g.clone().lerp(v,l/y)}for(u=0;u<f;u++)for(l=0;l<2*(f-u)-1;l++)h=Math.floor(l/2),0===l%2?(o(m[u][h+1]),o(m[u+1][h]),o(m[u][h])):(o(m[u][h+1]),o(m[u+1][h+1]),o(m[u+1][h]))}}(i),function(e){for(var t=new a,n=0;n<l.length;n+=3)t.x=l[n+0],t.y=l[n+1],t.z=l[n+2],t.normalize().multiplyScalar(e),l[n+0]=t.x,l[n+1]=t.y,l[n+2]=t.z}(n),function(){for(var e=new a,t=0;t<l.length;t+=3)e.x=l[t+0],e.y=l[t+1],e.z=l[t+2],u.push(Math.atan2(e.z,-e.x)/2/Math.PI+.5,1-(Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5));e=new a,t=new a;for(var n=new a,i=new a,o=new r,s=new r,h=new r,p=0,d=0;p<l.length;p+=9,d+=6){e.set(l[p+0],l[p+1],l[p+2]),t.set(l[p+3],l[p+4],l[p+5]),n.set(l[p+6],l[p+7],l[p+8]),o.set(u[d+0],u[d+1]),s.set(u[d+2],u[d+3]),h.set(u[d+4],u[d+5]),i.copy(e).add(t).add(n).divideScalar(3);var f=Math.atan2(i.z,-i.x);c(o,d+0,e,f),c(s,d+2,t,f),c(h,d+4,n,f)}for(e=0;e<u.length;e+=6)t=u[e+0],n=u[e+2],i=u[e+4],o=Math.min(t,n,i),.9<Math.max(t,n,i)&&.1>o&&(.2>t&&(u[e+0]+=1),.2>n&&(u[e+2]+=1),.2>i&&(u[e+4]+=1))}(),this.addAttribute("position",new D(l,3)),this.addAttribute("normal",new D(l.slice(),3)),this.addAttribute("uv",new D(u,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Zt(e,t){S.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Kt(e,t)),this.mergeVertices()}function Kt(e,t){Yt.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Jt(e,t){S.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Qt(e,t)),this.mergeVertices()}function Qt(e,t){Yt.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function $t(e,t){S.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new en(e,t)),this.mergeVertices()}function en(e,t){var n=(1+Math.sqrt(5))/2;Yt.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function tn(e,t){S.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new nn(e,t)),this.mergeVertices()}function nn(e,t){var n=(1+Math.sqrt(5))/2,r=1/n;Yt.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function rn(e,t,n,r,i,o){S.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed."),e=new on(e,t,n,r,i),this.tangents=e.tangents,this.normals=e.normals,this.binormals=e.binormals,this.fromBufferGeometry(e),this.mergeVertices()}function on(e,t,n,i,o){function s(r){f=e.getPointAt(r/t,f);var o=c.normals[r];for(r=c.binormals[r],u=0;u<=i;u++){var a=u/i*Math.PI*2,s=Math.sin(a);a=-Math.cos(a),p.x=a*o.x+s*r.x,p.y=a*o.y+s*r.y,p.z=a*o.z+s*r.z,p.normalize(),g.push(p.x,p.y,p.z),h.x=f.x+n*p.x,h.y=f.y+n*p.y,h.z=f.z+n*p.z,m.push(h.x,h.y,h.z)}}k.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:o},t=t||64,n=n||1,i=i||8,o=o||!1;var c=e.computeFrenetFrames(t,o);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;var l,u,h=new a,p=new a,d=new r,f=new a,m=[],g=[],v=[],y=[];for(l=0;l<t;l++)s(l);for(s(!1===o?t:0),l=0;l<=t;l++)for(u=0;u<=i;u++)d.x=l/t,d.y=u/i,v.push(d.x,d.y);!function(){for(u=1;u<=t;u++)for(l=1;l<=i;l++){var e=(i+1)*u+(l-1),n=(i+1)*u+l,r=(i+1)*(u-1)+l;y.push((i+1)*(u-1)+(l-1),e,r),y.push(e,n,r)}}(),this.setIndex(y),this.addAttribute("position",new D(m,3)),this.addAttribute("normal",new D(g,3)),this.addAttribute("uv",new D(v,2))}function an(e,t,n,r,i,o,a){S.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new sn(e,t,n,r,i,o)),this.mergeVertices()}function sn(e,t,n,r,i,o){function s(e,t,n,r,i){var o=Math.sin(e);t=n/t*e,n=Math.cos(t),i.x=r*(2+n)*.5*Math.cos(e),i.y=r*(2+n)*o*.5,i.z=r*Math.sin(t)*.5}k.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var c,l=[],u=[],h=[],p=[],d=new a,f=new a,m=new a,g=new a,v=new a,y=new a,x=new a;for(c=0;c<=n;++c){var b=c/n*i*Math.PI*2;for(s(b,i,o,e,m),s(b+.01,i,o,e,g),y.subVectors(g,m),x.addVectors(g,m),v.crossVectors(y,x),x.crossVectors(v,y),v.normalize(),x.normalize(),b=0;b<=r;++b){var _=b/r*Math.PI*2,w=-t*Math.cos(_);_=t*Math.sin(_),d.x=m.x+(w*x.x+_*v.x),d.y=m.y+(w*x.y+_*v.y),d.z=m.z+(w*x.z+_*v.z),u.push(d.x,d.y,d.z),f.subVectors(d,m).normalize(),h.push(f.x,f.y,f.z),p.push(c/n),p.push(b/r)}}for(b=1;b<=n;b++)for(c=1;c<=r;c++)e=(r+1)*b+(c-1),t=(r+1)*b+c,i=(r+1)*(b-1)+c,l.push((r+1)*(b-1)+(c-1),e,i),l.push(e,t,i);this.setIndex(l),this.addAttribute("position",new D(u,3)),this.addAttribute("normal",new D(h,3)),this.addAttribute("uv",new D(p,2))}function cn(e,t,n,r,i){S.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new ln(e,t,n,r,i)),this.mergeVertices()}function ln(e,t,n,r,i){k.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,s,c=[],l=[],u=[],h=[],p=new a,d=new a,f=new a;for(o=0;o<=n;o++)for(s=0;s<=r;s++){var m=s/r*i,g=o/n*Math.PI*2;d.x=(e+t*Math.cos(g))*Math.cos(m),d.y=(e+t*Math.cos(g))*Math.sin(m),d.z=t*Math.sin(g),l.push(d.x,d.y,d.z),p.x=e*Math.cos(m),p.y=e*Math.sin(m),f.subVectors(d,p).normalize(),u.push(f.x,f.y,f.z),h.push(s/r),h.push(o/n)}for(o=1;o<=n;o++)for(s=1;s<=r;s++)e=(r+1)*(o-1)+s-1,t=(r+1)*(o-1)+s,i=(r+1)*o+s,c.push((r+1)*o+s-1,e,i),c.push(e,t,i);this.setIndex(c),this.addAttribute("position",new D(l,3)),this.addAttribute("normal",new D(u,3)),this.addAttribute("uv",new D(h,2))}function un(e,t,n,r,i){for(var o,a=0,s=t,c=n-r;s<n;s+=r)a+=(e[c]-e[s])*(e[s+1]+e[c+1]),c=s;if(i===0<a)for(i=t;i<n;i+=r)o=En(i,e[i],e[i+1],o);else for(i=n-r;i>=t;i-=r)o=En(i,e[i],e[i+1],o);return o&&xn(o,o.next)&&(Mn(o),o=o.next),o}function hn(e,t){if(!e)return e;t||(t=e);do{var n=!1;if(e.steiner||!xn(e,e.next)&&0!==yn(e.prev,e,e.next))e=e.next;else{if(Mn(e),(e=t=e.prev)===e.next)break;n=!0}}while(n||e!==t);return t}function pn(e,t,n,r,i,o,a){if(e){if(!a&&o){var s=e,c=s;do{null===c.z&&(c.z=mn(c.x,c.y,r,i,o)),c.prevZ=c.prev,c=c.nextZ=c.next}while(c!==s);c.prevZ.nextZ=null,c.prevZ=null,s=c;var l,u,h,p,d=1;do{c=s;var f=s=null;for(u=0;c;){u++;var m=c;for(l=h=0;l<d&&(h++,m=m.nextZ);l++);for(p=d;0<h||0<p&&m;)0!==h&&(0===p||!m||c.z<=m.z)?(l=c,c=c.nextZ,h--):(l=m,m=m.nextZ,p--),f?f.nextZ=l:s=l,l.prevZ=f,f=l;c=m}f.nextZ=null,d*=2}while(1<u)}for(s=e;e.prev!==e.next;){if(c=e.prev,m=e.next,o)e:{f=e,p=r;var g=i,v=o;if(u=f.prev,h=f,d=f.next,0<=yn(u,h,d))f=!1;else{var y=u.x>h.x?u.x>d.x?u.x:d.x:h.x>d.x?h.x:d.x,x=u.y>h.y?u.y>d.y?u.y:d.y:h.y>d.y?h.y:d.y;for(l=mn(u.x<h.x?u.x<d.x?u.x:d.x:h.x<d.x?h.x:d.x,u.y<h.y?u.y<d.y?u.y:d.y:h.y<d.y?h.y:d.y,p,g,v),p=mn(y,x,p,g,v),g=f.nextZ;g&&g.z<=p;){if(g!==f.prev&&g!==f.next&&vn(u.x,u.y,h.x,h.y,d.x,d.y,g.x,g.y)&&0<=yn(g.prev,g,g.next)){f=!1;break e}g=g.nextZ}for(g=f.prevZ;g&&g.z>=l;){if(g!==f.prev&&g!==f.next&&vn(u.x,u.y,h.x,h.y,d.x,d.y,g.x,g.y)&&0<=yn(g.prev,g,g.next)){f=!1;break e}g=g.prevZ}f=!0}}else e:if(f=e,u=f.prev,h=f,d=f.next,0<=yn(u,h,d))f=!1;else{for(l=f.next.next;l!==f.prev;){if(vn(u.x,u.y,h.x,h.y,d.x,d.y,l.x,l.y)&&0<=yn(l.prev,l,l.next)){f=!1;break e}l=l.next}f=!0}if(f)t.push(c.i/n),t.push(e.i/n),t.push(m.i/n),Mn(e),s=e=m.next;else if((e=m)===s){if(a){if(1===a){a=t,s=n,c=e;do{m=c.prev,f=c.next.next,!xn(m,f)&&bn(m,c,c.next,f)&&_n(m,f)&&_n(f,m)&&(a.push(m.i/s),a.push(c.i/s),a.push(f.i/s),Mn(c),Mn(c.next),c=e=f),c=c.next}while(c!==e);e=c,pn(e,t,n,r,i,o,2)}else if(2===a)e:{a=e;do{for(s=a.next.next;s!==a.prev;){if(c=a.i!==s.i){if(c=a,m=s,f=c.next.i!==m.i&&c.prev.i!==m.i){t:{f=c;do{if(f.i!==c.i&&f.next.i!==c.i&&f.i!==m.i&&f.next.i!==m.i&&bn(f,f.next,c,m)){f=!0;break t}f=f.next}while(f!==c);f=!1}f=!f}if(f=f&&_n(c,m)&&_n(m,c)){f=c,u=!1,h=(c.x+m.x)/2,m=(c.y+m.y)/2;do{f.y>m!==f.next.y>m&&f.next.y!==f.y&&h<(f.next.x-f.x)*(m-f.y)/(f.next.y-f.y)+f.x&&(u=!u),f=f.next}while(f!==c);f=u}c=f}if(c){e=wn(a,s),a=hn(a,a.next),e=hn(e,e.next),pn(a,t,n,r,i,o),pn(e,t,n,r,i,o);break e}s=s.next}a=a.next}while(a!==e)}}else pn(hn(e),t,n,r,i,o,1);break}}}}function dn(e,t){return e.x-t.x}function fn(e,t){var n=t,r=e.x,i=e.y,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o){if(o=a,a===r){if(i===n.y)return n;if(i===n.next.y)return n.next}var s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!s)return null;if(r===o)return s.prev;t=s,a=s.x;var c=s.y,l=1/0;for(n=s.next;n!==t;){if(r>=n.x&&n.x>=a&&r!==n.x&&vn(i<c?r:o,i,a,c,i<c?o:r,i,n.x,n.y)){var u=Math.abs(i-n.y)/(r-n.x);(u<l||u===l&&n.x>s.x)&&_n(n,e)&&(s=n,l=u)}n=n.next}return s}function mn(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),1431655765&(e|e<<1)|(1431655765&(t|t<<1))<<1}function gn(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function vn(e,t,n,r,i,o,a,s){return 0<=(i-a)*(t-s)-(e-a)*(o-s)&&0<=(e-a)*(r-s)-(n-a)*(t-s)&&0<=(n-a)*(o-s)-(i-a)*(r-s)}function yn(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function xn(e,t){return e.x===t.x&&e.y===t.y}function bn(e,t,n,r){return!!(xn(e,t)&&xn(n,r)||xn(e,r)&&xn(n,t))||0<yn(e,t,n)!==0<yn(e,t,r)&&0<yn(n,r,e)!==0<yn(n,r,t)}function _n(e,t){return 0>yn(e.prev,e,e.next)?0<=yn(e,t,e.next)&&0<=yn(e,e.prev,t):0>yn(e,t,e.prev)||0>yn(e,e.next,t)}function wn(e,t){var n=new Tn(e.i,e.x,e.y),r=new Tn(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function En(e,t,n,r){return e=new Tn(e,t,n),r?(e.next=r.next,e.prev=r,r.next.prev=e,r.next=e):(e.prev=e,e.next=e),e}function Mn(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Tn(e,t,n){this.i=e,this.x=t,this.y=n,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function Sn(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function An(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Cn(e,t){S.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Rn(e,t)),this.mergeVertices()}function Rn(e,t){k.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,i=[],o=[],s=0,c=e.length;s<c;s++)!function(e){function s(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function c(e,t,n){var i=e.x-t.x,o=e.y-t.y,a=n.x-e.x,s=n.y-e.y,c=i*i+o*o;if(Math.abs(i*s-o*a)>Number.EPSILON){var l=Math.sqrt(c),u=Math.sqrt(a*a+s*s);if(c=t.x-o/l,t=t.y+i/l,s=((n.x-s/u-c)*s-(n.y+a/u-t)*a)/(i*s-o*a),a=c+i*s-e.x,i=t+o*s-e.y,2>=(o=a*a+i*i))return new r(a,i);o=Math.sqrt(o/2)}else e=!1,i>Number.EPSILON?a>Number.EPSILON&&(e=!0):i<-Number.EPSILON?a<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(s)&&(e=!0),e?(a=-o,o=Math.sqrt(c)):(a=i,i=o,o=Math.sqrt(c/2));return new r(a/o,i/o)}function l(e,t){for(H=e.length;0<=--H;){var r=H,o=H-1;0>o&&(o=e.length-1);var a,s=g+2*_;for(a=0;a<s;a++){var c=B*a,l=B*(a+1),u=t+o+c,h=t+o+l;l=t+r+l,p(t+r+c),p(u),p(l),p(u),p(h),p(l),c=i.length/3,c=E.generateSideWallUV(n,i,c-6,c-3,c-2,c-1),d(c[0]),d(c[1]),d(c[3]),d(c[1]),d(c[2]),d(c[3])}}}function u(e,t,n){f.push(e),f.push(t),f.push(n)}function h(e,t,r){p(e),p(t),p(r),e=i.length/3,e=E.generateTopUV(n,i,e-3,e-2,e-1),d(e[0]),d(e[1]),d(e[2])}function p(e){i.push(f[3*e]),i.push(f[3*e+1]),i.push(f[3*e+2])}function d(e){o.push(e.x),o.push(e.y)}var f=[],m=void 0!==t.curveSegments?t.curveSegments:12,g=void 0!==t.steps?t.steps:1,v=void 0!==t.depth?t.depth:100,y=void 0===t.bevelEnabled||t.bevelEnabled,x=void 0!==t.bevelThickness?t.bevelThickness:6,b=void 0!==t.bevelSize?t.bevelSize:x-2,_=void 0!==t.bevelSegments?t.bevelSegments:3,w=t.extrudePath,E=void 0!==t.UVGenerator?t.UVGenerator:Ao;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),v=t.amount);var M=!1;if(w){var T=w.getSpacedPoints(g);M=!0,y=!1;var S=w.computeFrenetFrames(g,!1),A=new a,C=new a,R=new a}y||(b=x=_=0);var L;m=e.extractPoints(m),e=m.shape;var P=m.holes;if(!So.isClockWise(e)){e=e.reverse();var I=0;for(L=P.length;I<L;I++){var O=P[I];So.isClockWise(O)&&(P[I]=O.reverse())}}var N=So.triangulateShape(e,P),D=e;for(I=0,L=P.length;I<L;I++)O=P[I],e=e.concat(O);var U,F,B=e.length,k=N.length;m=[];var H=0,G=D.length,z=G-1;for(U=H+1;H<G;H++,z++,U++)z===G&&(z=0),U===G&&(U=0),m[H]=c(D[H],D[z],D[U]);w=[];var j=m.concat();for(I=0,L=P.length;I<L;I++){O=P[I];var V=[];for(H=0,G=O.length,z=G-1,U=H+1;H<G;H++,z++,U++)z===G&&(z=0),U===G&&(U=0),V[H]=c(O[H],O[z],O[U]);w.push(V),j=j.concat(V)}for(z=0;z<_;z++){G=z/_;var W=x*Math.cos(G*Math.PI/2);for(U=b*Math.sin(G*Math.PI/2),H=0,G=D.length;H<G;H++){var X=s(D[H],m[H],U);u(X.x,X.y,-W)}for(I=0,L=P.length;I<L;I++)for(O=P[I],V=w[I],H=0,G=O.length;H<G;H++)X=s(O[H],V[H],U),u(X.x,X.y,-W)}for(U=b,H=0;H<B;H++)X=y?s(e[H],j[H],U):e[H],M?(C.copy(S.normals[0]).multiplyScalar(X.x),A.copy(S.binormals[0]).multiplyScalar(X.y),R.copy(T[0]).add(C).add(A),u(R.x,R.y,R.z)):u(X.x,X.y,0);for(G=1;G<=g;G++)for(H=0;H<B;H++)X=y?s(e[H],j[H],U):e[H],M?(C.copy(S.normals[G]).multiplyScalar(X.x),A.copy(S.binormals[G]).multiplyScalar(X.y),R.copy(T[G]).add(C).add(A),u(R.x,R.y,R.z)):u(X.x,X.y,v/g*G);for(z=_-1;0<=z;z--){for(G=z/_,W=x*Math.cos(G*Math.PI/2),U=b*Math.sin(G*Math.PI/2),H=0,G=D.length;H<G;H++)X=s(D[H],m[H],U),u(X.x,X.y,v+W);for(I=0,L=P.length;I<L;I++)for(O=P[I],V=w[I],H=0,G=O.length;H<G;H++)X=s(O[H],V[H],U),M?u(X.x,X.y+T[g-1].y,T[g-1].x+W):u(X.x,X.y,v+W)}!function(){var e=i.length/3;if(y){var t=0*B;for(H=0;H<k;H++)F=N[H],h(F[2]+t,F[1]+t,F[0]+t);for(t=B*(g+2*_),H=0;H<k;H++)F=N[H],h(F[0]+t,F[1]+t,F[2]+t)}else{for(H=0;H<k;H++)F=N[H],h(F[2],F[1],F[0]);for(H=0;H<k;H++)F=N[H],h(F[0]+B*g,F[1]+B*g,F[2]+B*g)}n.addGroup(e,i.length/3-e,0)}(),function(){var e=i.length/3,t=0;for(l(D,t),t+=D.length,I=0,L=P.length;I<L;I++)O=P[I],l(O,t),t+=O.length;n.addGroup(e,i.length/3-e,1)}()}(e[s]);this.addAttribute("position",new D(i,3)),this.addAttribute("uv",new D(o,2)),this.computeVertexNormals()}function Ln(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++)n.shapes.push(e[r].uuid);else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Pn(e,t){S.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new In(e,t)),this.mergeVertices()}function In(e,t){t=t||{};var n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new S;e=n.generateShapes(e,t.size),t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Rn.call(this,e,t),this.type="TextBufferGeometry"}function On(e,t,n,r,i,o,a){S.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Nn(e,t,n,r,i,o,a)),this.mergeVertices()}function Nn(e,t,n,r,i,o,s){k.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var c,l,u=o+s,h=0,p=[],d=new a,f=new a,m=[],g=[],v=[],y=[];for(l=0;l<=n;l++){var x=[],b=l/n;for(c=0;c<=t;c++){var _=c/t;d.x=-e*Math.cos(r+_*i)*Math.sin(o+b*s),d.y=e*Math.cos(o+b*s),d.z=e*Math.sin(r+_*i)*Math.sin(o+b*s),g.push(d.x,d.y,d.z),f.set(d.x,d.y,d.z).normalize(),v.push(f.x,f.y,f.z),y.push(_,1-b),x.push(h++)}p.push(x)}for(l=0;l<n;l++)for(c=0;c<t;c++)e=p[l][c+1],r=p[l][c],i=p[l+1][c],s=p[l+1][c+1],(0!==l||0<o)&&m.push(e,r,s),(l!==n-1||u<Math.PI)&&m.push(r,i,s);this.setIndex(m),this.addAttribute("position",new D(g,3)),this.addAttribute("normal",new D(v,3)),this.addAttribute("uv",new D(y,2))}function Dn(e,t,n,r,i,o){S.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Un(e,t,n,r,i,o)),this.mergeVertices()}function Un(e,t,n,i,o,s){k.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:o,thetaLength:s},e=e||.5,t=t||1,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8,i=void 0!==i?Math.max(1,i):1;var c,l,u=[],h=[],p=[],d=[],f=e,m=(t-e)/i,g=new a,v=new r;for(c=0;c<=i;c++){for(l=0;l<=n;l++)e=o+l/n*s,g.x=f*Math.cos(e),g.y=f*Math.sin(e),h.push(g.x,g.y,g.z),p.push(0,0,1),v.x=(g.x/t+1)/2,v.y=(g.y/t+1)/2,d.push(v.x,v.y);f+=m}for(c=0;c<i;c++)for(t=c*(n+1),l=0;l<n;l++)e=l+t,o=e+n+1,s=e+n+2,f=e+1,u.push(e,o,f),u.push(o,s,f);this.setIndex(u),this.addAttribute("position",new D(h,3)),this.addAttribute("normal",new D(p,3)),this.addAttribute("uv",new D(d,2))}function Fn(e,t,n,r){S.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Bn(e,t,n,r)),this.mergeVertices()}function Bn(e,t,n,i){k.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=to.clamp(i,0,2*Math.PI);var o,s=[],c=[],l=[],u=1/t,h=new a,p=new r;for(o=0;o<=t;o++){var d=n+o*u*i,f=Math.sin(d),m=Math.cos(d);for(d=0;d<=e.length-1;d++)h.x=e[d].x*f,h.y=e[d].y,h.z=e[d].x*m,c.push(h.x,h.y,h.z),p.x=o/t,p.y=d/(e.length-1),l.push(p.x,p.y)}for(o=0;o<t;o++)for(d=0;d<e.length-1;d++)n=d+o*e.length,u=n+e.length,h=n+e.length+1,p=n+1,s.push(n,u,p),s.push(u,h,p);if(this.setIndex(s),this.addAttribute("position",new D(c,3)),this.addAttribute("uv",new D(l,2)),this.computeVertexNormals(),i===2*Math.PI)for(i=this.attributes.normal.array,s=new a,c=new a,l=new a,n=t*e.length*3,d=o=0;o<e.length;o++,d+=3)s.x=i[d+0],s.y=i[d+1],s.z=i[d+2],c.x=i[n+d+0],c.y=i[n+d+1],c.z=i[n+d+2],l.addVectors(s,c).normalize(),i[d+0]=i[n+d+0]=l.x,i[d+1]=i[n+d+1]=l.y,i[d+2]=i[n+d+2]=l.z}function kn(e,t){S.call(this),this.type="ShapeGeometry","object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Hn(e,t)),this.mergeVertices()}function Hn(e,t){function n(e){var n,s=i.length/3;e=e.extractPoints(t);var l=e.shape,u=e.holes;if(!1===So.isClockWise(l))for(l=l.reverse(),e=0,n=u.length;e<n;e++){var h=u[e];!0===So.isClockWise(h)&&(u[e]=h.reverse())}var p=So.triangulateShape(l,u);for(e=0,n=u.length;e<n;e++)h=u[e],l=l.concat(h);for(e=0,n=l.length;e<n;e++)h=l[e],i.push(h.x,h.y,0),o.push(0,0,1),a.push(h.x,h.y);for(e=0,n=p.length;e<n;e++)l=p[e],r.push(l[0]+s,l[1]+s,l[2]+s),c+=3}k.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],i=[],o=[],a=[],s=0,c=0;if(!1===Array.isArray(e))n(e);else for(var l=0;l<e.length;l++)n(e[l]),this.addGroup(s,c,l),s+=c,c=0;this.setIndex(r),this.addAttribute("position",new D(i,3)),this.addAttribute("normal",new D(o,3)),this.addAttribute("uv",new D(a,2))}function Gn(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t.shapes.push(e[n].uuid);else t.shapes.push(e.uuid);return t}function zn(e,t){k.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t};var n=[];t=Math.cos(to.DEG2RAD*(void 0!==t?t:1));var r=[0,0],i={},o=["a","b","c"];if(e.isBufferGeometry){var a=new S;a.fromBufferGeometry(e)}else a=e.clone();a.mergeVertices(),a.computeFaceNormals(),e=a.vertices,a=a.faces;for(var s=0,c=a.length;s<c;s++)for(var l=a[s],u=0;3>u;u++){var h=l[o[u]],p=l[o[(u+1)%3]];r[0]=Math.min(h,p),r[1]=Math.max(h,p),h=r[0]+","+r[1],void 0===i[h]?i[h]={index1:r[0],index2:r[1],face1:s,face2:void 0}:i[h].face2=s}for(h in i)r=i[h],(void 0===r.face2||a[r.face1].normal.dot(a[r.face2].normal)<=t)&&(o=e[r.index1],n.push(o.x,o.y,o.z),o=e[r.index2],n.push(o.x,o.y,o.z));this.addAttribute("position",new D(n,3))}function jn(e,t,n,r,i,o,a,s){S.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Vn(e,t,n,r,i,o,a,s)),this.mergeVertices()}function Vn(e,t,n,i,o,s,c,l){function u(n){var o,s=new r,u=new a,v=0,b=!0===n?e:t,_=!0===n?1:-1,w=g;for(o=1;o<=i;o++)d.push(0,y*_,0),f.push(0,_,0),m.push(.5,.5),g++;var E=g;for(o=0;o<=i;o++){var M=o/i*l+c,T=Math.cos(M);M=Math.sin(M),u.x=b*M,u.y=y*_,u.z=b*T,d.push(u.x,u.y,u.z),f.push(0,_,0),s.x=.5*T+.5,s.y=.5*M*_+.5,m.push(s.x,s.y),g++}for(o=0;o<i;o++)s=w+o,u=E+o,!0===n?p.push(u,u+1,s):p.push(u+1,u,s),v+=3;h.addGroup(x,v,!0===n?1:2),x+=v}k.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:c,thetaLength:l};var h=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,o=Math.floor(o)||1,s=void 0!==s&&s,c=void 0!==c?c:0,l=void 0!==l?l:2*Math.PI;var p=[],d=[],f=[],m=[],g=0,v=[],y=n/2,x=0;!function(){var r,s,u=new a,b=new a,_=0,w=(t-e)/n;for(s=0;s<=o;s++){var E=[],M=s/o,T=M*(t-e)+e;for(r=0;r<=i;r++){var S=r/i,A=S*l+c,C=Math.sin(A);A=Math.cos(A),b.x=T*C,b.y=-M*n+y,b.z=T*A,d.push(b.x,b.y,b.z),u.set(C,w,A).normalize(),f.push(u.x,u.y,u.z),m.push(S,1-M),E.push(g++)}v.push(E)}for(r=0;r<i;r++)for(s=0;s<o;s++)u=v[s+1][r],b=v[s+1][r+1],w=v[s][r+1],p.push(v[s][r],u,w),p.push(u,b,w),_+=6;h.addGroup(x,_,0),x+=_}(),!1===s&&(0<e&&u(!0),0<t&&u(!1)),this.setIndex(p),this.addAttribute("position",new D(d,3)),this.addAttribute("normal",new D(f,3)),this.addAttribute("uv",new D(m,2))}function Wn(e,t,n,r,i,o,a){jn.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Xn(e,t,n,r,i,o,a){Vn.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function qn(e,t,n,r){S.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Yn(e,t,n,r)),this.mergeVertices()}function Yn(e,t,n,i){k.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var o,s=[],c=[],l=[],u=[],h=new a,p=new r;c.push(0,0,0),l.push(0,0,1),u.push(.5,.5);var d=0;for(o=3;d<=t;d++,o+=3){var f=n+d/t*i;h.x=e*Math.cos(f),h.y=e*Math.sin(f),c.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(c[o]/e+1)/2,p.y=(c[o+1]/e+1)/2,u.push(p.x,p.y)}for(o=1;o<=t;o++)s.push(o,o+1,0);this.setIndex(s),this.addAttribute("position",new D(c,3)),this.addAttribute("normal",new D(l,3)),this.addAttribute("uv",new D(u,2))}function Zn(e){V.call(this),this.type="ShadowMaterial",this.color=new v(0),this.transparent=!0,this.setValues(e)}function Kn(e){X.call(this,e),this.type="RawShaderMaterial"}function Jn(e){V.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new v(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new v(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Qn(e){Jn.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(e)}function $n(e){V.call(this),this.type="MeshPhongMaterial",this.color=new v(16777215),this.specular=new v(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new v(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function er(e){$n.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function tr(e){V.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(e)}function nr(e){V.call(this),this.type="MeshLambertMaterial",this.color=new v(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new v(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function rr(e){Nt.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function ir(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad)&&r.onLoad()},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}function or(e){this.manager=void 0!==e?e:Po}function ar(e){this.manager=void 0!==e?e:Po,this._parser=null}function sr(e){this.manager=void 0!==e?e:Po,this._parser=null}function cr(e){this.manager=void 0!==e?e:Po}function lr(e){this.manager=void 0!==e?e:Po}function ur(e){this.manager=void 0!==e?e:Po}function hr(){this.type="Curve",this.arcLengthDivisions=200}function pr(e,t,n,r,i,o,a,s){hr.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function dr(e,t,n,r,i,o){pr.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function fr(){var e=0,t=0,n=0,r=0;return{initCatmullRom:function(i,o,a,s,c){i=c*(a-i),s=c*(s-o),e=o,t=i,n=-3*o+3*a-2*i-s,r=2*o-2*a+i+s},initNonuniformCatmullRom:function(i,o,a,s,c,l,u){i=((o-i)/c-(a-i)/(c+l)+(a-o)/l)*l,s=((a-o)/l-(s-o)/(l+u)+(s-a)/u)*l,e=o,t=i,n=-3*o+3*a-2*i-s,r=2*o-2*a+i+s},calc:function(i){var o=i*i;return e+t*i+n*o+r*o*i}}}function mr(e,t,n,r){hr.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function gr(e,t,n,r,i){t=.5*(r-t),i=.5*(i-n);var o=e*e;return(2*n-2*r+t+i)*e*o+(-3*n+3*r-2*t-i)*o+t*e+n}function vr(e,t,n,r){var i=1-e;return i*i*t+2*(1-e)*e*n+e*e*r}function yr(e,t,n,r,i){var o=1-e,a=1-e;return o*o*o*t+3*a*a*e*n+3*(1-e)*e*e*r+e*e*e*i}function xr(e,t,n,i){hr.call(this),this.type="CubicBezierCurve",this.v0=e||new r,this.v1=t||new r,this.v2=n||new r,this.v3=i||new r}function br(e,t,n,r){hr.call(this),this.type="CubicBezierCurve3",this.v0=e||new a,this.v1=t||new a,this.v2=n||new a,this.v3=r||new a}function _r(e,t){hr.call(this),this.type="LineCurve",this.v1=e||new r,this.v2=t||new r}function wr(e,t){hr.call(this),this.type="LineCurve3",this.v1=e||new a,this.v2=t||new a}function Er(e,t,n){hr.call(this),this.type="QuadraticBezierCurve",this.v0=e||new r,this.v1=t||new r,this.v2=n||new r}function Mr(e,t,n){hr.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new a,this.v1=t||new a,this.v2=n||new a}function Tr(e){hr.call(this),this.type="SplineCurve",this.points=e||[]}function Sr(){hr.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ar(e){Sr.call(this),this.type="Path",this.currentPoint=new r,e&&this.setFromPoints(e)}function Cr(e){Ar.call(this,e),this.uuid=to.generateUUID(),this.type="Shape",this.holes=[]}function Rr(e,t){w.call(this),this.type="Light",this.color=new v(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Lr(e,t,n){Rr.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(w.DefaultUp),this.updateMatrix(),this.groundColor=new v(t)}function Pr(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new r(512,512),this.map=null,this.matrix=new i}function Ir(){Pr.call(this,new yt(50,1,.5,500))}function Or(e,t,n,r,i,o){Rr.call(this,e,t),this.type="SpotLight",this.position.copy(w.DefaultUp),this.updateMatrix(),this.target=new w,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Ir}function Nr(e,t,n,r){Rr.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Pr(new yt(90,1,.5,500))}function Dr(){Pr.call(this,new M(-5,5,5,-5,.5,500))}function Ur(e,t){Rr.call(this,e,t),this.type="DirectionalLight",this.position.copy(w.DefaultUp),this.updateMatrix(),this.target=new w,this.shadow=new Dr}function Fr(e,t){Rr.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Br(e,t,n,r){Rr.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function kr(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Hr(e,t,n,r){kr.call(this,e,t,n,r),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Gr(e,t,n,r){kr.call(this,e,t,n,r)}function zr(e,t,n,r){kr.call(this,e,t,n,r)}function jr(e,t,n,r){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Bo.convertArray(t,this.TimeBufferType),this.values=Bo.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Vr(e,t,n){jr.call(this,e,t,n)}function Wr(e,t,n,r){jr.call(this,e,t,n,r)}function Xr(e,t,n,r){jr.call(this,e,t,n,r)}function qr(e,t,n,r){kr.call(this,e,t,n,r)}function Yr(e,t,n,r){jr.call(this,e,t,n,r)}function Zr(e,t,n,r){jr.call(this,e,t,n,r)}function Kr(e,t,n,r){jr.call(this,e,t,n,r)}function Jr(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=to.generateUUID(),0>this.duration&&this.resetDuration()}function Qr(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Xr;case"vector":case"vector2":case"vector3":case"vector4":return Kr;case"color":return Wr;case"quaternion":return Yr;case"bool":case"boolean":return Vr;case"string":return Zr}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function $r(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Qr(e.type);if(void 0===e.times){var n=[],r=[];Bo.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function ei(e){this.manager=void 0!==e?e:Po,this.textures={}}function ti(e){this.manager=void 0!==e?e:Po}function ni(){}function ri(e){"boolean"===typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Po,this.withCredentials=!1}function ii(e){this.manager=void 0!==e?e:Po,this.texturePath=""}function oi(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Po,this.options=void 0}function ai(){this.type="ShapePath",this.color=new v,this.subPaths=[],this.currentPath=null}function si(e){this.type="Font",this.data=e}function ci(e){this.manager=void 0!==e?e:Po}function li(e){this.manager=void 0!==e?e:Po}function ui(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new yt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new yt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function hi(e,t,n){w.call(this),this.type="CubeCamera";var r=new yt(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new a(1,0,0)),this.add(r);var i=new yt(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new a(-1,0,0)),this.add(i);var o=new yt(90,1,e,t);o.up.set(0,0,1),o.lookAt(new a(0,1,0)),this.add(o);var s=new yt(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new a(0,-1,0)),this.add(s);var c=new yt(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new a(0,0,1)),this.add(c);var l=new yt(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new a(0,0,-1)),this.add(l),this.renderTarget=new h(n,n,{format:1022,magFilter:1006,minFilter:1006}),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,a=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,s,n),n.activeCubeFace=4,e.render(t,c,n),n.texture.generateMipmaps=a,n.activeCubeFace=5,e.render(t,l,n),e.setRenderTarget(null)},this.clear=function(e,t,n,r){for(var i=this.renderTarget,o=0;6>o;o++)i.activeCubeFace=o,e.setRenderTarget(i),e.clear(t,n,r);e.setRenderTarget(null)}}function pi(){w.call(this),this.type="AudioListener",this.context=Wo.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function di(e){w.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.offset=this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function fi(e){di.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function mi(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function gi(e,t,n){switch(this.binding=e,this.valueSize=n,e=Float64Array,t){case"quaternion":t=this._slerp;break;case"string":case"bool":e=Array,t=this._select;break;default:t=this._lerp}this.buffer=new e(4*n),this._mixBufferRegion=t,this.referenceCount=this.useCount=this.cumulativeWeight=0}function vi(e,t,n){n=n||yi.parseTrackName(t),this._targetGroup=e,this._bindings=e.subscribe_(t,n)}function yi(e,t,n){this.path=t,this.parsedPath=n||yi.parseTrackName(t),this.node=yi.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function xi(){this.uuid=to.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function bi(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null,e=t.tracks,t=e.length,n=Array(t);for(var r={endingStart:2400,endingEnd:2400},i=0;i!==t;++i){var o=e[i].createInterpolant(null);n[i]=o,o.settings=r}this._interpolantSettings=r,this._interpolants=n,this._propertyBindings=Array(t),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function _i(e){this._root=e,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function wi(e,t){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=t),this.value=e}function Ei(){k.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Mi(e,t,n){St.call(this,e,t),this.meshPerAttribute=n||1}function Ti(e,t,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),A.call(this,e,t,n),this.meshPerAttribute=r||1}function Si(e,t,n,r){this.ray=new q(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Ai(e,t){return e.distance-t.distance}function Ci(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r)){e=e.children,r=0;for(var i=e.length;r<i;r++)Ci(e[r],t,n,!0)}}function Ri(e){this.autoStart=void 0===e||e,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Li(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function Pi(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function Ii(e,t){this.min=void 0!==e?e:new r(1/0,1/0),this.max=void 0!==t?t:new r(-1/0,-1/0)}function Oi(e,t){this.start=void 0!==e?e:new a,this.end=void 0!==t?t:new a}function Ni(e){w.call(this),this.material=e,this.render=function(){}}function Di(e,t,n,r){this.object=e,this.size=void 0!==t?t:1,e=void 0!==n?n:16711680,r=void 0!==r?r:1,t=0,(n=this.object.geometry)&&n.isGeometry?t=3*n.faces.length:n&&n.isBufferGeometry&&(t=n.attributes.normal.count),n=new k,t=new D(6*t,3),n.addAttribute("position",t),Ut.call(this,n,new Nt({color:e,linewidth:r})),this.matrixAutoUpdate=!1,this.update()}function Ui(e,t){w.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,e=new k,t=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var n=0,r=1;32>n;n++,r++){var i=n/32*Math.PI*2,o=r/32*Math.PI*2;t.push(Math.cos(i),Math.sin(i),1,Math.cos(o),Math.sin(o),1)}e.addAttribute("position",new D(t,3)),t=new Nt({fog:!1}),this.cone=new Ut(e,t),this.add(this.cone),this.update()}function Fi(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Fi(e.children[n]));return t}function Bi(e){for(var t=Fi(e),n=new k,r=[],i=[],o=new v(0,0,1),a=new v(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new D(r,3)),n.addAttribute("color",new D(i,3)),r=new Nt({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),Ut.call(this,n,r),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function ki(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n,e=new Nn(t,4,2),t=new W({wireframe:!0,fog:!1}),Z.call(this,e,t),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Hi(e,t){w.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,e=new Nt({fog:!1}),t=new k,t.addAttribute("position",new A(new Float32Array(15),3)),this.line=new Dt(t,e),this.add(this.line),this.update()}function Gi(e,t,n){w.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,e=new Qt(t),e.rotateY(.5*Math.PI),this.material=new W({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2),t=e.getAttribute("position"),t=new Float32Array(3*t.count),e.addAttribute("color",new A(t,3)),this.add(new Z(e,this.material)),this.update()}function zi(e,t,n,r){e=e||10,t=t||10,n=new v(void 0!==n?n:4473924),r=new v(void 0!==r?r:8947848);var i=t/2,o=e/t,a=e/2;e=[];for(var s=[],c=0,l=0,u=-a;c<=t;c++,u+=o){e.push(-a,0,u,a,0,u),e.push(u,0,-a,u,0,a);var h=c===i?n:r;h.toArray(s,l),l+=3,h.toArray(s,l),l+=3,h.toArray(s,l),l+=3,h.toArray(s,l),l+=3}t=new k,t.addAttribute("position",new D(e,3)),t.addAttribute("color",new D(s,3)),n=new Nt({vertexColors:2}),Ut.call(this,t,n)}function ji(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new v(void 0!==i?i:4473924),o=new v(void 0!==o?o:8947848);var a,s=[],c=[];for(a=0;a<=t;a++){var l=a/t*2*Math.PI,u=Math.sin(l)*e;l=Math.cos(l)*e,s.push(0,0,0),s.push(u,0,l);var h=1&a?i:o;c.push(h.r,h.g,h.b),c.push(h.r,h.g,h.b)}for(a=0;a<=n;a++){h=1&a?i:o;var p=e-e/n*a;for(t=0;t<r;t++)l=t/r*2*Math.PI,u=Math.sin(l)*p,l=Math.cos(l)*p,s.push(u,0,l),c.push(h.r,h.g,h.b),l=(t+1)/r*2*Math.PI,u=Math.sin(l)*p,l=Math.cos(l)*p,s.push(u,0,l),c.push(h.r,h.g,h.b)}e=new k,e.addAttribute("position",new D(s,3)),e.addAttribute("color",new D(c,3)),s=new Nt({vertexColors:2}),Ut.call(this,e,s)}function Vi(e,t,n,r){this.object=e,this.size=void 0!==t?t:1,e=void 0!==n?n:16776960,r=void 0!==r?r:1,t=0,(n=this.object.geometry)&&n.isGeometry?t=n.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),n=new k,t=new D(6*t,3),n.addAttribute("position",t),Ut.call(this,n,new Nt({color:e,linewidth:r})),this.matrixAutoUpdate=!1,this.update()}function Wi(e,t,n){w.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1),e=new k,e.addAttribute("position",new D([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3)),t=new Nt({fog:!1}),this.lightPlane=new Dt(e,t),this.add(this.lightPlane),e=new k,e.addAttribute("position",new D([0,0,0,0,0,1],3)),this.targetLine=new Dt(e,t),this.add(this.targetLine),this.update()}function Xi(e){function t(e,t,r){n(e,r),n(t,r)}function n(e,t){o.push(0,0,0),a.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(o.length/3-1)}var r=new k,i=new Nt({color:16777215,vertexColors:1}),o=[],a=[],s={},c=new v(16755200),l=new v(16711680),u=new v(43775),h=new v(16777215),p=new v(3355443);t("n1","n2",c),t("n2","n4",c),t("n4","n3",c),t("n3","n1",c),t("f1","f2",c),t("f2","f4",c),t("f4","f3",c),t("f3","f1",c),t("n1","f1",c),t("n2","f2",c),t("n3","f3",c),t("n4","f4",c),t("p","n1",l),t("p","n2",l),t("p","n3",l),t("p","n4",l),t("u1","u2",u),t("u2","u3",u),t("u3","u1",u),t("c","t",h),t("p","c",p),t("cn1","cn2",p),t("cn3","cn4",p),t("cf1","cf2",p),t("cf3","cf4",p),r.addAttribute("position",new D(o,3)),r.addAttribute("color",new D(a,3)),Ut.call(this,r,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function qi(e,t){this.object=e,void 0===t&&(t=16776960),e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new Float32Array(24),r=new k;r.setIndex(new A(e,1)),r.addAttribute("position",new A(n,3)),Ut.call(this,r,new Nt({color:t})),this.matrixAutoUpdate=!1,this.update()}function Yi(e,t){this.type="Box3Helper",this.box=e,e=void 0!==t?t:16776960,t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new k;n.setIndex(new A(t,1)),n.addAttribute("position",new D([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ut.call(this,n,new Nt({color:e})),this.geometry.computeBoundingSphere()}function Zi(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t,e=void 0!==n?n:16776960,t=new k,t.addAttribute("position",new D([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),t.computeBoundingSphere(),Dt.call(this,t,new Nt({color:e})),t=new k,t.addAttribute("position",new D([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),t.computeBoundingSphere(),this.add(new Z(t,new W({color:e,opacity:.2,transparent:!0,depthWrite:!1})))}function Ki(e,t,n,r,i,o){w.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Xo&&(Xo=new k,Xo.addAttribute("position",new D([0,0,0,0,1,0],3)),qo=new Vn(0,.5,1,5,1),qo.translate(0,-.5,0)),this.position.copy(t),this.line=new Dt(Xo,new Nt({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Z(qo,new W({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function Ji(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e];e=new k,e.addAttribute("position",new D(t,3)),e.addAttribute("color",new D([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),t=new Nt({vertexColors:2}),Ut.call(this,e,t)}function Qi(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),mr.call(this,e),this.type="catmullrom",this.closed=!0}function $i(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),mr.call(this,e),this.type="catmullrom"}function eo(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),mr.call(this,e),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:0<e?1:+e}),!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}}(),Object.assign(n.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){void 0!==this._listeners&&void 0!==(e=this._listeners[e])&&-1!==(t=e.indexOf(t))&&e.splice(t,1)},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this,t=t.slice(0);for(var n=0,r=t.length;n<r;n++)t[n].call(this,e)}}}});var to={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;256>t;t++)e[t]=(16>t?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*to.DEG2RAD},radToDeg:function(e){return e*to.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};Object.defineProperties(r.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(r.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y;return e=e.elements,this.x=e[0]*t+e[3]*n+e[6],this.y=e[1]*t+e[4]*n+e[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new r,t=new r;return function(n,r){return e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return 0>e&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return e=this.y-e.y,t*t+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t);t=Math.sin(t);var r=this.x-e.x,i=this.y-e.y;return this.x=r*n-i*t+e.x,this.y=r*t+i*n+e.y,this}}),Object.assign(i.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,c,l,u,h,p,d,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new i).fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this},copyPosition:function(e){var t=this.elements;return e=e.elements,t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new a;return function(t){var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length();return t=1/e.setFromMatrixColumn(t,2).length(),n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*t,n[9]=r[9]*t,n[10]=r[10]*t,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n);n=Math.sin(n);var a=Math.cos(r);r=Math.sin(r);var s=Math.cos(i);if(i=Math.sin(i),"XYZ"===e.order){e=o*s;var c=o*i,l=n*s,u=n*i;t[0]=a*s,t[4]=-a*i,t[8]=r,t[1]=c+l*r,t[5]=e-u*r,t[9]=-n*a,t[2]=u-e*r,t[6]=l+c*r,t[10]=o*a}else"YXZ"===e.order?(e=a*s,c=a*i,l=r*s,u=r*i,t[0]=e+u*n,t[4]=l*n-c,t[8]=o*r,t[1]=o*i,t[5]=o*s,t[9]=-n,t[2]=c*n-l,t[6]=u+e*n,t[10]=o*a):"ZXY"===e.order?(e=a*s,c=a*i,l=r*s,u=r*i,t[0]=e-u*n,t[4]=-o*i,t[8]=l+c*n,t[1]=c+l*n,t[5]=o*s,t[9]=u-e*n,t[2]=-o*r,t[6]=n,t[10]=o*a):"ZYX"===e.order?(e=o*s,c=o*i,l=n*s,u=n*i,t[0]=a*s,t[4]=l*r-c,t[8]=e*r+u,t[1]=a*i,t[5]=u*r+e,t[9]=c*r-l,t[2]=-r,t[6]=n*a,t[10]=o*a):"YZX"===e.order?(e=o*a,c=o*r,l=n*a,u=n*r,t[0]=a*s,t[4]=u-e*i,t[8]=l*i+c,t[1]=i,t[5]=o*s,t[9]=-n*s,t[2]=-r*s,t[6]=c*i+l,t[10]=e-u*i):"XZY"===e.order&&(e=o*a,c=o*r,l=n*a,u=n*r,t[0]=a*s,t[4]=-i,t[8]=r*s,t[1]=e*i+u,t[5]=o*s,t[9]=c*i-l,t[2]=l*i-c,t[6]=n*s,t[10]=u*i+e);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new a(0,0,0),t=new a(1,1,1);return function(n){return this.compose(e,n,t)}}(),lookAt:function(){var e=new a,t=new a,n=new a;return function(r,i,o){var a=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements;t=this.elements,e=n[0];var i=n[4],o=n[8],a=n[12],s=n[1],c=n[5],l=n[9],u=n[13],h=n[2],p=n[6],d=n[10],f=n[14],m=n[3],g=n[7],v=n[11];n=n[15];var y=r[0],x=r[4],b=r[8],_=r[12],w=r[1],E=r[5],M=r[9],T=r[13],S=r[2],A=r[6],C=r[10],R=r[14],L=r[3],P=r[7],I=r[11];return r=r[15],t[0]=e*y+i*w+o*S+a*L,t[4]=e*x+i*E+o*A+a*P,t[8]=e*b+i*M+o*C+a*I,t[12]=e*_+i*T+o*R+a*r,t[1]=s*y+c*w+l*S+u*L,t[5]=s*x+c*E+l*A+u*P,t[9]=s*b+c*M+l*C+u*I,t[13]=s*_+c*T+l*R+u*r,t[2]=h*y+p*w+d*S+f*L,t[6]=h*x+p*E+d*A+f*P,t[10]=h*b+p*M+d*C+f*I,t[14]=h*_+p*T+d*R+f*r,t[3]=m*y+g*w+v*S+n*L,t[7]=m*x+g*E+v*A+n*P,t[11]=m*b+g*M+v*C+n*I,t[15]=m*_+g*T+v*R+n*r,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new a;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],c=e[13],l=e[2],u=e[6],h=e[10],p=e[14];return e[3]*(+i*s*u-r*c*u-i*a*h+n*c*h+r*a*p-n*s*p)+e[7]*(+t*s*p-t*c*h+i*o*h-r*o*p+r*c*l-i*s*l)+e[11]*(+t*c*u-t*a*p-i*o*u+n*o*p+i*a*l-n*c*l)+e[15]*(-r*a*l-t*s*u+t*a*h+r*o*u-n*o*h+n*s*l)},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements;e=r[0];var i=r[1],o=r[2],a=r[3],s=r[4],c=r[5],l=r[6],u=r[7],h=r[8],p=r[9],d=r[10],f=r[11],m=r[12],g=r[13],v=r[14];r=r[15];var y=p*v*u-g*d*u+g*l*f-c*v*f-p*l*r+c*d*r,x=m*d*u-h*v*u-m*l*f+s*v*f+h*l*r-s*d*r,b=h*g*u-m*p*u+m*c*f-s*g*f-h*c*r+s*p*r,_=m*p*l-h*g*l-m*c*d+s*g*d+h*c*v-s*p*v,w=e*y+i*x+o*b+a*_;if(0===w){if(!0===t)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return t=1/w,n[0]=y*t,n[1]=(g*d*a-p*v*a-g*o*f+i*v*f+p*o*r-i*d*r)*t,n[2]=(c*v*a-g*l*a+g*o*u-i*v*u-c*o*r+i*l*r)*t,n[3]=(p*l*a-c*d*a-p*o*u+i*d*u+c*o*f-i*l*f)*t,n[4]=x*t,n[5]=(h*v*a-m*d*a+m*o*f-e*v*f-h*o*r+e*d*r)*t,n[6]=(m*l*a-s*v*a-m*o*u+e*v*u+s*o*r-e*l*r)*t,n[7]=(s*d*a-h*l*a+h*o*u-e*d*u-s*o*f+e*l*f)*t,n[8]=b*t,n[9]=(m*p*a-h*g*a-m*i*f+e*g*f+h*i*r-e*p*r)*t,n[10]=(s*g*a-m*c*a+m*i*u-e*g*u-s*i*r+e*c*r)*t,n[11]=(h*c*a-s*p*a-h*i*u+e*p*u+s*i*f-e*c*f)*t,n[12]=_*t,n[13]=(h*g*o-m*p*o+m*i*d-e*g*d-h*i*v+e*p*v)*t,n[14]=(m*c*o-s*g*o-m*i*l+e*g*l+s*i*v-e*c*v)*t,n[15]=(s*p*o-h*c*o+h*i*l-e*p*l-s*i*d+e*c*d)*t,this},scale:function(e){var t=this.elements,n=e.x,r=e.y;return e=e.z,t[0]*=n,t[4]*=r,t[8]*=e,t[1]*=n,t[5]*=r,t[9]*=e,t[2]*=n,t[6]*=r,t[10]*=e,t[3]*=n,t[7]*=r,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t);t=Math.sin(t);var r=1-n,i=e.x,o=e.y;e=e.z;var a=r*i,s=r*o;return this.set(a*i+n,a*o-t*e,a*e+t*o,0,a*o+t*e,s*o+n,s*e-t*i,0,a*e-t*o,s*e+t*i,r*e*e+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,c=i+i,l=o+o,u=a+a;t=i*c;var h=i*l;i*=u;var p=o*l;o*=u,a*=u,c*=s,l*=s,s*=u,u=n.x;var d=n.y;return n=n.z,r[0]=(1-(p+a))*u,r[1]=(h+s)*u,r[2]=(i-l)*u,r[3]=0,r[4]=(h-s)*d,r[5]=(1-(t+a))*d,r[6]=(o+c)*d,r[7]=0,r[8]=(i+l)*n,r[9]=(o-c)*n,r[10]=(1-(t+p))*n,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(){var e=new a,t=new i;return function(n,r,i){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),c=e.set(o[8],o[9],o[10]).length();0>this.determinant()&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this),n=1/a,o=1/s;var l=1/c;return t.elements[0]*=n,t.elements[1]*=n,t.elements[2]*=n,t.elements[4]*=o,t.elements[5]*=o,t.elements[6]*=o,t.elements[8]*=l,t.elements[9]*=l,t.elements[10]*=l,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=c,this}}(),makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements;return a[0]=2*i/(t-e),a[4]=0,a[8]=(t+e)/(t-e),a[12]=0,a[1]=0,a[5]=2*i/(n-r),a[9]=(n+r)/(n-r),a[13]=0,a[2]=0,a[6]=0,a[10]=-(o+i)/(o-i),a[14]=-2*o*i/(o-i),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),c=1/(n-r),l=1/(o-i);return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-(t+e)*s,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-(n+r)*c,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-(o+i)*l,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){var t=this.elements;e=e.elements;for(var n=0;16>n;n++)if(t[n]!==e[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;16>n;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(o,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],c=n[r+1],l=n[r+2];n=n[r+3],r=i[o+0];var u=i[o+1],h=i[o+2];if(i=i[o+3],n!==i||s!==r||c!==u||l!==h){o=1-a;var p=s*r+c*u+l*h+n*i,d=0<=p?1:-1,f=1-p*p;f>Number.EPSILON&&(f=Math.sqrt(f),p=Math.atan2(f,p*d),o=Math.sin(o*p)/f,a=Math.sin(a*p)/f),d*=a,s=s*o+r*d,c=c*o+u*d,l=l*o+h*d,n=n*o+i*d,o===1-a&&(a=1/Math.sqrt(s*s+c*c+l*l+n*n),s*=a,c*=a,l*=a,n*=a)}e[t]=s,e[t+1]=c,e[t+2]=l,e[t+3]=n}}),Object.defineProperties(o.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(o.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z;e=e.order;var o=Math.cos,a=Math.sin,s=o(n/2),c=o(r/2);return o=o(i/2),n=a(n/2),r=a(r/2),i=a(i/2),"XYZ"===e?(this._x=n*c*o+s*r*i,this._y=s*r*o-n*c*i,this._z=s*c*i+n*r*o,this._w=s*c*o-n*r*i):"YXZ"===e?(this._x=n*c*o+s*r*i,this._y=s*r*o-n*c*i,this._z=s*c*i-n*r*o,this._w=s*c*o+n*r*i):"ZXY"===e?(this._x=n*c*o-s*r*i,this._y=s*r*o+n*c*i,this._z=s*c*i+n*r*o,this._w=s*c*o-n*r*i):"ZYX"===e?(this._x=n*c*o-s*r*i,this._y=s*r*o+n*c*i,this._z=s*c*i-n*r*o,this._w=s*c*o+n*r*i):"YZX"===e?(this._x=n*c*o+s*r*i,this._y=s*r*o+n*c*i,this._z=s*c*i-n*r*o,this._w=s*c*o-n*r*i):"XZY"===e&&(this._x=n*c*o-s*r*i,this._y=s*r*o-n*c*i,this._z=s*c*i+n*r*o,this._w=s*c*o+n*r*i),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){t/=2;var n=Math.sin(t);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(t),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0];e=t[4];var r=t[8],i=t[1],o=t[5],a=t[9],s=t[2],c=t[6];t=t[10];var l=n+o+t;return 0<l?(n=.5/Math.sqrt(l+1),this._w=.25/n,this._x=(c-a)*n,this._y=(r-s)*n,this._z=(i-e)*n):n>o&&n>t?(n=2*Math.sqrt(1+n-o-t),this._w=(c-a)/n,this._x=.25*n,this._y=(e+i)/n,this._z=(r+s)/n):o>t?(n=2*Math.sqrt(1+o-n-t),this._w=(r-s)/n,this._x=(e+i)/n,this._y=.25*n,this._z=(a+c)/n):(n=2*Math.sqrt(1+t-n-o),this._w=(i-e)/n,this._x=(r+s)/n,this._y=(a+c)/n,this._z=.25*n),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new a;return function(n,r){return void 0===t&&(t=new a),e=n.dot(r)+1,1e-6>e?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(to.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);return 0===n?this:(this.slerp(e,Math.min(1,t/n)),this)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z;e=e._w;var o=t._x,a=t._y,s=t._z;return t=t._w,this._x=n*t+e*o+r*s-i*a,this._y=r*t+e*a+i*o-n*s,this._z=i*t+e*s+n*a-r*o,this._w=e*t-n*o-r*a-i*s,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(0>a?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),1<=a)return this._w=o,this._x=n,this._y=r,this._z=i,this;if((e=1-a*a)<=Number.EPSILON)return a=1-t,this._w=a*o+t*this._w,this._x=a*n+t*this._x,this._y=a*r+t*this._y,this._z=a*i+t*this._z,this.normalize();e=Math.sqrt(e);var s=Math.atan2(e,a);return a=Math.sin((1-t)*s)/e,t=Math.sin(t*s)/e,this._w=o*a+this._w*t,this._x=n*a+this._x*t,this._y=r*a+this._y*t,this._z=i*a+this._z*t,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(a.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new o;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new o;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[3]*n+e[6]*r,this.y=e[1]*t+e[4]*n+e[7]*r,this.z=e[2]*t+e[5]*n+e[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z;e=e.elements;var i=1/(e[3]*t+e[7]*n+e[11]*r+e[15]);return this.x=(e[0]*t+e[4]*n+e[8]*r+e[12])*i,this.y=(e[1]*t+e[5]*n+e[9]*r+e[13])*i,this.z=(e[2]*t+e[6]*n+e[10]*r+e[14])*i,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z;e=e.w;var s=e*t+o*r-a*n,c=e*n+a*t-i*r,l=e*r+i*n-o*t;return t=-i*t-o*n-a*r,this.x=s*e+t*-i+c*-a-l*-o,this.y=c*e+t*-o+l*-i-s*-a,this.z=l*e+t*-a+s*-o-c*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(){var e=new i;return function(t){return this.applyMatrix4(e.getInverse(t.projectionMatrix)).applyMatrix4(t.matrixWorld)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r,this.y=e[1]*t+e[5]*n+e[9]*r,this.z=e[2]*t+e[6]*n+e[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new a,t=new a;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y;e=e.z;var i=t.x,o=t.y;return t=t.z,this.x=r*t-e*o,this.y=e*i-n*t,this.z=n*o-r*i,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new a;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new a;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){return e=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq()),Math.acos(to.clamp(e,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return e=this.z-e.z,t*t+n*n+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){return e=e.elements,this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length();return e=this.setFromMatrixColumn(e,2).length(),this.x=t,this.y=n,this.z=e,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(s.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,c){var l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},setFromMatrix4:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var e=new a;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements;t=this.elements,e=n[0];var i=n[3],o=n[6],a=n[1],s=n[4],c=n[7],l=n[2],u=n[5];n=n[8];var h=r[0],p=r[3],d=r[6],f=r[1],m=r[4],g=r[7],v=r[2],y=r[5];return r=r[8],t[0]=e*h+i*f+o*v,t[3]=e*p+i*m+o*y,t[6]=e*d+i*g+o*r,t[1]=a*h+s*f+c*v,t[4]=a*p+s*m+c*y,t[7]=a*d+s*g+c*r,t[2]=l*h+u*f+n*v,t[5]=l*p+u*m+n*y,t[8]=l*d+u*g+n*r,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7];return e=e[8],t*o*e-t*a*c-n*i*e+n*a*s+r*i*c-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements;e=this.elements;var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7];n=n[8];var h=n*s-c*u,p=c*l-n*a,d=u*a-s*l,f=r*h+i*p+o*d;if(0===f){if(!0===t)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return t=1/f,e[0]=h*t,e[1]=(o*u-n*i)*t,e[2]=(c*i-o*s)*t,e[3]=p*t,e[4]=(n*r-o*l)*t,e[5]=(o*a-c*r)*t,e[6]=d*t,e[7]=(i*l-u*r)*t,e[8]=(s*r-i*a)*t,this},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i);i=Math.sin(i),this.set(n*s,n*i,-n*(s*o+i*a)+o+e,-r*i,r*s,-r*(-i*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e);e=Math.sin(e);var n=this.elements,r=n[0],i=n[3],o=n[6],a=n[1],s=n[4],c=n[7];return n[0]=t*r+e*a,n[3]=t*i+e*s,n[6]=t*o+e*c,n[1]=-e*r+t*a,n[4]=-e*i+t*s,n[7]=-e*o+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){var t=this.elements;e=e.elements;for(var n=0;9>n;n++)if(t[n]!==e[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;9>n;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var no={getDataURL:function(e){if(e instanceof HTMLCanvasElement)var t=e;else{t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},ro=0;c.DEFAULT_IMAGE=void 0,c.DEFAULT_MAPPING=300,c.prototype=Object.assign(Object.create(n.prototype),{constructor:c,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=to.generateUUID()),!t&&void 0===e.images[r.uuid]){if(Array.isArray(r))for(var i=[],o=0,a=r.length;o<a;o++)i.push(no.getDataURL(r[o]));else i=no.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),0>e.x||1<e.x)switch(this.wrapS){case 1e3:e.x-=Math.floor(e.x);break;case 1001:e.x=0>e.x?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(0>e.y||1<e.y)switch(this.wrapT){case 1e3:e.y-=Math.floor(e.y);break;case 1001:e.y=0>e.y?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(c.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(l.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.w=this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w;return e=e.elements,this.x=e[0]*t+e[4]*n+e[8]*r+e[12]*i,this.y=e[1]*t+e[5]*n+e[9]*r+e[13]*i,this.z=e[2]*t+e[6]*n+e[10]*r+e[14]*i,this.w=e[3]*t+e[7]*n+e[11]*r+e[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.z=this.y=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){e=e.elements;var t=e[0],n=e[4],r=e[8],i=e[1],o=e[5],a=e[9],s=e[2],c=e[6],l=e[10];return.01>Math.abs(n-i)&&.01>Math.abs(r-s)&&.01>Math.abs(a-c)?.1>Math.abs(n+i)&&.1>Math.abs(r+s)&&.1>Math.abs(a+c)&&.1>Math.abs(t+o+l-3)?(this.set(1,0,0,0),this):(e=Math.PI,t=(t+1)/2,o=(o+1)/2,l=(l+1)/2,n=(n+i)/4,r=(r+s)/4,a=(a+c)/4,t>o&&t>l?.01>t?(c=0,n=s=.707106781):(c=Math.sqrt(t),s=n/c,n=r/c):o>l?.01>o?(c=.707106781,s=0,n=.707106781):(s=Math.sqrt(o),c=n/s,n=a/s):.01>l?(s=c=.707106781,n=0):(n=Math.sqrt(l),c=r/n,s=a/n),this.set(c,s,n,e),this):(e=Math.sqrt((c-a)*(c-a)+(r-s)*(r-s)+(i-n)*(i-n)),.001>Math.abs(e)&&(e=1),this.x=(c-a)/e,this.y=(r-s)/e,this.z=(i-n)/e,this.w=Math.acos((t+o+l-1)/2),this)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new l,t=new l),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),u.prototype=Object.assign(Object.create(n.prototype),{constructor:u,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),h.prototype=Object.create(u.prototype),h.prototype.constructor=h,h.prototype.isWebGLRenderTargetCube=!0,p.prototype=Object.create(c.prototype),p.prototype.constructor=p,p.prototype.isDataTexture=!0,Object.assign(d.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.length;s<c;s+=3){var l=e[s],u=e[s+1],h=e[s+2];l<t&&(t=l),u<n&&(n=u),h<r&&(r=h),l>i&&(i=l),u>o&&(o=u),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.count;s<c;s++){var l=e.getX(s),u=e.getY(s),h=e.getZ(s);l<t&&(t=l),u<n&&(n=u),h<r&&(r=h),l>i&&(i=l),u>o&&(o=u),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new a;return function(t,n){return n=e.copy(n).multiplyScalar(.5),this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new a),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new a),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){function e(e){var o=e.geometry;if(void 0!==o)if(o.isGeometry)for(o=o.vertices,n=0,r=o.length;n<r;n++)i.copy(o[n]),i.applyMatrix4(e.matrixWorld),t.expandByPoint(i);else if(o.isBufferGeometry&&void 0!==(o=o.attributes.position))for(n=0,r=o.count;n<r;n++)i.fromBufferAttribute(o,n).applyMatrix4(e.matrixWorld),t.expandByPoint(i)}var t,n,r,i=new a;return function(n){return t=this,n.updateMatrixWorld(!0),n.traverse(e),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new a),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new a;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){if(0<e.normal.x)var t=e.normal.x*this.min.x,n=e.normal.x*this.max.x;else t=e.normal.x*this.max.x,n=e.normal.x*this.min.x;return 0<e.normal.y?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){function e(e){var i,o=0;for(i=e.length-3;o<=i;o+=3){c.fromArray(e,o);var a=u.x*Math.abs(c.x)+u.y*Math.abs(c.y)+u.z*Math.abs(c.z),s=t.dot(c),l=n.dot(c),h=r.dot(c);if(Math.max(-Math.max(s,l,h),Math.min(s,l,h))>a)return!1}return!0}var t=new a,n=new a,r=new a,i=new a,o=new a,s=new a,c=new a,l=new a,u=new a,h=new a;return function(a){return!this.isEmpty()&&(this.getCenter(l),u.subVectors(this.max,l),t.subVectors(a.a,l),n.subVectors(a.b,l),r.subVectors(a.c,l),i.subVectors(n,t),o.subVectors(r,n),s.subVectors(t,r),a=[0,-i.z,i.y,0,-o.z,o.y,0,-s.z,s.y,i.z,0,-i.x,o.z,0,-o.x,s.z,0,-s.x,-i.y,i.x,0,-o.y,o.x,0,-s.y,s.x,0],!!e(a)&&(a=[1,0,0,0,1,0,0,0,1],!!e(a)&&(h.crossVectors(i,o),a=[h.x,h.y,h.z],e(a))))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new a),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new a;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new a;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new f),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new a,new a,new a,new a,new a,new a,new a,new a];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(f.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new d;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).getCenter(r);for(var i=n=0,o=t.length;i<o;i++)n=Math.max(n,r.distanceToSquared(t[i]));return this.radius=Math.sqrt(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new a),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new d),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(m.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new a,t=new a;return function(n,r,i){return r=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize(),this.setFromNormalAndCoplanarPoint(r,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new a),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new a;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new a);var r=t.delta(e),i=this.normal.dot(r);if(0===i){if(0===this.distanceToPoint(t.start))return n.copy(t.start)}else if(!(0>(i=-(t.start.dot(this.normal)+this.constant)/i)||1<i))return n.copy(r).multiplyScalar(i).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>t&&0<e||0>e&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new a),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new a,t=new s;return function(n,r){return r=r||t.getNormalMatrix(n),n=this.coplanarPoint(e).applyMatrix4(n),r=this.normal.applyMatrix3(r).normalize(),this.constant=-n.dot(r),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(g.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;6>n;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements;e=n[0];var r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],c=n[6],l=n[7],u=n[8],h=n[9],p=n[10],d=n[11],f=n[12],m=n[13],g=n[14];return n=n[15],t[0].setComponents(o-e,l-a,d-u,n-f).normalize(),t[1].setComponents(o+e,l+a,d+u,n+f).normalize(),t[2].setComponents(o+r,l+s,d+h,n+m).normalize(),t[3].setComponents(o-r,l-s,d-h,n-m).normalize(),t[4].setComponents(o-i,l-c,d-p,n-g).normalize(),t[5].setComponents(o+i,l+c,d+p,n+g).normalize(),this},intersectsObject:function(){var e=new f;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new f;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes,n=e.center;e=-e.radius;for(var r=0;6>r;r++)if(t[r].distanceToPoint(n)<e)return!1;return!0},intersectsBox:function(){var e=new a;return function(t){for(var n=this.planes,r=0;6>r;r++){var i=n[r];if(e.x=0<i.normal.x?t.max.x:t.min.x,e.y=0<i.normal.y?t.max.y:t.min.y,e.z=0<i.normal.z?t.max.z:t.min.z,0>i.distanceToPoint(e))return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;6>n;n++)if(0>t[n].distanceToPoint(e))return!1;return!0}});var io={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif\n",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif\n",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},oo={merge:function(e){for(var t={},n=0;n<e.length;n++){var r,i=this.clone(e[n]);for(r in i)t[r]=i[r]}return t},clone:function(e){var t,n={};for(t in e){n[t]={};for(var r in e[t]){var i=e[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?n[t][r]=i.clone():Array.isArray(i)?n[t][r]=i.slice():n[t][r]=i}}return n}},ao={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(v.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.b=this.g=this.r=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:.5>n?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){return t=to.euclideanModulo(t,1),n=to.clamp(n,0,1),r=to.clamp(r,0,1),0===n?this.r=this.g=this.b=r:(n=.5>=r?r*(1+n):r+n-r*n,r=2*r-n,this.r=e(r,n,t+1/3),this.g=e(r,n,t),this.b=e(r,n,t-1/3)),this}}(),setStyle:function(e){function t(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r=n[2];switch(n[1]){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){r=parseFloat(n[1])/360;var i=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(r,i,o)}}}else if(n=/^#([A-Fa-f0-9]+)$/.exec(e)){if(n=n[1],3===(r=n.length))return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,this;if(6===r)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,this}return e&&0<e.length&&(n=ao[e],void 0!==n?this.setHex(n):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){return void 0===t&&(t=2),t=0<t?1/t:1,this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return.04045>e?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return.0031308>e?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n=this.r,r=this.g,i=this.b,o=Math.max(n,r,i),a=Math.min(n,r,i),s=(a+o)/2;if(a===o)a=t=0;else{var c=o-a;switch(a=.5>=s?c/(o+a):c/(2-o-a),o){case n:t=(r-i)/c+(r<i?6:0);break;case r:t=(i-n)/c+2;break;case i:t=(n-r)/c+4}t/=6}return e.h=t,e.s=a,e.l=s,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,r){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=r,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(){var e={h:0,s:0,l:0},t={h:0,s:0,l:0};return function(n,r){this.getHSL(e),n.getHSL(t),n=to.lerp(e.h,t.h,r);var i=to.lerp(e.s,t.s,r);return r=to.lerp(e.l,t.l,r),this.setHSL(n,i,r),this}}(),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var so={common:{diffuse:{value:new v(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new s},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new r(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new v(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new v(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new s}},sprite:{diffuse:{value:new v(15658734)},opacity:{value:1},center:{value:new r(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new s}}},co={basic:{uniforms:oo.merge([so.common,so.specularmap,so.envmap,so.aomap,so.lightmap,so.fog]),vertexShader:io.meshbasic_vert,fragmentShader:io.meshbasic_frag},lambert:{uniforms:oo.merge([so.common,so.specularmap,so.envmap,so.aomap,so.lightmap,so.emissivemap,so.fog,so.lights,{emissive:{value:new v(0)}}]),vertexShader:io.meshlambert_vert,fragmentShader:io.meshlambert_frag},phong:{uniforms:oo.merge([so.common,so.specularmap,so.envmap,so.aomap,so.lightmap,so.emissivemap,so.bumpmap,so.normalmap,so.displacementmap,so.gradientmap,so.fog,so.lights,{emissive:{value:new v(0)},specular:{value:new v(1118481)},shininess:{value:30}}]),vertexShader:io.meshphong_vert,fragmentShader:io.meshphong_frag},standard:{uniforms:oo.merge([so.common,so.envmap,so.aomap,so.lightmap,so.emissivemap,so.bumpmap,so.normalmap,so.displacementmap,so.roughnessmap,so.metalnessmap,so.fog,so.lights,{emissive:{value:new v(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:io.meshphysical_vert,fragmentShader:io.meshphysical_frag},points:{uniforms:oo.merge([so.points,so.fog]),vertexShader:io.points_vert,fragmentShader:io.points_frag},dashed:{uniforms:oo.merge([so.common,so.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:io.linedashed_vert,fragmentShader:io.linedashed_frag},depth:{uniforms:oo.merge([so.common,so.displacementmap]),vertexShader:io.depth_vert,fragmentShader:io.depth_frag},normal:{uniforms:oo.merge([so.common,so.bumpmap,so.normalmap,so.displacementmap,{opacity:{value:1}}]),vertexShader:io.normal_vert,fragmentShader:io.normal_frag},sprite:{uniforms:oo.merge([so.sprite,so.fog]),vertexShader:io.sprite_vert,fragmentShader:io.sprite_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:io.cube_vert,fragmentShader:io.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:io.equirect_vert,fragmentShader:io.equirect_frag},distanceRGBA:{uniforms:oo.merge([so.common,so.displacementmap,{referencePosition:{value:new a},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:io.distanceRGBA_vert,fragmentShader:io.distanceRGBA_frag},shadow:{uniforms:oo.merge([so.lights,so.fog,{color:{value:new v(0)},opacity:{value:1}}]),vertexShader:io.shadow_vert,fragmentShader:io.shadow_frag}};co.physical={uniforms:oo.merge([co.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:io.meshphysical_vert,fragmentShader:io.meshphysical_frag},b.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),b.DefaultOrder="XYZ",Object.defineProperties(b.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(b.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=to.clamp,i=e.elements;e=i[0];var o=i[4],a=i[8],s=i[1],c=i[5],l=i[9],u=i[2],h=i[6];return i=i[10],t=t||this._order,"XYZ"===t?(this._y=Math.asin(r(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(-l,i),this._z=Math.atan2(-o,e)):(this._x=Math.atan2(h,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(l,-1,1)),.99999>Math.abs(l)?(this._y=Math.atan2(a,i),this._z=Math.atan2(s,c)):(this._y=Math.atan2(-u,e),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(h,-1,1)),.99999>Math.abs(h)?(this._y=Math.atan2(-u,i),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(s,e))):"ZYX"===t?(this._y=Math.asin(-r(u,-1,1)),.99999>Math.abs(u)?(this._x=Math.atan2(h,i),this._z=Math.atan2(s,e)):(this._x=0,this._z=Math.atan2(-o,c))):"YZX"===t?(this._z=Math.asin(r(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-u,e)):(this._x=0,this._y=Math.atan2(a,i))):"XZY"===t?(this._z=Math.asin(-r(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,e)):(this._x=Math.atan2(-l,i),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new i;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new o;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new a(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(_.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask=this.mask|1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var lo=0;w.DefaultUp=new a(0,1,0),w.DefaultMatrixAutoUpdate=!0,w.prototype=Object.assign(Object.create(n.prototype),{constructor:w,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new o;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new o;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new a(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new a(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new a(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new a;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new a(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new a(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new a(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new i;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new o,t=new i,n=new a,r=new a;return function(i,o,a){i.isVector3?n.copy(i):n.set(i,o,a),i=this.parent,this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera?t.lookAt(r,n,this.up):t.lookAt(n,r,this.up),this.quaternion.setFromRotationMatrix(t),i&&(t.extractRotation(i.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}return t=this.children.indexOf(e),-1!==t&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(t,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new a),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new a,t=new a;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new o),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new a,t=new o;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new a),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(e=this.children,t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)},toJSON:function(e){function t(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}function n(e){var t,n=[];for(t in e){var r=e[t];delete r.metadata,n.push(r)}return n}var r=void 0===e||"string"===typeof e,i={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){o.geometry=t(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes)if(a=a.shapes,Array.isArray(a))for(var s=0,c=a.length;s<c;s++)t(e.shapes,a[s]);else t(e.shapes,a)}if(void 0!==this.material)if(Array.isArray(this.material)){for(a=[],s=0,c=this.material.length;s<c;s++)a.push(t(e.materials,this.material[s]));o.material=a}else o.material=t(e.materials,this.material);if(0<this.children.length)for(o.children=[],s=0;s<this.children.length;s++)o.children.push(this.children[s].toJSON(e).object);if(r){r=n(e.geometries),s=n(e.materials),c=n(e.textures);var l=n(e.images);a=n(e.shapes),0<r.length&&(i.geometries=r),0<s.length&&(i.materials=s),0<c.length&&(i.textures=c),0<l.length&&(i.images=l),0<a.length&&(i.shapes=a)}return i.object=o,i},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(t=0;t<e.children.length;t++)this.add(e.children[t].clone());return this}}),E.prototype=Object.assign(Object.create(w.prototype),{constructor:E,isCamera:!0,copy:function(e,t){return w.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new a),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){w.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),M.prototype=Object.assign(Object.create(E.prototype),{constructor:M,isOrthographicCamera:!0,copy:function(e,t){return E.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e;if(n+=e,e=r+t,t=r-t,null!==this.view&&this.view.enabled){n=this.zoom/(this.view.width/this.view.fullWidth),t=this.zoom/(this.view.height/this.view.fullHeight);var o=(this.right-this.left)/this.view.width;r=(this.top-this.bottom)/this.view.height,i+=this.view.offsetX/n*o,n=i+this.view.width/n*o,e-=this.view.offsetY/t*r,t=e-this.view.height/t*r}this.projectionMatrix.makeOrthographic(i,n,e,t,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return e=w.prototype.toJSON.call(this,e),e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Object.assign(T.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var uo=0;S.prototype=Object.assign(Object.create(n.prototype),{constructor:S,isGeometry:!0,applyMatrix:function(e){for(var t=(new s).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(n=0,r=this.faces.length;n<r;n++){e=this.faces[n],e.normal.applyMatrix3(t).normalize();for(var i=0,o=e.vertexNormals.length;i<o;i++)e.vertexNormals[i].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(){var e=new i;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new i;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new i;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new i;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new i;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new w;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,r,i){i=new T(e,t,r,void 0!==c?[p[e].clone(),p[t].clone(),p[r].clone()]:[],void 0!==l?[n.colors[e].clone(),n.colors[t].clone(),n.colors[r].clone()]:[],i),n.faces.push(i),void 0!==u&&n.faceVertexUvs[0].push([d[e].clone(),d[t].clone(),d[r].clone()]),void 0!==h&&n.faceVertexUvs[1].push([f[e].clone(),f[t].clone(),f[r].clone()])}var n=this,i=null!==e.index?e.index.array:void 0,o=e.attributes,s=o.position.array,c=void 0!==o.normal?o.normal.array:void 0,l=void 0!==o.color?o.color.array:void 0,u=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var p=[],d=[],f=[],m=o=0;o<s.length;o+=3,m+=2)n.vertices.push(new a(s[o],s[o+1],s[o+2])),void 0!==c&&p.push(new a(c[o],c[o+1],c[o+2])),void 0!==l&&n.colors.push(new v(l[o],l[o+1],l[o+2])),void 0!==u&&d.push(new r(u[m],u[m+1])),void 0!==h&&f.push(new r(h[m],h[m+1]));var g=e.groups;if(0<g.length)for(o=0;o<g.length;o++){s=g[o];var y=s.start,x=s.count;for(m=y,y+=x;m<y;m+=3)void 0!==i?t(i[m],i[m+1],i[m+2],s.materialIndex):t(m,m+1,m+2,s.materialIndex)}else if(void 0!==i)for(o=0;o<i.length;o+=3)t(i[o],i[o+1],i[o+2]);else for(o=0;o<s.length/3;o+=3)t(o,o+1,o+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new a;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius;t=0===t?1:1/t;var n=new i;return n.set(t,0,0,-t*e.x,0,t,0,-t*e.y,0,0,t,-t*e.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var e=new a,t=new a,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],s=this.vertices[i.b];e.subVectors(this.vertices[i.c],s),t.subVectors(o,s),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,n=Array(this.vertices.length),r=0;for(t=this.vertices.length;r<t;r++)n[r]=new a;if(e){var i=new a,o=new a;for(e=0,r=this.faces.length;e<r;e++){t=this.faces[e];var s=this.vertices[t.a],c=this.vertices[t.b],l=this.vertices[t.c];i.subVectors(l,c),o.subVectors(s,c),i.cross(o),n[t.a].add(i),n[t.b].add(i),n[t.c].add(i)}}else for(this.computeFaceNormals(),e=0,r=this.faces.length;e<r;e++)t=this.faces[e],n[t.a].add(t.normal),n[t.b].add(t.normal),n[t.c].add(t.normal);for(r=0,t=this.vertices.length;r<t;r++)n[r].normalize();for(e=0,r=this.faces.length;e<r;e++)t=this.faces[e],s=t.vertexNormals,3===s.length?(s[0].copy(n[t.a]),s[1].copy(n[t.b]),s[2].copy(n[t.c])):(s[0]=n[t.a].clone(),s[1]=n[t.b].clone(),s[2]=n[t.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e;this.computeFaceNormals();var t=0;for(e=this.faces.length;t<e;t++){var n=this.faces[t],r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n=0;for(t=this.faces.length;n<t;n++){var r=this.faces[n];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);var i=0;for(e=r.vertexNormals.length;i<e;i++)r.__originalVertexNormals[i]?r.__originalVertexNormals[i].copy(r.vertexNormals[i]):r.__originalVertexNormals[i]=r.vertexNormals[i].clone()}var o=new S;for(o.faces=this.faces,i=0,e=this.morphTargets.length;i<e;i++){if(!this.morphNormals[i]){this.morphNormals[i]={},this.morphNormals[i].faceNormals=[],this.morphNormals[i].vertexNormals=[],r=this.morphNormals[i].faceNormals;var s=this.morphNormals[i].vertexNormals;for(n=0,t=this.faces.length;n<t;n++){var c=new a,l={a:new a,b:new a,c:new a};r.push(c),s.push(l)}}for(s=this.morphNormals[i],o.vertices=this.morphTargets[i].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,t=this.faces.length;n<t;n++)r=this.faces[n],c=s.faceNormals[n],l=s.vertexNormals[n],c.copy(r.normal),l.a.copy(r.vertexNormals[0]),l.b.copy(r.vertexNormals[1]),l.c.copy(r.vertexNormals[2])}for(n=0,t=this.faces.length;n<t;n++)r=this.faces[n],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new d),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new f),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,c=this.faces,l=e.faces,u=this.faceVertexUvs[0],h=e.faceVertexUvs[0],p=this.colors,d=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new s).getNormalMatrix(t)),e=0;for(var f=a.length;e<f;e++){var m=a[e].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(e=0,f=d.length;e<f;e++)p.push(d[e].clone());for(e=0,f=l.length;e<f;e++){a=l[e];var g=a.vertexNormals;for(d=a.vertexColors,p=new T(a.a+i,a.b+i,a.c+i),p.normal.copy(a.normal),void 0!==r&&p.normal.applyMatrix3(r).normalize(),t=0,o=g.length;t<o;t++)m=g[t].clone(),void 0!==r&&m.applyMatrix3(r).normalize(),p.vertexNormals.push(m);for(p.color.copy(a.color),t=0,o=d.length;t<o;t++)m=d[t],p.vertexColors.push(m.clone());p.materialIndex=a.materialIndex+n,c.push(p)}for(e=0,f=h.length;e<f;e++)if(n=h[e],r=[],void 0!==n){for(t=0,o=n.length;t<o;t++)r.push(n[t].clone());u.push(r)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t={},n=[],r=[],i=Math.pow(10,4),o=0;for(e=this.vertices.length;o<e;o++){var a=this.vertices[o];a=Math.round(a.x*i)+"_"+Math.round(a.y*i)+"_"+Math.round(a.z*i),void 0===t[a]?(t[a]=o,n.push(this.vertices[o]),r[o]=n.length-1):r[o]=r[t[a]]}for(t=[],o=0,e=this.faces.length;o<e;o++)for(i=this.faces[o],i.a=r[i.a],i.b=r[i.b],i.c=r[i.c],i=[i.a,i.b,i.c],a=0;3>a;a++)if(i[a]===i[(a+1)%3]){t.push(o);break}for(o=t.length-1;0<=o;o--)for(i=t[o],this.faces.splice(i,1),r=0,e=this.faceVertexUvs.length;r<e;r++)this.faceVertexUvs[r].splice(i,1);return o=this.vertices.length-n.length,this.vertices=n,o},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new a(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]),n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]?l[t]:(l[t]=c.length/3,c.push(e.x,e.y,e.z),l[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==h[t]?h[t]:(h[t]=u.length,u.push(e.getHex()),h[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]?d[t]:(d[t]=p.length/2,p.push(e.x,e.y),d[t])}var i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o,a=this.parameters;for(o in a)void 0!==a[o]&&(i[o]=a[o]);return i}for(a=[],o=0;o<this.vertices.length;o++){var s=this.vertices[o];a.push(s.x,s.y,s.z)}s=[];var c=[],l={},u=[],h={},p=[],d={};for(o=0;o<this.faces.length;o++){var f=this.faces[o],m=void 0!==this.faceVertexUvs[0][o],g=0<f.normal.length(),v=0<f.vertexNormals.length,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,x=0<f.vertexColors.length,b=0;b=e(b,0,0),b=e(b,1,!0),b=e(b,2,!1),b=e(b,3,m),b=e(b,4,g),b=e(b,5,v),b=e(b,6,y),b=e(b,7,x),s.push(b),s.push(f.a,f.b,f.c),s.push(f.materialIndex),m&&(m=this.faceVertexUvs[0][o],s.push(r(m[0]),r(m[1]),r(m[2]))),g&&s.push(t(f.normal)),v&&(g=f.vertexNormals,s.push(t(g[0]),t(g[1]),t(g[2]))),y&&s.push(n(f.color)),x&&(f=f.vertexColors,s.push(n(f[0]),n(f[1]),n(f[2])))}return i.data={},i.data.vertices=a,i.data.normals=c,0<u.length&&(i.data.colors=u),0<p.length&&(i.data.uvs=[p]),i.data.faces=s,i},clone:function(){return(new S).copy(this)},copy:function(e){var t,n,r;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var i=e.vertices,o=0;for(t=i.length;o<t;o++)this.vertices.push(i[o].clone());for(i=e.colors,o=0,t=i.length;o<t;o++)this.colors.push(i[o].clone());for(i=e.faces,o=0,t=i.length;o<t;o++)this.faces.push(i[o].clone());for(o=0,t=e.faceVertexUvs.length;o<t;o++){var a=e.faceVertexUvs[o];for(void 0===this.faceVertexUvs[o]&&(this.faceVertexUvs[o]=[]),i=0,n=a.length;i<n;i++){var s=a[i],c=[],l=0;for(r=s.length;l<r;l++)c.push(s[l].clone());this.faceVertexUvs[o].push(c)}}for(l=e.morphTargets,o=0,t=l.length;o<t;o++){if(r={},r.name=l[o].name,void 0!==l[o].vertices)for(r.vertices=[],i=0,n=l[o].vertices.length;i<n;i++)r.vertices.push(l[o].vertices[i].clone());if(void 0!==l[o].normals)for(r.normals=[],i=0,n=l[o].normals.length;i<n;i++)r.normals.push(l[o].normals[i].clone());this.morphTargets.push(r)}for(l=e.morphNormals,o=0,t=l.length;o<t;o++){if(r={},void 0!==l[o].vertexNormals)for(r.vertexNormals=[],i=0,n=l[o].vertexNormals.length;i<n;i++)a=l[o].vertexNormals[i],s={},s.a=a.a.clone(),s.b=a.b.clone(),s.c=a.c.clone(),r.vertexNormals.push(s);if(void 0!==l[o].faceNormals)for(r.faceNormals=[],i=0,n=l[o].faceNormals.length;i<n;i++)r.faceNormals.push(l[o].faceNormals[i].clone());this.morphNormals.push(r)}for(i=e.skinWeights,o=0,t=i.length;o<t;o++)this.skinWeights.push(i[o].clone());for(i=e.skinIndices,o=0,t=i.length;o<t;o++)this.skinIndices.push(i[o].clone());for(i=e.lineDistances,o=0,t=i.length;o<t;o++)this.lineDistances.push(i[o]);return o=e.boundingBox,null!==o&&(this.boundingBox=o.clone()),o=e.boundingSphere,null!==o&&(this.boundingSphere=o.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(A.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(A.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new v),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,o=e.length;i<o;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new r),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new a),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new l),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),C.prototype=Object.create(A.prototype),C.prototype.constructor=C,R.prototype=Object.create(A.prototype),R.prototype.constructor=R,L.prototype=Object.create(A.prototype),L.prototype.constructor=L,P.prototype=Object.create(A.prototype),P.prototype.constructor=P,I.prototype=Object.create(A.prototype),I.prototype.constructor=I,O.prototype=Object.create(A.prototype),O.prototype.constructor=O,N.prototype=Object.create(A.prototype),N.prototype.constructor=N,D.prototype=Object.create(A.prototype),D.prototype.constructor=D,U.prototype=Object.create(A.prototype),U.prototype.constructor=U,Object.assign(F.prototype,{computeGroups:function(e){var t=[],n=void 0;e=e.faces;for(var r=0;r<e.length;r++){var i=e[r];if(i.materialIndex!==n){n=i.materialIndex,void 0!==o&&(o.count=3*r-o.start,t.push(o));var o={start:3*r,materialIndex:n}}}void 0!==o&&(o.count=3*r-o.start,t.push(o)),this.groups=t},fromGeometry:function(e){var t=e.faces,n=e.vertices,i=e.faceVertexUvs,o=i[0]&&0<i[0].length,a=i[1]&&0<i[1].length,s=e.morphTargets,c=s.length;if(0<c){for(var l=[],u=0;u<c;u++)l[u]={name:s[u].name,data:[]};this.morphTargets.position=l}var h=e.morphNormals,p=h.length;if(0<p){var d=[];for(u=0;u<p;u++)d[u]={name:h[u].name,data:[]};this.morphTargets.normal=d}var f=e.skinIndices,m=e.skinWeights,g=f.length===n.length,v=m.length===n.length;for(0<n.length&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),u=0;u<t.length;u++){var y=t[u];this.vertices.push(n[y.a],n[y.b],n[y.c]);var x=y.vertexNormals;for(3===x.length?this.normals.push(x[0],x[1],x[2]):(x=y.normal,this.normals.push(x,x,x)),x=y.vertexColors,3===x.length?this.colors.push(x[0],x[1],x[2]):(x=y.color,this.colors.push(x,x,x)),!0===o&&(x=i[0][u],void 0!==x?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new r,new r,new r))),!0===a&&(x=i[1][u],void 0!==x?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new r,new r,new r))),x=0;x<c;x++){var b=s[x].vertices;l[x].data.push(b[y.a],b[y.b],b[y.c])}for(x=0;x<p;x++)b=h[x].vertexNormals[u],d[x].data.push(b.a,b.b,b.c);g&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var ho=1;k.prototype=Object.assign(Object.create(n.prototype),{constructor:k,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<B(e)?N:I)(e,1):this.index=e},addAttribute:function(e,t,n){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new A(t,n)))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;return void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0),t=this.attributes.normal,void 0!==t&&((new s).getNormalMatrix(e).applyToBufferAttribute(t),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new i;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new i;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new i;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new i;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new i;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new w;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new a;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){e=new D(3*t.vertices.length,3);var n=new D(3*t.colors.length,3);this.addAttribute("position",e.copyVector3sArray(t.vertices)),this.addAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length&&(e=new D(t.lineDistances.length,1),this.addAttribute("lineDistance",e.copyArray(t.lineDistances))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new D(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}return!0===t.verticesNeedUpdate&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new F).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);this.addAttribute("position",new A(t,3).copyVector3sArray(e.vertices)),0<e.normals.length&&(t=new Float32Array(3*e.normals.length),this.addAttribute("normal",new A(t,3).copyVector3sArray(e.normals))),0<e.colors.length&&(t=new Float32Array(3*e.colors.length),this.addAttribute("color",new A(t,3).copyColorsArray(e.colors))),0<e.uvs.length&&(t=new Float32Array(2*e.uvs.length),this.addAttribute("uv",new A(t,2).copyVector2sArray(e.uvs))),0<e.uvs2.length&&(t=new Float32Array(2*e.uvs2.length),this.addAttribute("uv2",new A(t,2).copyVector2sArray(e.uvs2))),this.groups=e.groups;for(var n in e.morphTargets){t=[];for(var r=e.morphTargets[n],i=0,o=r.length;i<o;i++){var a=r[i],s=new D(3*a.data.length,3);s.name=a.name,t.push(s.copyVector3sArray(a.data))}this.morphAttributes[n]=t}return 0<e.skinIndices.length&&(n=new D(4*e.skinIndices.length,4),this.addAttribute("skinIndex",n.copyVector4sArray(e.skinIndices))),0<e.skinWeights.length&&(n=new D(4*e.skinWeights.length,4),this.addAttribute("skinWeight",n.copyVector4sArray(e.skinWeights))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new d);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new d,t=new a;return function(){null===this.boundingSphere&&(this.boundingSphere=new f);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new A(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;r=t.normal.array;var s=new a,c=new a,l=new a,u=new a,h=new a;if(e){var p=e.array;for(i=0,o=e.count;i<o;i+=3){e=3*p[i+0];var d=3*p[i+1],f=3*p[i+2];s.fromArray(n,e),c.fromArray(n,d),l.fromArray(n,f),u.subVectors(l,c),h.subVectors(s,c),u.cross(h),r[e]+=u.x,r[e+1]+=u.y,r[e+2]+=u.z,r[d]+=u.x,r[d+1]+=u.y,r[d+2]+=u.z,r[f]+=u.x,r[f+1]+=u.y,r[f+2]+=u.z}}else for(i=0,o=n.length;i<o;i+=9)s.fromArray(n,i),c.fromArray(n,i+3),l.fromArray(n,i+6),u.subVectors(l,c),h.subVectors(s,c),u.cross(h),r[i]=u.x,r[i+1]=u.y,r[i+2]=u.z,r[i+3]=u.x,r[i+4]=u.y,r[i+5]=u.z,r[i+6]=u.x,r[i+7]=u.y,r[i+8]=u.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n,r=this.attributes;for(n in r)if(void 0!==e.attributes[n]){var i=r[n].array,o=e.attributes[n],a=o.array,s=0;for(o=o.itemSize*t;s<a.length;s++,o++)i[o]=a[s]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new a;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e,t=new k,n=this.index.array,r=this.attributes;for(e in r){var i=r[e],o=i.array,a=i.itemSize,s=new o.constructor(n.length*a),c=0;i=0;for(var l=n.length;i<l;i++)for(var u=n[i]*a,h=0;h<a;h++)s[c++]=o[u++];t.addAttribute(e,new A(s,a))}for(n=this.groups,i=0,l=n.length;i<l;i++)r=n[i],t.addGroup(r.start,r.count,r.materialIndex);return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),0<Object.keys(this.userData).length&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};var n=this.index;null!==n&&(t=Array.prototype.slice.call(n.array),e.data.index={type:n.array.constructor.name,array:t}),n=this.attributes;for(i in n){var r=n[i];t=Array.prototype.slice.call(r.array),e.data.attributes[i]={itemSize:r.itemSize,type:r.array.constructor.name,array:t,normalized:r.normalized}}var i=this.groups;return 0<i.length&&(e.data.groups=JSON.parse(JSON.stringify(i))),i=this.boundingSphere,null!==i&&(e.data.boundingSphere={center:i.center.toArray(),radius:i.radius}),e},clone:function(){return(new k).copy(this)},copy:function(e){var t;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone()),n=e.attributes;for(a in n)this.addAttribute(a,n[a].clone());var r=e.morphAttributes;for(a in r){var i=[],o=r[a];for(n=0,t=o.length;n<t;n++)i.push(o[n].clone());this.morphAttributes[a]=i}var a=e.groups;for(n=0,t=a.length;n<t;n++)r=a[n],this.addGroup(r.start,r.count,r.materialIndex);return a=e.boundingBox,null!==a&&(this.boundingBox=a.clone()),a=e.boundingSphere,null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),H.prototype=Object.create(S.prototype),H.prototype.constructor=H,G.prototype=Object.create(k.prototype),G.prototype.constructor=G,z.prototype=Object.create(S.prototype),z.prototype.constructor=z,j.prototype=Object.create(k.prototype),j.prototype.constructor=j;var po=0;V.prototype=Object.assign(Object.create(n.prototype),{constructor:V,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0===n)console.warn("THREE.Material: '"+t+"' parameter is undefined.");else if("shading"===t)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else{var r=this[t];void 0===r?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]="overdraw"===t?Number(n):n}}},toJSON:function(e){function t(e){var t,n=[];for(t in e){var r=e[t];delete r.metadata,n.push(r)}return n}var n=void 0===e||"string"===typeof e;n&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),0!==this.side&&(r.side=this.side),0!==this.vertexColors&&(r.vertexColors=this.vertexColors),1>this.opacity&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),0<this.alphaTest&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),1<this.wireframeLinewidth&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n&&(n=t(e.textures),e=t(e.images),0<n.length&&(r.textures=n),0<e.length&&(r.images=e)),r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),W.prototype=Object.create(V.prototype),W.prototype.constructor=W,W.prototype.isMeshBasicMaterial=!0,W.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},X.prototype=Object.create(V.prototype),X.prototype.constructor=X,X.prototype.isShaderMaterial=!0,X.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=oo.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},X.prototype.toJSON=function(e){var t=V.prototype.toJSON.call(this,e);t.uniforms={};for(var n in this.uniforms){var r=this.uniforms[n].value;t.uniforms[n]=r.isTexture?{type:"t",value:r.toJSON(e).uuid}:r.isColor?{type:"c",value:r.getHex()}:r.isVector2?{type:"v2",value:r.toArray()}:r.isVector3?{type:"v3",value:r.toArray()}:r.isVector4?{type:"v4",value:r.toArray()}:r.isMatrix4?{type:"m4",value:r.toArray()}:{value:r}}return 0<Object.keys(this.defines).length&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(q.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new a),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new a;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new a),t.subVectors(e,this.origin),e=t.dot(this.direction),0>e?t.copy(this.origin):t.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new a;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return 0>n?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new a,t=new a,n=new a;return function(r,i,o,a){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s=.5*r.distanceTo(i),c=-this.direction.dot(t),l=n.dot(this.direction),u=-n.dot(t),h=n.lengthSq(),p=Math.abs(1-c*c);if(0<p){r=c*u-l,i=c*l-u;var d=s*p;0<=r?i>=-d?i<=d?(s=1/p,r*=s,i*=s,c=r*(r+c*i+2*l)+i*(c*r+i+2*u)+h):(i=s,r=Math.max(0,-(c*i+l)),c=-r*r+i*(i+2*u)+h):(i=-s,r=Math.max(0,-(c*i+l)),c=-r*r+i*(i+2*u)+h):i<=-d?(r=Math.max(0,-(-c*s+l)),i=0<r?-s:Math.min(Math.max(-s,-u),s),c=-r*r+i*(i+2*u)+h):i<=d?(r=0,i=Math.min(Math.max(-s,-u),s),c=i*(i+2*u)+h):(r=Math.max(0,-(c*s+l)),i=0<r?s:Math.min(Math.max(-s,-u),s),c=-r*r+i*(i+2*u)+h)}else i=0<c?-s:s,r=Math.max(0,-(c*i+l)),c=-r*r+i*(i+2*u)+h;return o&&o.copy(this.direction).multiplyScalar(r).add(this.origin),a&&a.copy(t).multiplyScalar(i).add(e),c}}(),intersectSphere:function(){var e=new a;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r;return t=t.radius*t.radius,i>t?null:(t=Math.sqrt(t-i),i=r-t,r+=t,0>i&&0>r?null:0>i?this.at(r,n):this.at(i,n))}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0===t?0===e.distanceToPoint(this.origin)?0:null:(e=-(this.origin.dot(e.normal)+e.constant)/t,0<=e?e:null)},intersectPlane:function(e,t){return e=this.distanceToPlane(e),null===e?null:this.at(e,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t},intersectBox:function(e,t){var n=1/this.direction.x,r=1/this.direction.y,i=1/this.direction.z,o=this.origin;if(0<=n){var a=(e.min.x-o.x)*n;n*=e.max.x-o.x}else a=(e.max.x-o.x)*n,n*=e.min.x-o.x;if(0<=r){var s=(e.min.y-o.y)*r;r*=e.max.y-o.y}else s=(e.max.y-o.y)*r,r*=e.min.y-o.y;return a>r||s>n?null:((s>a||a!==a)&&(a=s),(r<n||n!==n)&&(n=r),0<=i?(s=(e.min.z-o.z)*i,e=(e.max.z-o.z)*i):(s=(e.max.z-o.z)*i,e=(e.min.z-o.z)*i),a>e||s>n?null:((s>a||a!==a)&&(a=s),(e<n||n!==n)&&(n=e),0>n?null:this.at(0<=a?a:n,t)))},intersectsBox:function(){var e=new a;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new a,t=new a,n=new a,r=new a;return function(i,o,a,s,c){if(t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n),0<(o=this.direction.dot(r))){if(s)return null;s=1}else{if(!(0>o))return null;s=-1,o=-o}return e.subVectors(this.origin,i),0>(i=s*this.direction.dot(n.crossVectors(e,n)))?null:0>(a=s*this.direction.dot(t.cross(e)))||i+a>o?null:(i=-s*e.dot(r),0>i?null:this.at(i/o,c))}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Y,{getNormal:function(){var e=new a;return function(t,n,r,i){return void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new a),i.subVectors(r,n),e.subVectors(t,n),i.cross(e),t=i.lengthSq(),0<t?i.multiplyScalar(1/Math.sqrt(t)):i.set(0,0,0)}}(),getBarycoord:function(){var e=new a,t=new a,n=new a;return function(r,i,o,s,c){e.subVectors(s,i),t.subVectors(o,i),n.subVectors(r,i),r=e.dot(e),i=e.dot(t),o=e.dot(n);var l=t.dot(t);s=t.dot(n);var u=r*l-i*i;return void 0===c&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),c=new a),0===u?c.set(-2,-1,-1):(u=1/u,l=(l*o-i*s)*u,r=(r*s-i*o)*u,c.set(1-l-r,r,l))}}(),containsPoint:function(){var e=new a;return function(t,n,r,i){return Y.getBarycoord(t,n,r,i,e),0<=e.x&&0<=e.y&&1>=e.x+e.y}}(),getUV:function(){var e=new a;return function(t,n,r,i,o,a,s,c){return this.getBarycoord(t,n,r,i,e),c.set(0,0),c.addScaledVector(o,e.x),c.addScaledVector(a,e.y),c.addScaledVector(s,e.z),c}}()}),Object.assign(Y.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new a,t=new a;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new a),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Y.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new a),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Y.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Y.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,n,r,i){return Y.getUV(e,this.a,this.b,this.c,t,n,r,i)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new a,t=new a,n=new a,r=new a,i=new a,o=new a;return function(s,c){void 0===c&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),c=new a);var l=this.a,u=this.b,h=this.c;e.subVectors(u,l),t.subVectors(h,l),r.subVectors(s,l);var p=e.dot(r),d=t.dot(r);if(0>=p&&0>=d)return c.copy(l);i.subVectors(s,u);var f=e.dot(i),m=t.dot(i);if(0<=f&&m<=f)return c.copy(u);var g=p*m-f*d;if(0>=g&&0<=p&&0>=f)return u=p/(p-f),c.copy(l).addScaledVector(e,u);o.subVectors(s,h),s=e.dot(o);var v=t.dot(o);return 0<=v&&s<=v?c.copy(h):0>=(p=s*d-p*v)&&0<=d&&0>=v?(g=d/(d-v),c.copy(l).addScaledVector(t,g)):0>=(d=f*v-s*m)&&0<=m-f&&0<=s-v?(n.subVectors(h,u),g=(m-f)/(m-f+(s-v)),c.copy(u).addScaledVector(n,g)):(h=1/(d+p+g),u=p*h,g*=h,c.copy(l).addScaledVector(e,u).addScaledVector(t,g))}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Z.prototype=Object.assign(Object.create(w.prototype),{constructor:Z,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return w.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var t=Object.keys(e);if(0<t.length){var n=e[t[0]];if(void 0!==n)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=n.length;e<t;e++){var r=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}}else if(void 0!==(n=e.morphTargets)&&0<n.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=n.length;e<t;e++)r=n[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e},raycast:function(){function e(e,t,n,r,i,o,a,s){return null===(1===t.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==t.side,s))?null:(x.copy(s),x.applyMatrix4(e.matrixWorld),t=n.ray.origin.distanceTo(x),t<n.near||t>n.far?null:{distance:t,point:x.clone(),object:e})}function t(t,n,i,o,a,s,h,p,d){return c.fromBufferAttribute(a,h),l.fromBufferAttribute(a,p),u.fromBufferAttribute(a,d),(t=e(t,n,i,o,c,l,u,y))&&(s&&(m.fromBufferAttribute(s,h),g.fromBufferAttribute(s,p),v.fromBufferAttribute(s,d),t.uv=Y.getUV(y,c,l,u,m,g,v,new r)),s=new T(h,p,d),Y.getNormal(c,l,u,s.normal),t.face=s),t}var n=new i,o=new q,s=new f,c=new a,l=new a,u=new a,h=new a,p=new a,d=new a,m=new r,g=new r,v=new r,y=new a,x=new a;return function(i,a){var f=this.geometry,x=this.material,b=this.matrixWorld;if(void 0!==x&&(null===f.boundingSphere&&f.computeBoundingSphere(),s.copy(f.boundingSphere),s.applyMatrix4(b),!1!==i.ray.intersectsSphere(s)&&(n.getInverse(b),o.copy(i.ray).applyMatrix4(n),null===f.boundingBox||!1!==o.intersectsBox(f.boundingBox))))if(f.isBufferGeometry){var _=f.index,w=f.attributes.position,E=f.attributes.uv,M=f.groups;f=f.drawRange;var T;if(null!==_)if(Array.isArray(x)){var S=0;for(T=M.length;S<T;S++){var A=M[S],C=x[A.materialIndex];b=Math.max(A.start,f.start);var R=Math.min(A.start+A.count,f.start+f.count);for(A=b;A<R;A+=3){b=_.getX(A);var L=_.getX(A+1),P=_.getX(A+2);(b=t(this,C,i,o,w,E,b,L,P))&&(b.faceIndex=Math.floor(A/3),a.push(b))}}}else for(b=Math.max(0,f.start),R=Math.min(_.count,f.start+f.count),S=b,T=R;S<T;S+=3)b=_.getX(S),L=_.getX(S+1),P=_.getX(S+2),(b=t(this,x,i,o,w,E,b,L,P))&&(b.faceIndex=Math.floor(S/3),a.push(b));else if(void 0!==w)if(Array.isArray(x))for(S=0,T=M.length;S<T;S++)for(A=M[S],C=x[A.materialIndex],b=Math.max(A.start,f.start),R=Math.min(A.start+A.count,f.start+f.count),A=b;A<R;A+=3)b=A,L=A+1,P=A+2,(b=t(this,C,i,o,w,E,b,L,P))&&(b.faceIndex=Math.floor(A/3),a.push(b));else for(b=Math.max(0,f.start),R=Math.min(w.count,f.start+f.count),S=b,T=R;S<T;S+=3)b=S,L=S+1,P=S+2,(b=t(this,x,i,o,w,E,b,L,P))&&(b.faceIndex=Math.floor(S/3),a.push(b))}else if(f.isGeometry)for(w=Array.isArray(x),E=f.vertices,M=f.faces,b=f.faceVertexUvs[0],0<b.length&&(_=b),A=0,R=M.length;A<R;A++)if(L=M[A],void 0!==(b=w?x[L.materialIndex]:x)){if(S=E[L.a],T=E[L.b],C=E[L.c],!0===b.morphTargets){P=f.morphTargets;var I=this.morphTargetInfluences;c.set(0,0,0),l.set(0,0,0),u.set(0,0,0);for(var O=0,N=P.length;O<N;O++){var D=I[O];if(0!==D){var U=P[O].vertices;c.addScaledVector(h.subVectors(U[L.a],S),D),l.addScaledVector(p.subVectors(U[L.b],T),D),u.addScaledVector(d.subVectors(U[L.c],C),D)}}c.add(S),l.add(T),u.add(C),S=c,T=l,C=u}(b=e(this,b,i,o,S,T,C,y))&&(_&&_[A]&&(P=_[A],m.copy(P[0]),g.copy(P[1]),v.copy(P[2]),b.uv=Y.getUV(y,S,T,C,m,g,v,new r)),b.face=L,b.faceIndex=A,a.push(b))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),se.prototype=Object.create(c.prototype),se.prototype.constructor=se,se.prototype.isCubeTexture=!0,Object.defineProperty(se.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var fo=new c,mo=new se,go=[],vo=[],yo=new Float32Array(16),xo=new Float32Array(9),bo=new Float32Array(4);Be.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),ue(t,e)},ke.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var _o=/([\w\d_]+)(\])?(\[|\.)?/g;He.prototype.setValue=function(e,t,n){void 0!==(t=this.map[t])&&t.setValue(e,n,this.renderer)},He.prototype.setOptional=function(e,t,n){void 0!==(t=t[n])&&this.setValue(e,n,t)},He.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},He.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var wo=0,Eo=0;ht.prototype=Object.create(V.prototype),ht.prototype.constructor=ht,ht.prototype.isMeshDepthMaterial=!0,ht.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},pt.prototype=Object.create(V.prototype),pt.prototype.constructor=pt,pt.prototype.isMeshDistanceMaterial=!0,pt.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},vt.prototype=Object.assign(Object.create(w.prototype),{constructor:vt,isGroup:!0}),yt.prototype=Object.assign(Object.create(E.prototype),{constructor:yt,isPerspectiveCamera:!0,copy:function(e,t){return E.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e,this.fov=2*to.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*to.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*to.RAD2DEG*Math.atan(Math.tan(.5*to.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*to.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}o=this.filmOffset,0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return e=w.prototype.toJSON.call(this,e),e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),xt.prototype=Object.assign(Object.create(yt.prototype),{constructor:xt,isArrayCamera:!0}),Et.prototype.isFogExp2=!0,Et.prototype.clone=function(){return new Et(this.color,this.density)},Et.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Mt.prototype.isFog=!0,Mt.prototype.clone=function(){return new Mt(this.color,this.near,this.far)},Mt.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Tt.prototype=Object.assign(Object.create(w.prototype),{constructor:Tt,copy:function(e,t){return w.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=w.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Object.defineProperty(St.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(St.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(At.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(At.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),Ct.prototype=Object.create(V.prototype),Ct.prototype.constructor=Ct,Ct.prototype.isSpriteMaterial=!0,Ct.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var Mo;Rt.prototype=Object.assign(Object.create(w.prototype),{constructor:Rt,isSprite:!0,raycast:function(){function e(e,t,n,r,i,o){s.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(c.x=o*s.x-i*s.y,c.y=i*s.x+o*s.y):c.copy(s),e.copy(t),e.x+=c.x,e.y+=c.y,e.applyMatrix4(l)}var t=new a,n=new a,o=new a,s=new r,c=new r,l=new i,u=new a,h=new a,p=new a,d=new r,f=new r,m=new r;return function(i,a){n.setFromMatrixScale(this.matrixWorld),l.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),o.setFromMatrixPosition(this.modelViewMatrix);var s=this.material.rotation;if(0!==s)var c=Math.cos(s),g=Math.sin(s);s=this.center,e(u.set(-.5,-.5,0),o,s,n,g,c),e(h.set(.5,-.5,0),o,s,n,g,c),e(p.set(.5,.5,0),o,s,n,g,c),d.set(0,0),f.set(1,0),m.set(1,1);var v=i.ray.intersectTriangle(u,h,p,!1,t);null===v&&(e(h.set(-.5,.5,0),o,s,n,g,c),f.set(0,1),null===(v=i.ray.intersectTriangle(u,p,h,!1,t)))||(g=i.ray.origin.distanceTo(t))<i.near||g>i.far||a.push({distance:g,point:t.clone(),uv:Y.getUV(t,u,h,p,d,f,m,new r),face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return w.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Lt.prototype=Object.assign(Object.create(w.prototype),{constructor:Lt,copy:function(e){w.prototype.copy.call(this,e,!1),e=e.levels;for(var t=0,n=e.length;t<n;t++){var r=e[t];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new a;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new a,t=new a;return function(n){var r=this.levels;if(1<r.length){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld),n=e.distanceTo(t),r[0].object.visible=!0;for(var i=1,o=r.length;i<o&&n>=r[i].distance;i++)r[i-1].object.visible=!1,r[i].object.visible=!0;for(;i<o;i++)r[i].object.visible=!1}}}(),toJSON:function(e){e=w.prototype.toJSON.call(this,e),e.object.levels=[];for(var t=this.levels,n=0,r=t.length;n<r;n++){var i=t[n];e.object.levels.push({object:i.object.uuid,distance:i.distance})}return e}}),Object.assign(Pt.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new i;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n=0;for(t=this.bones.length;n<t;n++)(e=this.bones[n])&&e.matrixWorld.getInverse(this.boneInverses[n]);for(n=0,t=this.bones.length;n<t;n++)(e=this.bones[n])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new i,t=new i;return function(){for(var n=this.bones,r=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++)e.multiplyMatrices(n[a]?n[a].matrixWorld:t,r[a]),e.toArray(i,16*a);void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Pt(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),It.prototype=Object.assign(Object.create(w.prototype),{constructor:It,isBone:!0}),Ot.prototype=Object.assign(Object.create(Z.prototype),{constructor:Ot,isSkinnedMesh:!0,initBones:function(){var e,t=[];if(this.geometry&&void 0!==this.geometry.bones){var n=0;for(e=this.geometry.bones.length;n<e;n++){var r=this.geometry.bones[n],i=new It;t.push(i),i.name=r.name,i.position.fromArray(r.pos),i.quaternion.fromArray(r.rotq),void 0!==r.scl&&i.scale.fromArray(r.scl)}for(n=0,e=this.geometry.bones.length;n<e;n++)r=this.geometry.bones[n],-1!==r.parent&&null!==r.parent&&void 0!==t[r.parent]?t[r.parent].add(t[n]):this.add(t[n])}return this.updateMatrixWorld(!0),t},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e],n=1/t.manhattanLength();1/0!==n?t.multiplyScalar(n):t.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){t=new l;var r=this.geometry.attributes.skinWeight;for(e=0;e<r.count;e++)t.x=r.getX(e),t.y=r.getY(e),t.z=r.getZ(e),t.w=r.getW(e),n=1/t.manhattanLength(),1/0!==n?t.multiplyScalar(n):t.set(1,0,0,0),r.setXYZW(e,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(e){Z.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Nt.prototype=Object.create(V.prototype),Nt.prototype.constructor=Nt,Nt.prototype.isLineBasicMaterial=!0,Nt.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Dt.prototype=Object.assign(Object.create(w.prototype),{constructor:Dt,isLine:!0,computeLineDistances:function(){var e=new a,t=new a;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[0],o=1,a=r.count;o<a;o++)e.fromBufferAttribute(r,o-1),t.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=e.distanceTo(t);n.addAttribute("lineDistance",new D(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry)for(r=n.vertices,i=n.lineDistances,i[0]=0,o=1,a=r.length;o<a;o++)i[o]=i[o-1],i[o]+=r[o-1].distanceTo(r[o]);return this}}(),raycast:function(){var e=new i,t=new q,n=new f;return function(r,i){var o=r.linePrecision,s=this.geometry,c=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(c),n.radius+=o,!1!==r.ray.intersectsSphere(n)){e.getInverse(c),t.copy(r.ray).applyMatrix4(e),o/=(this.scale.x+this.scale.y+this.scale.z)/3,o*=o;var l=new a,u=new a;c=new a;var h=new a,p=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var d=s.index,f=s.attributes.position.array;if(null!==d){d=d.array,s=0;for(var m=d.length-1;s<m;s+=p){var g=d[s+1];l.fromArray(f,3*d[s]),u.fromArray(f,3*g),g=t.distanceSqToSegment(l,u,h,c),g>o||(h.applyMatrix4(this.matrixWorld),(g=r.ray.origin.distanceTo(h))<r.near||g>r.far||i.push({distance:g,point:c.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}}else for(s=0,m=f.length/3-1;s<m;s+=p)l.fromArray(f,3*s),u.fromArray(f,3*s+3),(g=t.distanceSqToSegment(l,u,h,c))>o||(h.applyMatrix4(this.matrixWorld),(g=r.ray.origin.distanceTo(h))<r.near||g>r.far||i.push({distance:g,point:c.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}else if(s.isGeometry)for(l=s.vertices,u=l.length,s=0;s<u-1;s+=p)(g=t.distanceSqToSegment(l[s],l[s+1],h,c))>o||(h.applyMatrix4(this.matrixWorld),(g=r.ray.origin.distanceTo(h))<r.near||g>r.far||i.push({distance:g,point:c.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ut.prototype=Object.assign(Object.create(Dt.prototype),{constructor:Ut,isLineSegments:!0,computeLineDistances:function(){var e=new a,t=new a;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);n.addAttribute("lineDistance",new D(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry)for(r=n.vertices,i=n.lineDistances,o=0,a=r.length;o<a;o+=2)e.copy(r[o]),t.copy(r[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);return this}}()}),Ft.prototype=Object.assign(Object.create(Dt.prototype),{constructor:Ft,isLineLoop:!0}),Bt.prototype=Object.create(V.prototype),Bt.prototype.constructor=Bt,Bt.prototype.isPointsMaterial=!0,Bt.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},kt.prototype=Object.assign(Object.create(w.prototype),{constructor:kt,isPoints:!0,raycast:function(){var e=new i,t=new q,n=new f;return function(r,i){function o(e,n){var o=t.distanceSqToPoint(e);o<h&&(t.closestPointToPoint(e,p),p.applyMatrix4(l),(e=r.ray.origin.distanceTo(p))<r.near||e>r.far||i.push({distance:e,distanceToRay:Math.sqrt(o),point:p.clone(),index:n,face:null,object:s}))}var s=this,c=this.geometry,l=this.matrixWorld,u=r.params.Points.threshold;if(null===c.boundingSphere&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(l),n.radius+=u,!1!==r.ray.intersectsSphere(n)){e.getInverse(l),t.copy(r.ray).applyMatrix4(e),u/=(this.scale.x+this.scale.y+this.scale.z)/3;var h=u*u;u=new a;var p=new a;if(c.isBufferGeometry){var d=c.index;if(c=c.attributes.position.array,null!==d){var f=d.array;d=0;for(var m=f.length;d<m;d++){var g=f[d];u.fromArray(c,3*g),o(u,g)}}else for(d=0,f=c.length/3;d<f;d++)u.fromArray(c,3*d),o(u,d)}else for(u=c.vertices,d=0,f=u.length;d<f;d++)o(u[d],d)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ht.prototype=Object.assign(Object.create(c.prototype),{constructor:Ht,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Gt.prototype=Object.create(c.prototype),Gt.prototype.constructor=Gt,Gt.prototype.isCompressedTexture=!0,zt.prototype=Object.create(c.prototype),zt.prototype.constructor=zt,zt.prototype.isCanvasTexture=!0,jt.prototype=Object.create(c.prototype),jt.prototype.constructor=jt,jt.prototype.isDepthTexture=!0,Vt.prototype=Object.create(k.prototype),Vt.prototype.constructor=Vt,Wt.prototype=Object.create(S.prototype),Wt.prototype.constructor=Wt,Xt.prototype=Object.create(k.prototype),Xt.prototype.constructor=Xt,qt.prototype=Object.create(S.prototype),qt.prototype.constructor=qt,Yt.prototype=Object.create(k.prototype),Yt.prototype.constructor=Yt,Zt.prototype=Object.create(S.prototype),Zt.prototype.constructor=Zt,Kt.prototype=Object.create(Yt.prototype),Kt.prototype.constructor=Kt,Jt.prototype=Object.create(S.prototype),Jt.prototype.constructor=Jt,Qt.prototype=Object.create(Yt.prototype),Qt.prototype.constructor=Qt,$t.prototype=Object.create(S.prototype),$t.prototype.constructor=$t,en.prototype=Object.create(Yt.prototype),en.prototype.constructor=en,tn.prototype=Object.create(S.prototype),tn.prototype.constructor=tn,nn.prototype=Object.create(Yt.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(S.prototype),rn.prototype.constructor=rn,on.prototype=Object.create(k.prototype),on.prototype.constructor=on,an.prototype=Object.create(S.prototype),an.prototype.constructor=an,sn.prototype=Object.create(k.prototype),sn.prototype.constructor=sn,cn.prototype=Object.create(S.prototype),cn.prototype.constructor=cn,ln.prototype=Object.create(k.prototype),ln.prototype.constructor=ln;var To={triangulate:function(e,t,n){n=n||2;var r=t&&t.length,i=r?t[0]*n:e.length,o=un(e,0,i,n,!0),a=[];if(!o)return a;var s;if(r){var c=n;r=[];var l,u=0;for(l=t.length;u<l;u++){var h=t[u]*c;h=un(e,h,u<l-1?t[u+1]*c:e.length,c,!1),h===h.next&&(h.steiner=!0),r.push(gn(h))}for(r.sort(dn),u=0;u<r.length;u++)t=r[u],c=o,(c=fn(t,c))&&(t=wn(c,t),hn(t,t.next)),o=hn(o,o.next)}if(e.length>80*n){var p=s=e[0],d=r=e[1];for(c=n;c<i;c+=n)u=e[c],t=e[c+1],u<p&&(p=u),t<d&&(d=t),u>s&&(s=u),t>r&&(r=t);s=Math.max(s-p,r-d),s=0!==s?1/s:0}return pn(o,a,n,p,d,s),a}},So={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return 0>So.area(e)},triangulateShape:function(e,t){var n=[],r=[],i=[];Sn(e),An(n,e);var o=e.length;for(t.forEach(Sn),e=0;e<t.length;e++)r.push(o),o+=t[e].length,An(n,t[e]);for(t=To.triangulate(n,r),e=0;e<t.length;e+=3)i.push(t.slice(e,e+3));return i}};Cn.prototype=Object.create(S.prototype),Cn.prototype.constructor=Cn,Cn.prototype.toJSON=function(){var e=S.prototype.toJSON.call(this);return Ln(this.parameters.shapes,this.parameters.options,e)},Rn.prototype=Object.create(k.prototype),Rn.prototype.constructor=Rn,Rn.prototype.toJSON=function(){var e=k.prototype.toJSON.call(this);return Ln(this.parameters.shapes,this.parameters.options,e)};var Ao={generateTopUV:function(e,t,n,i,o){e=t[3*i],i=t[3*i+1];var a=t[3*o];return o=t[3*o+1],[new r(t[3*n],t[3*n+1]),new r(e,i),new r(a,o)]},generateSideWallUV:function(e,t,n,i,o,a){e=t[3*n];var s=t[3*n+1];n=t[3*n+2];var c=t[3*i],l=t[3*i+1];i=t[3*i+2];var u=t[3*o],h=t[3*o+1];o=t[3*o+2];var p=t[3*a],d=t[3*a+1];return t=t[3*a+2],.01>Math.abs(s-l)?[new r(e,1-n),new r(c,1-i),new r(u,1-o),new r(p,1-t)]:[new r(s,1-n),new r(l,1-i),new r(h,1-o),new r(d,1-t)]}};Pn.prototype=Object.create(S.prototype),Pn.prototype.constructor=Pn,In.prototype=Object.create(Rn.prototype),In.prototype.constructor=In,On.prototype=Object.create(S.prototype),On.prototype.constructor=On,Nn.prototype=Object.create(k.prototype),Nn.prototype.constructor=Nn,Dn.prototype=Object.create(S.prototype),Dn.prototype.constructor=Dn,Un.prototype=Object.create(k.prototype),Un.prototype.constructor=Un,Fn.prototype=Object.create(S.prototype),Fn.prototype.constructor=Fn,Bn.prototype=Object.create(k.prototype),Bn.prototype.constructor=Bn,kn.prototype=Object.create(S.prototype),kn.prototype.constructor=kn,kn.prototype.toJSON=function(){var e=S.prototype.toJSON.call(this);return Gn(this.parameters.shapes,e)},Hn.prototype=Object.create(k.prototype),Hn.prototype.constructor=Hn,Hn.prototype.toJSON=function(){var e=k.prototype.toJSON.call(this);return Gn(this.parameters.shapes,e)},zn.prototype=Object.create(k.prototype),zn.prototype.constructor=zn,jn.prototype=Object.create(S.prototype),jn.prototype.constructor=jn,Vn.prototype=Object.create(k.prototype),Vn.prototype.constructor=Vn,Wn.prototype=Object.create(jn.prototype),Wn.prototype.constructor=Wn,Xn.prototype=Object.create(Vn.prototype),Xn.prototype.constructor=Xn,qn.prototype=Object.create(S.prototype),qn.prototype.constructor=qn,Yn.prototype=Object.create(k.prototype),Yn.prototype.constructor=Yn;var Co=Object.freeze({WireframeGeometry:Vt,ParametricGeometry:Wt,ParametricBufferGeometry:Xt,TetrahedronGeometry:Zt,TetrahedronBufferGeometry:Kt,OctahedronGeometry:Jt,OctahedronBufferGeometry:Qt,IcosahedronGeometry:$t,IcosahedronBufferGeometry:en,DodecahedronGeometry:tn,DodecahedronBufferGeometry:nn,PolyhedronGeometry:qt,PolyhedronBufferGeometry:Yt,TubeGeometry:rn,TubeBufferGeometry:on,TorusKnotGeometry:an,TorusKnotBufferGeometry:sn,TorusGeometry:cn,TorusBufferGeometry:ln,TextGeometry:Pn,TextBufferGeometry:In,SphereGeometry:On,SphereBufferGeometry:Nn,RingGeometry:Dn,RingBufferGeometry:Un,PlaneGeometry:z,PlaneBufferGeometry:j,LatheGeometry:Fn,LatheBufferGeometry:Bn,ShapeGeometry:kn,ShapeBufferGeometry:Hn,ExtrudeGeometry:Cn,ExtrudeBufferGeometry:Rn,EdgesGeometry:zn,ConeGeometry:Wn,ConeBufferGeometry:Xn,CylinderGeometry:jn,CylinderBufferGeometry:Vn,CircleGeometry:qn,CircleBufferGeometry:Yn,BoxGeometry:H,BoxBufferGeometry:G});Zn.prototype=Object.create(V.prototype),Zn.prototype.constructor=Zn,Zn.prototype.isShadowMaterial=!0,Zn.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this},Kn.prototype=Object.create(X.prototype),Kn.prototype.constructor=Kn,Kn.prototype.isRawShaderMaterial=!0,Jn.prototype=Object.create(V.prototype),Jn.prototype.constructor=Jn,Jn.prototype.isMeshStandardMaterial=!0,Jn.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Qn.prototype=Object.create(Jn.prototype),Qn.prototype.constructor=Qn,Qn.prototype.isMeshPhysicalMaterial=!0,Qn.prototype.copy=function(e){return Jn.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},$n.prototype=Object.create(V.prototype),$n.prototype.constructor=$n,$n.prototype.isMeshPhongMaterial=!0,$n.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},er.prototype=Object.create($n.prototype),er.prototype.constructor=er,er.prototype.isMeshToonMaterial=!0,er.prototype.copy=function(e){return $n.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},tr.prototype=Object.create(V.prototype),tr.prototype.constructor=tr,tr.prototype.isMeshNormalMaterial=!0,tr.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},nr.prototype=Object.create(V.prototype),nr.prototype.constructor=nr,nr.prototype.isMeshLambertMaterial=!0,nr.prototype.copy=function(e){return V.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},rr.prototype=Object.create(Nt.prototype),rr.prototype.constructor=rr,rr.prototype.isLineDashedMaterial=!0,rr.prototype.copy=function(e){return Nt.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Ro=Object.freeze({ShadowMaterial:Zn,SpriteMaterial:Ct,RawShaderMaterial:Kn,ShaderMaterial:X,PointsMaterial:Bt,MeshPhysicalMaterial:Qn,MeshStandardMaterial:Jn,MeshPhongMaterial:$n,MeshToonMaterial:er,MeshNormalMaterial:tr,MeshLambertMaterial:nr,MeshDepthMaterial:ht,MeshDistanceMaterial:pt,MeshBasicMaterial:W,LineDashedMaterial:rr,LineBasicMaterial:Nt,Material:V}),Lo={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Po=new ir,Io={};Object.assign(or.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Lo.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;if(void 0===Io[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){n=a[1];var s=!!a[2];a=a[3],a=window.decodeURIComponent(a),s&&(a=window.atob(a));try{var c=(this.responseType||"").toLowerCase();switch(c){case"arraybuffer":case"blob":var l=new Uint8Array(a.length);for(s=0;s<a.length;s++)l[s]=a.charCodeAt(s);var u="blob"===c?new Blob([l.buffer],{type:n}):l.buffer;break;case"document":u=(new DOMParser).parseFromString(a,n);break;case"json":u=JSON.parse(a);break;default:u=a}window.setTimeout(function(){t&&t(u),i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)},0)}}else{Io[e]=[],Io[e].push({onLoad:t,onProgress:n,onError:r});var h=new XMLHttpRequest;h.open("GET",e,!0),h.addEventListener("load",function(t){var n=this.response;Lo.add(e,n);var r=Io[e];if(delete Io[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(o=0,a=r.length;o<a;o++)s=r[o],s.onError&&s.onError(t);i.manager.itemEnd(e),i.manager.itemError(e)}},!1),h.addEventListener("progress",function(t){for(var n=Io[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}},!1),h.addEventListener("error",function(t){var n=Io[e];delete Io[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)},!1),h.addEventListener("abort",function(t){var n=Io[e];delete Io[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)},!1),void 0!==this.responseType&&(h.responseType=this.responseType),void 0!==this.withCredentials&&(h.withCredentials=this.withCredentials),h.overrideMimeType&&h.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(s in this.requestHeader)h.setRequestHeader(s,this.requestHeader[s]);h.send(null)}return i.manager.itemStart(e),h}Io[e].push({onLoad:t,onProgress:n,onError:r})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(ar.prototype,{load:function(e,t,n,r){var i=this,o=[],a=new Gt;a.image=o;var s=new or(this.manager);if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,l=0,u=e.length;l<u;++l)!function(l){s.load(e[l],function(e){e=i._parser(e,!0),o[l]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},6===(c+=1)&&(1===e.mipmapCount&&(a.minFilter=1006),a.format=e.format,a.needsUpdate=!0,t&&t(a))},n,r)}(l);else s.load(e,function(e){if(e=i._parser(e,!0),e.isCubemap)for(var n=e.mipmaps.length/e.mipmapCount,r=0;r<n;r++){o[r]={mipmaps:[]};for(var s=0;s<e.mipmapCount;s++)o[r].mipmaps.push(e.mipmaps[r*e.mipmapCount+s]),o[r].format=e.format,o[r].width=e.width,o[r].height=e.height}else a.image.width=e.width,a.image.height=e.height,a.mipmaps=e.mipmaps;1===e.mipmapCount&&(a.minFilter=1006),a.format=e.format,a.needsUpdate=!0,t&&t(a)},n,r);return a},setPath:function(e){return this.path=e,this}}),Object.assign(sr.prototype,{load:function(e,t,n,r){var i=this,o=new p,a=new or(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){(e=i._parser(e))&&(void 0!==e.image?o.image=e.image:void 0!==e.data&&(o.image.width=e.width,o.image.height=e.height,o.image.data=e.data),o.wrapS=void 0!==e.wrapS?e.wrapS:1001,o.wrapT=void 0!==e.wrapT?e.wrapT:1001,o.magFilter=void 0!==e.magFilter?e.magFilter:1006,o.minFilter=void 0!==e.minFilter?e.minFilter:1008,o.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(o.format=e.format),void 0!==e.type&&(o.type=e.type),void 0!==e.mipmaps&&(o.mipmaps=e.mipmaps),1===e.mipmapCount&&(o.minFilter=1006),o.needsUpdate=!0,t&&t(o,e))},n,r),o}}),Object.assign(cr.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){function i(){c.removeEventListener("load",i,!1),c.removeEventListener("error",o,!1),Lo.add(e,this),t&&t(this),a.manager.itemEnd(e)}function o(t){c.removeEventListener("load",i,!1),c.removeEventListener("error",o,!1),r&&r(t),a.manager.itemEnd(e),a.manager.itemError(e)}void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,s=Lo.get(e);if(void 0!==s)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;var c=document.createElementNS("http://www.w3.org/1999/xhtml","img");return c.addEventListener("load",i,!1),c.addEventListener("error",o,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(c.crossOrigin=this.crossOrigin),a.manager.itemStart(e),c.src=e,c},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(lr.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new se,o=new cr(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;for(n=0;n<e.length;++n)!function(n){o.load(e[n],function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}(n);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(ur.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new c,o=new cr(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){i.image=n,n=0<e.search(/\.jpe?g$/i)||0===e.search(/^data:image\/jpeg/),i.format=n?1022:1023,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(hr.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){return e=this.getUtoTmapping(e),this.getPoint(e,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;for(n.push(0),t=1;t<=e;t++){var o=this.getPoint(t/e);i+=o.distanceTo(r),n.push(i),r=o}return this.cacheArcLengths=n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n=this.getLengths(),r=n.length;t=t||e*n[r-1];for(var i,o=0,a=r-1;o<=a;)if(e=Math.floor(o+(a-o)/2),0>(i=n[e]-t))o=e+1;else{if(!(0<i)){a=e;break}a=e-1}return e=a,n[e]===t?e/(r-1):(o=n[e],(e+(t-o)/(n[e+1]-o))/(r-1))},getTangent:function(e){var t=e-1e-4;return e+=1e-4,0>t&&(t=0),1<e&&(e=1),t=this.getPoint(t),this.getPoint(e).clone().sub(t).normalize()},getTangentAt:function(e){return e=this.getUtoTmapping(e),this.getTangent(e)},computeFrenetFrames:function(e,t){var n,r=new a,o=[],s=[],c=[],l=new a,u=new i;for(n=0;n<=e;n++){var h=n/e;o[n]=this.getTangentAt(h),o[n].normalize()}s[0]=new a,c[0]=new a,n=Number.MAX_VALUE,h=Math.abs(o[0].x);var p=Math.abs(o[0].y),d=Math.abs(o[0].z);for(h<=n&&(n=h,r.set(1,0,0)),p<=n&&(n=p,r.set(0,1,0)),d<=n&&r.set(0,0,1),l.crossVectors(o[0],r).normalize(),s[0].crossVectors(o[0],l),c[0].crossVectors(o[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),c[n]=c[n-1].clone(),l.crossVectors(o[n-1],o[n]),l.length()>Number.EPSILON&&(l.normalize(),r=Math.acos(to.clamp(o[n-1].dot(o[n]),-1,1)),s[n].applyMatrix4(u.makeRotationAxis(l,r))),c[n].crossVectors(o[n],s[n]);if(!0===t)for(r=Math.acos(to.clamp(s[0].dot(s[e]),-1,1)),r/=e,0<o[0].dot(l.crossVectors(s[0],s[e]))&&(r=-r),n=1;n<=e;n++)s[n].applyMatrix4(u.makeRotationAxis(o[n],r*n)),c[n].crossVectors(o[n],s[n]);return{tangents:o,normals:s,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),pr.prototype=Object.create(hr.prototype),pr.prototype.constructor=pr,pr.prototype.isEllipseCurve=!0,pr.prototype.getPoint=function(e,t){t=t||new r;for(var n=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;0>i;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=o?0:n),!0!==this.aClockwise||o||(i=i===n?-n:i-n),n=this.aStartAngle+e*i,e=this.aX+this.xRadius*Math.cos(n);var a=this.aY+this.yRadius*Math.sin(n);return 0!==this.aRotation&&(n=Math.cos(this.aRotation),i=Math.sin(this.aRotation),o=e-this.aX,a-=this.aY,e=o*n-a*i+this.aX,a=o*i+a*n+this.aY),t.set(e,a)},pr.prototype.copy=function(e){return hr.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},pr.prototype.toJSON=function(){var e=hr.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},pr.prototype.fromJSON=function(e){return hr.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},dr.prototype=Object.create(pr.prototype),dr.prototype.constructor=dr,dr.prototype.isArcCurve=!0;var Oo=new a,No=new fr,Do=new fr,Uo=new fr;mr.prototype=Object.create(hr.prototype),mr.prototype.constructor=mr,mr.prototype.isCatmullRomCurve3=!0,mr.prototype.getPoint=function(e,t){t=t||new a;var n=this.points,r=n.length;e*=r-(this.closed?0:1);var i=Math.floor(e);if(e-=i,this.closed?i+=0<i?0:(Math.floor(Math.abs(i)/r)+1)*r:0===e&&i===r-1&&(i=r-2,e=1),this.closed||0<i)var o=n[(i-1)%r];else Oo.subVectors(n[0],n[1]).add(n[0]),o=Oo;var s=n[i%r],c=n[(i+1)%r];if(this.closed||i+2<r?n=n[(i+2)%r]:(Oo.subVectors(n[r-1],n[r-2]).add(n[r-1]),n=Oo),"centripetal"===this.curveType||"chordal"===this.curveType){var l="chordal"===this.curveType?.5:.25;r=Math.pow(o.distanceToSquared(s),l),i=Math.pow(s.distanceToSquared(c),l),l=Math.pow(c.distanceToSquared(n),l),1e-4>i&&(i=1),1e-4>r&&(r=i),1e-4>l&&(l=i),No.initNonuniformCatmullRom(o.x,s.x,c.x,n.x,r,i,l),Do.initNonuniformCatmullRom(o.y,s.y,c.y,n.y,r,i,l),Uo.initNonuniformCatmullRom(o.z,s.z,c.z,n.z,r,i,l)}else"catmullrom"===this.curveType&&(No.initCatmullRom(o.x,s.x,c.x,n.x,this.tension),Do.initCatmullRom(o.y,s.y,c.y,n.y,this.tension),Uo.initCatmullRom(o.z,s.z,c.z,n.z,this.tension));return t.set(No.calc(e),Do.calc(e),Uo.calc(e)),t},mr.prototype.copy=function(e){hr.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},mr.prototype.toJSON=function(){var e=hr.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},mr.prototype.fromJSON=function(e){hr.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new a).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},xr.prototype=Object.create(hr.prototype),xr.prototype.constructor=xr,xr.prototype.isCubicBezierCurve=!0,xr.prototype.getPoint=function(e,t){t=t||new r;var n=this.v0,i=this.v1,o=this.v2,a=this.v3;return t.set(yr(e,n.x,i.x,o.x,a.x),yr(e,n.y,i.y,o.y,a.y)),t},xr.prototype.copy=function(e){return hr.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},xr.prototype.toJSON=function(){var e=hr.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},xr.prototype.fromJSON=function(e){return hr.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},br.prototype=Object.create(hr.prototype),br.prototype.constructor=br,br.prototype.isCubicBezierCurve3=!0,br.prototype.getPoint=function(e,t){t=t||new a;var n=this.v0,r=this.v1,i=this.v2,o=this.v3;return t.set(yr(e,n.x,r.x,i.x,o.x),yr(e,n.y,r.y,i.y,o.y),yr(e,n.z,r.z,i.z,o.z)),t},br.prototype.copy=function(e){return hr.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},br.prototype.toJSON=function(){var e=hr.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},br.prototype.fromJSON=function(e){return hr.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},_r.prototype=Object.create(hr.prototype),_r.prototype.constructor=_r,_r.prototype.isLineCurve=!0,_r.prototype.getPoint=function(e,t){return t=t||new r,1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},_r.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},_r.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},_r.prototype.copy=function(e){return hr.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},_r.prototype.toJSON=function(){var e=hr.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},_r.prototype.fromJSON=function(e){return hr.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},wr.prototype=Object.create(hr.prototype),wr.prototype.constructor=wr,wr.prototype.isLineCurve3=!0,wr.prototype.getPoint=function(e,t){return t=t||new a,1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},wr.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},wr.prototype.copy=function(e){return hr.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},wr.prototype.toJSON=function(){var e=hr.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},wr.prototype.fromJSON=function(e){return hr.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Er.prototype=Object.create(hr.prototype),Er.prototype.constructor=Er,Er.prototype.isQuadraticBezierCurve=!0,Er.prototype.getPoint=function(e,t){t=t||new r;var n=this.v0,i=this.v1,o=this.v2;return t.set(vr(e,n.x,i.x,o.x),vr(e,n.y,i.y,o.y)),t},Er.prototype.copy=function(e){return hr.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Er.prototype.toJSON=function(){var e=hr.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Er.prototype.fromJSON=function(e){return hr.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Mr.prototype=Object.create(hr.prototype),Mr.prototype.constructor=Mr,Mr.prototype.isQuadraticBezierCurve3=!0,Mr.prototype.getPoint=function(e,t){t=t||new a;var n=this.v0,r=this.v1,i=this.v2;return t.set(vr(e,n.x,r.x,i.x),vr(e,n.y,r.y,i.y),vr(e,n.z,r.z,i.z)),t},Mr.prototype.copy=function(e){return hr.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Mr.prototype.toJSON=function(){var e=hr.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Mr.prototype.fromJSON=function(e){return hr.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Tr.prototype=Object.create(hr.prototype),Tr.prototype.constructor=Tr,Tr.prototype.isSplineCurve=!0,Tr.prototype.getPoint=function(e,t){t=t||new r;var n=this.points,i=(n.length-1)*e;e=Math.floor(i),i-=e;var o=n[0===e?e:e-1],a=n[e],s=n[e>n.length-2?n.length-1:e+1];return n=n[e>n.length-3?n.length-1:e+2],t.set(gr(i,o.x,a.x,s.x,n.x),gr(i,o.y,a.y,s.y,n.y)),t},Tr.prototype.copy=function(e){hr.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this},Tr.prototype.toJSON=function(){var e=hr.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e},Tr.prototype.fromJSON=function(e){hr.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new r).fromArray(i))}return this};var Fo=Object.freeze({ArcCurve:dr,CatmullRomCurve3:mr,CubicBezierCurve:xr,CubicBezierCurve3:br,EllipseCurve:pr,LineCurve:_r,LineCurve3:wr,QuadraticBezierCurve:Er,QuadraticBezierCurve3:Mr,SplineCurve:Tr});Sr.prototype=Object.assign(Object.create(hr.prototype),{constructor:Sr,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new _r(t,e))},getPoint:function(e){var t=e*this.getLength(),n=this.getCurveLengths();for(e=0;e<n.length;){if(n[e]>=t)return t=n[e]-t,e=this.curves[e],n=e.getLength(),e.getPointAt(0===n?0:1-t/n);e++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++){var o=i[r];o=o.getPoints(o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e);for(var a=0;a<o.length;a++){var s=o[a];t&&t.equals(s)||(n.push(s),t=s)}}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){hr.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this},toJSON:function(){var e=hr.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e},fromJSON:function(e){hr.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Fo[r.type]).fromJSON(r))}return this}}),Ar.prototype=Object.assign(Object.create(Sr.prototype),{constructor:Ar,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new _r(this.currentPoint.clone(),new r(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){e=new Er(this.currentPoint.clone(),new r(e,t),new r(n,i)),this.curves.push(e),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,o,a){e=new xr(this.currentPoint.clone(),new r(e,t),new r(n,i),new r(o,a)),this.curves.push(e),this.currentPoint.set(o,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e);t=new Tr(t),this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){e=new pr(e,t,n,r,i,o,a,s),0<this.curves.length&&(t=e.getPoint(0),t.equals(this.currentPoint)||this.lineTo(t.x,t.y)),this.curves.push(e),e=e.getPoint(1),this.currentPoint.copy(e)},copy:function(e){return Sr.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Sr.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Sr.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Cr.prototype=Object.assign(Object.create(Ar.prototype),{constructor:Cr,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Ar.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++)this.holes.push(e.holes[t].clone());return this},toJSON:function(){var e=Ar.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++)e.holes.push(this.holes[t].toJSON());return e},fromJSON:function(e){Ar.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new Ar).fromJSON(r))}return this}}),Rr.prototype=Object.assign(Object.create(w.prototype),{constructor:Rr,isLight:!0,copy:function(e){return w.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){return e=w.prototype.toJSON.call(this,e),e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Lr.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Lr,isHemisphereLight:!0,copy:function(e){return Rr.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Pr.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Ir.prototype=Object.assign(Object.create(Pr.prototype),{constructor:Ir,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*to.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height;e=e.distance||t.far,n===t.fov&&r===t.aspect&&e===t.far||(t.fov=n,t.aspect=r,t.far=e,t.updateProjectionMatrix())}}),Or.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Or,isSpotLight:!0,copy:function(e){return Rr.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Nr.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Nr,isPointLight:!0,copy:function(e){return Rr.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Dr.prototype=Object.assign(Object.create(Pr.prototype),{constructor:Dr}),Ur.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Ur,isDirectionalLight:!0,copy:function(e){return Rr.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Fr.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Fr,isAmbientLight:!0}),Br.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Br,isRectAreaLight:!0,copy:function(e){return Rr.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){return e=Rr.prototype.toJSON.call(this,e),e.object.width=this.width,e.object.height=this.height,e}});var Bo={arraySlice:function(e,t,n){return Bo.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=Array(t),r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,c=0;c!==t;++c)i[a++]=e[s+c];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};Object.assign(kr.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return this._cachedIndex=n=t.length,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}r=t.length;break n}if(e>=i)break e;for(o=t[1],e<o&&(n=2,i=o),o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}r=n,n=0}for(;n<r;)i=n+r>>>1,e<t[i]?r=i:n=i+1;if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return this._cachedIndex=n=t.length,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize;e*=r;for(var i=0;i!==r;++i)t[i]=n[e+i];return t},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(kr.prototype,{beforeStart_:kr.prototype.copySampleValue_,afterEnd_:kr.prototype.copySampleValue_}),Hr.prototype=Object.assign(Object.create(kr.prototype),{constructor:Hr,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}e=.5*(n-t),r=this.valueSize,this._weightPrev=e/(t-a),this._weightNext=e/(s-n),this._offsetPrev=i*r,this._offsetNext=o*r},interpolate_:function(e,t,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize;e*=a;var s=e-a,c=this._offsetPrev,l=this._offsetNext,u=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t);for(n=p*p,r=n*p,t=-u*r+2*u*n-u*p,u=(1+u)*r+(-1.5-2*u)*n+(-.5+u)*p+1,p=(-1-h)*r+(1.5+h)*n+.5*p,h=h*r-h*n,n=0;n!==a;++n)i[n]=t*o[c+n]+u*o[s+n]+p*o[e+n]+h*o[l+n];return i}}),Gr.prototype=Object.assign(Object.create(kr.prototype),{constructor:Gr,interpolate_:function(e,t,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize;e*=a;var s=e-a;for(t=(n-t)/(r-t),n=1-t,r=0;r!==a;++r)i[r]=o[s+r]*n+o[e+r]*t;return i}}),zr.prototype=Object.assign(Object.create(kr.prototype),{constructor:zr,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(jr,{toJSON:function(e){var t=e.constructor;if(void 0!==t.toJSON)t=t.toJSON(e);else{t={name:e.name,times:Bo.convertArray(e.times,Array),values:Bo.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}}),Object.assign(jr.prototype,{constructor:jr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new zr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Gr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Hr(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){switch(e){case 2300:var t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){if(t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;return++o,0===i&&o===r||(i>=o&&(o=Math.max(o,1),i=o-1),e=this.getValueSize(),this.times=Bo.arraySlice(n,i,o),this.values=Bo.arraySlice(this.values,i*e,o*e)),this},validate:function(){var e=!0,t=this.getValueSize();0!==t-Math.floor(t)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times;t=this.values;var r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var i=null,o=0;o!==r;o++){var a=n[o];if("number"===typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),e=!1;break}if(null!==i&&i>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,i),e=!1;break}i=a}if(void 0!==t&&Bo.isTypedArray(t))for(o=0,n=t.length;o!==n;++o)if(r=t[o],isNaN(r)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,r),e=!1;break}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=2302===this.getInterpolation(),i=1,o=e.length-1,a=1;a<o;++a){var s=!1,c=e[a];if(c!==e[a+1]&&(1!==a||c!==c[0]))if(r)s=!0;else{var l=a*n,u=l-n,h=l+n;for(c=0;c!==n;++c){var p=t[l+c];if(p!==t[u+c]||p!==t[h+c]){s=!0;break}}}if(s){if(a!==i)for(e[i]=e[a],s=a*n,l=i*n,c=0;c!==n;++c)t[l+c]=t[s+c];++i}}if(0<o){for(e[i]=e[o],s=o*n,l=i*n,c=0;c!==n;++c)t[l+c]=t[s+c];++i}return i!==e.length&&(this.times=Bo.arraySlice(e,0,i),this.values=Bo.arraySlice(t,0,i*n)),this}}),Vr.prototype=Object.assign(Object.create(jr.prototype),{constructor:Vr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Wr.prototype=Object.assign(Object.create(jr.prototype),{constructor:Wr,ValueTypeName:"color"}),Xr.prototype=Object.assign(Object.create(jr.prototype),{constructor:Xr,ValueTypeName:"number"}),qr.prototype=Object.assign(Object.create(kr.prototype),{constructor:qr,interpolate_:function(e,t,n,r){var i=this.resultBuffer,a=this.sampleValues,s=this.valueSize;for(e*=s,t=(n-t)/(r-t),n=e+s;e!==n;e+=4)o.slerpFlat(i,0,a,e-s,a,e,t);return i}}),Yr.prototype=Object.assign(Object.create(jr.prototype),{constructor:Yr,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new qr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Zr.prototype=Object.assign(Object.create(jr.prototype),{constructor:Zr,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Kr.prototype=Object.assign(Object.create(jr.prototype),{constructor:Kr,ValueTypeName:"vector"}),Object.assign(Jr,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push($r(n[i]).scale(r));return new Jr(e.name,e.duration,t)},toJSON:function(e){var t=[],n=e.tracks;e={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid};for(var r=0,i=n.length;r!==i;++r)t.push(jr.toJSON(n[r]));return e},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],c=[];s.push((a+i-1)%i,a,(a+1)%i),c.push(0,1,0);var l=Bo.getKeyframeOrder(s);s=Bo.sortedArray(s,1,l),c=Bo.sortedArray(c,1,l),r||0!==s[0]||(s.push(i),c.push(c[0])),o.push(new Xr(".morphTargetInfluences["+t[a].name+"]",s,c).scale(1/n))}return new Jr(e,-1,o)},findByName:function(e,t){var n=e;for(Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations),e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],c=s.name.match(i);if(c&&1<c.length){var l=c[1];(c=r[l])||(r[l]=c=[]),c.push(s)}}e=[];for(l in r)e.push(Jr.CreateFromMorphTargetSequence(l,r[l],t,n));return e},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];Bo.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30;e=e.hierarchy||[];for(var s=0;s<e.length;s++){var c=e[s].keys;if(c&&0!==c.length)if(c[0].morphTargets){o={};for(var l=0;l<c.length;l++)if(c[l].morphTargets)for(var u=0;u<c[l].morphTargets.length;u++)o[c[l].morphTargets[u]]=-1;for(var h in o){var p=[],d=[];for(u=0;u!==c[l].morphTargets.length;++u){var f=c[l];p.push(f.time),d.push(f.morphTarget===h?1:0)}r.push(new Xr(".morphTargetInfluence["+h+"]",p,d))}o=o.length*(a||1)}else l=".bones["+t[s].name+"]",n(Kr,l+".position",c,"pos",r),n(Yr,l+".quaternion",c,"rot",r),n(Kr,l+".scale",c,"scl",r)}return 0===r.length?null:new Jr(i,o,r)}}),Object.assign(Jr.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(ei.prototype,{load:function(e,t,n,r){var i=this;new or(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){return void 0===n[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),n[e]}var n=this.textures,o=new Ro[e.type];if(void 0!==e.uuid&&(o.uuid=e.uuid),void 0!==e.name&&(o.name=e.name),void 0!==e.color&&o.color.setHex(e.color),void 0!==e.roughness&&(o.roughness=e.roughness),void 0!==e.metalness&&(o.metalness=e.metalness),void 0!==e.emissive&&o.emissive.setHex(e.emissive),void 0!==e.specular&&o.specular.setHex(e.specular),void 0!==e.shininess&&(o.shininess=e.shininess),void 0!==e.clearCoat&&(o.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(o.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(o.vertexColors=e.vertexColors),void 0!==e.fog&&(o.fog=e.fog),void 0!==e.flatShading&&(o.flatShading=e.flatShading),void 0!==e.blending&&(o.blending=e.blending),void 0!==e.side&&(o.side=e.side),void 0!==e.opacity&&(o.opacity=e.opacity),void 0!==e.transparent&&(o.transparent=e.transparent),void 0!==e.alphaTest&&(o.alphaTest=e.alphaTest),void 0!==e.depthTest&&(o.depthTest=e.depthTest),void 0!==e.depthWrite&&(o.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(o.colorWrite=e.colorWrite),void 0!==e.wireframe&&(o.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(o.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(o.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(o.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(o.rotation=e.rotation),1!==e.linewidth&&(o.linewidth=e.linewidth),void 0!==e.dashSize&&(o.dashSize=e.dashSize),void 0!==e.gapSize&&(o.gapSize=e.gapSize),void 0!==e.scale&&(o.scale=e.scale),void 0!==e.polygonOffset&&(o.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(o.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(o.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(o.skinning=e.skinning),void 0!==e.morphTargets&&(o.morphTargets=e.morphTargets),void 0!==e.dithering&&(o.dithering=e.dithering),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.uniforms)for(var s in e.uniforms){var c=e.uniforms[s];switch(o.uniforms[s]={},c.type){case"t":o.uniforms[s].value=t(c.value);break;case"c":o.uniforms[s].value=(new v).setHex(c.value);break;case"v2":o.uniforms[s].value=(new r).fromArray(c.value);break;case"v3":o.uniforms[s].value=(new a).fromArray(c.value);break;case"v4":o.uniforms[s].value=(new l).fromArray(c.value);break;case"m4":o.uniforms[s].value=(new i).fromArray(c.value);break;default:o.uniforms[s].value=c.value}}return void 0!==e.defines&&(o.defines=e.defines),void 0!==e.vertexShader&&(o.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(o.fragmentShader=e.fragmentShader),void 0!==e.shading&&(o.flatShading=1===e.shading),void 0!==e.size&&(o.size=e.size),void 0!==e.sizeAttenuation&&(o.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(o.map=t(e.map)),void 0!==e.alphaMap&&(o.alphaMap=t(e.alphaMap),o.transparent=!0),void 0!==e.bumpMap&&(o.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(o.bumpScale=e.bumpScale),void 0!==e.normalMap&&(o.normalMap=t(e.normalMap)),void 0!==e.normalMapType&&(o.normalMapType=e.normalMapType),void 0!==e.normalScale&&(s=e.normalScale,!1===Array.isArray(s)&&(s=[s,s]),o.normalScale=(new r).fromArray(s)),void 0!==e.displacementMap&&(o.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(o.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(o.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(o.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(o.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(o.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(o.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(o.specularMap=t(e.specularMap)),void 0!==e.envMap&&(o.envMap=t(e.envMap)),void 0!==e.reflectivity&&(o.reflectivity=e.reflectivity),void 0!==e.lightMap&&(o.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(o.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(o.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(o.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(o.gradientMap=t(e.gradientMap)),o}}),Object.assign(ti.prototype,{load:function(e,t,n,r){var i=this;new or(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new k,n=e.data.index;void 0!==n&&(n=new ko[n.type](n.array),t.setIndex(new A(n,1)));var r=e.data.attributes;for(o in r){var i=r[o];n=new ko[i.type](i.array),t.addAttribute(o,new A(n,i.itemSize,i.normalized))}var o=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==o)for(n=0,r=o.length;n!==r;++n)i=o[n],t.addGroup(i.start,i.count,i.materialIndex);return e=e.data.boundingSphere,void 0!==e&&(o=new a,void 0!==e.center&&o.fromArray(e.center),t.boundingSphere=new f(o,e.radius)),t}});var ko={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};ni.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n+1];if(t[n].test(e))return i}return null}},Object.assign(ni.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},t=new v,n=new ur,r=new ei;return function(i,o,a){function s(e,t,r,i,s){e=o+e;var c=ni.Handlers.get(e);return null!==c?e=c.load(e):(n.setCrossOrigin(a),e=n.load(e)),void 0!==t&&(e.repeat.fromArray(t),1!==t[0]&&(e.wrapS=1e3),1!==t[1]&&(e.wrapT=1e3)),void 0!==r&&e.offset.fromArray(r),void 0!==i&&("repeat"===i[0]&&(e.wrapS=1e3),"mirror"===i[0]&&(e.wrapS=1002),"repeat"===i[1]&&(e.wrapT=1e3),"mirror"===i[1]&&(e.wrapT=1002)),void 0!==s&&(e.anisotropy=s),t=to.generateUUID(),l[t]=e,t}var c,l={},u={uuid:to.generateUUID(),type:"MeshLambertMaterial"};for(c in i){var h=i[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":u.name=h;break;case"blending":u.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":u.color=t.fromArray(h).getHex();break;case"colorSpecular":u.specular=t.fromArray(h).getHex();break;case"colorEmissive":u.emissive=t.fromArray(h).getHex();break;case"specularCoef":u.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(u.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(u.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(u.type="MeshStandardMaterial");break;case"mapDiffuse":u.map=s(h,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":u.emissiveMap=s(h,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":u.lightMap=s(h,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":u.aoMap=s(h,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":u.bumpMap=s(h,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":u.normalMap=s(h,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":u.specularMap=s(h,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":u.metalnessMap=s(h,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":u.roughnessMap=s(h,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":u.alphaMap=s(h,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":u.side=1;break;case"doubleSided":u.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),u.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":u[c]=h;break;case"vertexColors":!0===h&&(u.vertexColors=2),"face"===h&&(u.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,h)}}return"MeshBasicMaterial"===u.type&&delete u.emissive,"MeshPhongMaterial"!==u.type&&delete u.specular,1>u.opacity&&(u.transparent=!0),r.setTextures(l),r.parse(u)}}()});var Ho={decodeText:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};Object.assign(ri.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:Ho.extractUrlBase(e),a=new or(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){n=JSON.parse(n);var r=n.metadata;if(void 0!==r&&void 0!==(r=r.type)&&"object"===r.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");n=i.parse(n,o),t(n.geometry,n.materials)},n,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setTexturePath:function(e){return this.texturePath=e,this},parse:function(){return function(e,t){void 0!==e.data&&(e=e.data),e.scale=void 0!==e.scale?1/e.scale:1;var n,i,o,s=new S,c=e,u=c.faces,h=c.vertices,p=c.normals,d=c.colors,f=c.scale,m=0;if(void 0!==c.uvs){for(n=0;n<c.uvs.length;n++)c.uvs[n].length&&m++;for(n=0;n<m;n++)s.faceVertexUvs[n]=[]}var g=0;for(o=h.length;g<o;)n=new a,n.x=h[g++]*f,n.y=h[g++]*f,n.z=h[g++]*f,s.vertices.push(n);for(g=0,o=u.length;g<o;){h=u[g++];var y=1&h,x=2&h;n=8&h;var b=16&h,_=32&h;if(f=64&h,h&=128,y){y=new T,y.a=u[g],y.b=u[g+1],y.c=u[g+3];var w=new T;if(w.a=u[g+1],w.b=u[g+2],w.c=u[g+3],g+=4,x&&(x=u[g++],y.materialIndex=x,w.materialIndex=x),x=s.faces.length,n)for(n=0;n<m;n++){var E=c.uvs[n];for(s.faceVertexUvs[n][x]=[],s.faceVertexUvs[n][x+1]=[],i=0;4>i;i++){var M=u[g++],A=E[2*M];M=E[2*M+1],A=new r(A,M),2!==i&&s.faceVertexUvs[n][x].push(A),0!==i&&s.faceVertexUvs[n][x+1].push(A)}}if(b&&(b=3*u[g++],y.normal.set(p[b++],p[b++],p[b]),w.normal.copy(y.normal)),_)for(n=0;4>n;n++)b=3*u[g++],_=new a(p[b++],p[b++],p[b]),2!==n&&y.vertexNormals.push(_),0!==n&&w.vertexNormals.push(_);if(f&&(f=u[g++],f=d[f],y.color.setHex(f),w.color.setHex(f)),h)for(n=0;4>n;n++)f=u[g++],f=d[f],2!==n&&y.vertexColors.push(new v(f)),0!==n&&w.vertexColors.push(new v(f));s.faces.push(y),s.faces.push(w)}else{if(y=new T,y.a=u[g++],y.b=u[g++],y.c=u[g++],x&&(x=u[g++],y.materialIndex=x),x=s.faces.length,n)for(n=0;n<m;n++)for(E=c.uvs[n],s.faceVertexUvs[n][x]=[],i=0;3>i;i++)M=u[g++],A=E[2*M],M=E[2*M+1],A=new r(A,M),s.faceVertexUvs[n][x].push(A);if(b&&(b=3*u[g++],y.normal.set(p[b++],p[b++],p[b])),_)for(n=0;3>n;n++)b=3*u[g++],_=new a(p[b++],p[b++],p[b]),y.vertexNormals.push(_);if(f&&(f=u[g++],y.color.setHex(d[f])),h)for(n=0;3>n;n++)f=u[g++],y.vertexColors.push(new v(d[f]));s.faces.push(y)}}if(c=e,g=void 0!==c.influencesPerVertex?c.influencesPerVertex:2,c.skinWeights)for(o=0,u=c.skinWeights.length;o<u;o+=g)s.skinWeights.push(new l(c.skinWeights[o],1<g?c.skinWeights[o+1]:0,2<g?c.skinWeights[o+2]:0,3<g?c.skinWeights[o+3]:0));if(c.skinIndices)for(o=0,u=c.skinIndices.length;o<u;o+=g)s.skinIndices.push(new l(c.skinIndices[o],1<g?c.skinIndices[o+1]:0,2<g?c.skinIndices[o+2]:0,3<g?c.skinIndices[o+3]:0));if(s.bones=c.bones,s.bones&&0<s.bones.length&&(s.skinWeights.length!==s.skinIndices.length||s.skinIndices.length!==s.vertices.length)&&console.warn("When skinning, number of vertices ("+s.vertices.length+"), skinIndices ("+s.skinIndices.length+"), and skinWeights ("+s.skinWeights.length+") should match."),o=e,u=o.scale,void 0!==o.morphTargets)for(c=0,g=o.morphTargets.length;c<g;c++)for(s.morphTargets[c]={},s.morphTargets[c].name=o.morphTargets[c].name,s.morphTargets[c].vertices=[],p=s.morphTargets[c].vertices,d=o.morphTargets[c].vertices,m=0,h=d.length;m<h;m+=3)f=new a,f.x=d[m]*u,f.y=d[m+1]*u,f.z=d[m+2]*u,p.push(f);if(void 0!==o.morphColors&&0<o.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),u=s.faces,o=o.morphColors[0].colors,c=0,g=u.length;c<g;c++)u[c].color.fromArray(o,3*c);for(o=e,c=[],g=[],void 0!==o.animation&&g.push(o.animation),void 0!==o.animations&&(o.animations.length?g=g.concat(o.animations):g.push(o.animations)),o=0;o<g.length;o++)(u=Jr.parseAnimation(g[o],s.bones))&&c.push(u);return s.morphTargets&&(g=Jr.CreateClipsFromMorphTargetSequences(s.morphTargets,10),c=c.concat(g)),0<c.length&&(s.animations=c),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:s}:(e=ni.prototype.initMaterials(e.materials,t,this.crossOrigin),{geometry:s,materials:e})}}()}),Object.assign(ii.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new or(i.manager).load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}n=o.metadata,void 0===n||void 0===n.type||"geometry"===n.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead."):i.parse(o,t)},n,r)},setTexturePath:function(e){return this.texturePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes);n=this.parseGeometries(e.geometries,n);var r=this.parseImages(e.images,function(){void 0!==t&&t(i)});r=this.parseTextures(e.textures,r),r=this.parseMaterials(e.materials,r);var i=this.parseObject(e.object,n,r);return e.animations&&(i.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0===t||t(i),i},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new Cr).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new ri,i=new ti,o=0,a=e.length;o<a;o++){var s=e[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":var c=new Co[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":c=new Co[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":c=new Co[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":c=new Co[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":c=new Co[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":c=new Co[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":c=new Co[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":c=new Co[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":c=new Co[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":c=new Co[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":c=new Co[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":c=new Co[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":c=[];for(var l=0,u=s.shapes.length;l<u;l++){var h=t[s.shapes[l]];c.push(h)}c=new Co[s.type](c,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],l=0,u=s.shapes.length;l<u;l++)h=t[s.shapes[l]],c.push(h);l=s.options.extrudePath,void 0!==l&&(s.options.extrudePath=(new Fo[l.type]).fromJSON(l)),c=new Co[s.type](c,s.options);break;case"BufferGeometry":c=i.parse(s);break;case"Geometry":c=r.parse(s,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}c.uuid=s.uuid,void 0!==s.name&&(c.name=s.name),!0===c.isBufferGeometry&&void 0!==s.userData&&(c.userData=s.userData),n[s.uuid]=c}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new ei;r.setTextures(t),t=0;for(var i=e.length;t<i;t++){var o=e[t];if("MultiMaterial"===o.type){for(var a=[],s=0;s<o.materials.length;s++)a.push(r.parse(o.materials[s]));n[o.uuid]=a}else n[o.uuid]=r.parse(o)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=Jr.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){function n(e){return r.manager.itemStart(e),o.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemEnd(e),r.manager.itemError(e)})}var r=this,i={};if(void 0!==e&&0<e.length){t=new ir(t);var o=new cr(t);o.setCrossOrigin(this.crossOrigin),t=0;for(var a=e.length;t<a;t++){var s=e[t],c=s.url;if(Array.isArray(c)){i[s.uuid]=[];for(var l=0,u=c.length;l<u;l++){var h=c[l];h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:r.texturePath+h,i[s.uuid].push(n(h))}}else h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:r.texturePath+s.url,i[s.uuid]=n(h)}}return i},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=Array.isArray(t[a.image])?new se(t[a.image]):new c(t[a.image]);s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,Go)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],zo),s.wrapT=n(a.wrap[1],zo)),void 0!==a.format&&(s.format=a.format),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,jo)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,jo)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),r[a.uuid]=s}return r},parseObject:function(e,t,n){function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function i(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":var o=new Tt;void 0!==e.background&&Number.isInteger(e.background)&&(o.background=new v(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new Mt(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new Et(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new yt(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new M(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Fr(e.color,e.intensity);break;case"DirectionalLight":o=new Ur(e.color,e.intensity);break;case"PointLight":o=new Nr(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Br(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Or(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Lr(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":o=r(e.geometry);var a=i(e.material);o=o.bones&&0<o.bones.length?new Ot(o,a):new Z(o,a);break;case"LOD":o=new Lt;break;case"Line":o=new Dt(r(e.geometry),i(e.material),e.mode);break;case"LineLoop":o=new Ft(r(e.geometry),i(e.material));break;case"LineSegments":o=new Ut(r(e.geometry),i(e.material));break;case"PointCloud":case"Points":o=new kt(r(e.geometry),i(e.material));break;case"Sprite":o=new Rt(i(e.material));break;case"Group":o=new vt;break;default:o=new w}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children){a=e.children;for(var s=0;s<a.length;s++)o.add(this.parseObject(a[s],t,n))}if("LOD"===e.type)for(e=e.levels,a=0;a<e.length;a++){s=e[a];var c=o.getObjectByProperty("uuid",s.object);void 0!==c&&o.addLevel(c,s.distance)}return o}});var Go={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},zo={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},jo={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};oi.prototype={constructor:oi,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Lo.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,i.options)}).then(function(n){Lo.add(e,n),t&&t(n),i.manager.itemEnd(e)}).catch(function(t){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(ai.prototype,{moveTo:function(e,t){this.currentPath=new Ar,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new Cr;o.curves=i.curves,t.push(o)}return t}var r=So.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===t)return n(i);if(t=[],1===i.length){var o=i[0],a=new Cr;return a.curves=o.curves,t.push(a),t}var s=!r(i[0].getPoints());s=e?!s:s,a=[];var c=[],l=[],u=0;c[u]=void 0,l[u]=[];for(var h=0,p=i.length;h<p;h++){o=i[h];var d=o.getPoints(),f=r(d);(f=e?!f:f)?(!s&&c[u]&&u++,c[u]={s:new Cr,p:d},c[u].s.curves=o.curves,s&&u++,l[u]=[]):l[u].push({h:o,p:d[0]})}if(!c[0])return n(i);if(1<c.length){for(h=!1,e=[],r=0,i=c.length;r<i;r++)a[r]=[];for(r=0,i=c.length;r<i;r++)for(o=l[r],f=0;f<o.length;f++){for(s=o[f],u=!0,d=0;d<c.length;d++)(function(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],c=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(0>l&&(a=t[o],c=-c,s=t[i],l=-l),!(e.y<a.y||e.y>s.y))if(e.y===a.y){if(e.x===a.x)return!0}else{if(0===(i=l*(e.x-a.x)-c*(e.y-a.y)))return!0;0>i||(r=!r)}}else if(e.y===a.y&&(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x))return!0}return r})(s.p,c[d].p)&&(r!==d&&e.push({froms:r,tos:d,hole:f}),u?(u=!1,a[d].push(s)):h=!0);u&&a[r].push(s)}0<e.length&&(h||(l=a))}for(h=0,r=c.length;h<r;h++)for(a=c[h].s,t.push(a),e=l[h],i=0,o=e.length;i<o;i++)a.holes.push(e[i].h);return t}}),Object.assign(si.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);var n=[],r=t;t=this.data;var i=Array.from?Array.from(e):String(e).split("");r/=t.resolution;var o=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r;e=[];for(var a=0,s=0,c=0;c<i.length;c++){var l=i[c];if("\n"===l)a=0,s-=o;else{var u=r,h=a,p=s;if(l=t.glyphs[l]||t.glyphs["?"]){var d=new ai;if(l.o)for(var f=l._cachedOutline||(l._cachedOutline=l.o.split(" ")),m=0,g=f.length;m<g;)switch(f[m++]){case"m":var v=f[m++]*u+h,y=f[m++]*u+p;d.moveTo(v,y);break;case"l":v=f[m++]*u+h,y=f[m++]*u+p,d.lineTo(v,y);break;case"q":var x=f[m++]*u+h,b=f[m++]*u+p,_=f[m++]*u+h,w=f[m++]*u+p;d.quadraticCurveTo(_,w,x,b);break;case"b":x=f[m++]*u+h,b=f[m++]*u+p,_=f[m++]*u+h,w=f[m++]*u+p,v=f[m++]*u+h,y=f[m++]*u+p,d.bezierCurveTo(_,w,v,y,x,b)}u={offsetX:l.ha*u,path:d}}else u=void 0;a+=u.offsetX,e.push(u.path)}}for(t=0,i=e.length;t<i;t++)Array.prototype.push.apply(n,e[t].toShapes());return n}}),Object.assign(ci.prototype,{load:function(e,t,n,r){var i=this,o=new or(this.manager);o.setPath(this.path),o.load(e,function(e){try{var n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}e=i.parse(n),t&&t(e)},n,r)},parse:function(e){return new si(e)},setPath:function(e){return this.path=e,this}});var Vo,Wo={getContext:function(){return void 0===Vo&&(Vo=new(window.AudioContext||window.webkitAudioContext)),Vo},setContext:function(e){Vo=e}};Object.assign(li.prototype,{load:function(e,t,n,r){var i=new or(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){e=e.slice(0),Wo.getContext().decodeAudioData(e,function(e){t(e)})},n,r)}}),Object.assign(ui.prototype,{update:function(){var e,t,n,r,o,a,s,c,l=new i,u=new i;return function(i){if(e!==this||t!==i.focus||n!==i.fov||r!==i.aspect*this.aspect||o!==i.near||a!==i.far||s!==i.zoom||c!==this.eyeSep){e=this,t=i.focus,n=i.fov,r=i.aspect*this.aspect,o=i.near,a=i.far,s=i.zoom;var h=i.projectionMatrix.clone();c=this.eyeSep/2;var p=c*o/t,d=o*Math.tan(to.DEG2RAD*n*.5)/s;u.elements[12]=-c,l.elements[12]=c;var f=-d*r+p,m=d*r+p;h.elements[0]=2*o/(m-f),h.elements[8]=(m+f)/(m-f),this.cameraL.projectionMatrix.copy(h),f=-d*r-p,m=d*r-p,h.elements[0]=2*o/(m-f),h.elements[8]=(m+f)/(m-f),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(i.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(i.matrixWorld).multiply(l)}}()}),hi.prototype=Object.create(w.prototype),hi.prototype.constructor=hi,pi.prototype=Object.assign(Object.create(w.prototype),{constructor:pi,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new a,t=new o,n=new a,r=new a;return function(i){w.prototype.updateMatrixWorld.call(this,i),i=this.context.listener;var o=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),i.positionX?(i.positionX.setValueAtTime(e.x,this.context.currentTime),i.positionY.setValueAtTime(e.y,this.context.currentTime),i.positionZ.setValueAtTime(e.z,this.context.currentTime),i.forwardX.setValueAtTime(r.x,this.context.currentTime),i.forwardY.setValueAtTime(r.y,this.context.currentTime),i.forwardZ.setValueAtTime(r.z,this.context.currentTime),i.upX.setValueAtTime(o.x,this.context.currentTime),i.upY.setValueAtTime(o.y,this.context.currentTime),i.upZ.setValueAtTime(o.z,this.context.currentTime)):(i.setPosition(e.x,e.y,e.z),i.setOrientation(r.x,r.y,r.z,o.x,o.y,o.z))}}()}),di.prototype=Object.assign(Object.create(w.prototype),{constructor:di,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),fi.prototype=Object.assign(Object.create(di.prototype),{constructor:fi,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new a,t=new o,n=new a,r=new a;return function(i){w.prototype.updateMatrixWorld.call(this,i),i=this.panner,this.matrixWorld.decompose(e,t,n),r.set(0,0,1).applyQuaternion(t),i.setPosition(e.x,e.y,e.z),i.setOrientation(r.x,r.y,r.z)}}()}),Object.assign(mi.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(gi.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize;e=e*r+r;var i=this.cumulativeWeight;if(0===i){for(i=0;i!==r;++i)n[e+i]=n[i];i=t}else i+=t,this._mixBufferRegion(n,e,0,t/i,r);this.cumulativeWeight=i},apply:function(e){var t=this.valueSize,n=this.buffer;e=e*t+t;var r=this.cumulativeWeight,i=this.binding;this.cumulativeWeight=0,1>r&&this._mixBufferRegion(n,e,3*t,1-r,t),r=t;for(var o=t+t;r!==o;++r)if(n[r]!==n[r+t]){i.setValue(n,e);break}},saveOriginalState:function(){var e=this.buffer,t=this.valueSize,n=3*t;this.binding.getValue(e,n);for(var r=t;r!==n;++r)e[r]=e[n+r%t];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(e,t,n,r,i){if(.5<=r)for(r=0;r!==i;++r)e[t+r]=e[n+r]},_slerp:function(e,t,n,r){o.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}}),Object.assign(vi.prototype,{getValue:function(e,t){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(yi,{Composite:vi,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new yi.Composite(e,t,n):new yi(e,t,n)},sanitizeNodeName:function(){var e=/[\[\]\.:\/]/g;return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",t=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");e=/(WCOD+)?/.source.replace("WCOD",e);var n=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),r=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),i=new RegExp("^"+t+e+n+r+"$"),o=["material","materials","bones"];return function(e){var t=i.exec(e);if(!t)throw Error("PropertyBinding: Cannot parse trackName: "+e);t={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]};var n=t.nodeName&&t.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var r=t.nodeName.substring(n+1);-1!==o.indexOf(r)&&(t.nodeName=t.nodeName.substring(0,n),t.objectName=r)}if(null===t.propertyName||0===t.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return t}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t||(i=r(i.children)))return i}return null};if(e=r(e.children))return e}return null}}),Object.assign(yi.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(this.node=e=yi.findNode(this.rootNode,t.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(e=e.skeleton.bones,n=0;n<e.length;n++)if(e[n].name===o){o=n;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}if(void 0===(o=e[r]))console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+r+" but it wasn't found.",e);else{if(t=this.Versioning.None,this.targetObject=e,void 0!==e.needsUpdate?t=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(t=this.Versioning.MatrixWorldNeedsUpdate),n=this.BindingType.Direct,void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(n=0;n<this.node.geometry.morphAttributes.position.length;n++)if(e.geometry.morphAttributes.position[n].name===i){i=n;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(n=0;n<this.node.geometry.morphTargets.length;n++)if(e.geometry.morphTargets[n].name===i){i=n;break}}}n=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(n=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(n=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[n],this.setValue=this.SetterByBindingTypeAndVersioning[n][t]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(yi.prototype,{_getValue_unbound:yi.prototype.getValue,_setValue_unbound:yi.prototype.setValue}),Object.assign(xi.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,c=void 0,l=0,u=arguments.length;l!==u;++l){var h=arguments[l],p=h.uuid,d=r[p];if(void 0===d){d=t++,r[p]=d,e.push(h),p=0;for(var f=s;p!==f;++p)a[p].push(new yi(h,i[p],o[p]))}else if(d<n){c=e[d];var m=--n;for(f=e[m],r[f.uuid]=d,e[d]=f,r[p]=m,e[m]=h,p=0,f=s;p!==f;++p){var g=a[p],v=g[d];g[d]=g[m],void 0===v&&(v=new yi(h,i[p],o[p])),g[m]=v}}else e[d]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],c=s.uuid,l=n[c];if(void 0!==l&&l>=t){var u=t++,h=e[u];for(n[h.uuid]=l,e[l]=h,n[c]=u,e[u]=s,s=0,c=i;s!==c;++s){h=r[s];var p=h[l];h[l]=h[u],h[u]=p}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var c=arguments[a].uuid,l=r[c];if(void 0!==l)if(delete r[c],l<n){c=--n;var u=e[c],h=--t,p=e[h];for(r[u.uuid]=l,e[l]=u,r[p.uuid]=c,e[c]=p,e.pop(),u=0,p=o;u!==p;++u){var d=i[u],f=d[h];d[l]=d[c],d[c]=f,d.pop()}}else for(h=--t,p=e[h],r[p.uuid]=l,e[l]=p,e.pop(),u=0,p=o;u!==p;++u)d=i[u],d[l]=d[h],d.pop()}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,c=this.nCachedObjects_,l=Array(s.length);for(r=i.length,n[e]=r,o.push(e),a.push(t),i.push(l),n=c,r=s.length;n!==r;++n)l[n]=new yi(s[n],e,t);return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(bi.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){n=this._clip.duration;var r=e._clip.duration,i=n/r;e.warp(1,r/n,t),this.warp(i,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;return null===o&&(this._timeScaleInterpolant=o=r._lendControlInterpolant()),r=o.parameterPositions,o=o.sampleValues,r[0]=i,r[1]=i+n,o[0]=e/a,o[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){if(0>(t=(e-i)*n)||0===n)return;this._startTime=null,t*=n}if(t*=this._updateTimeScale(e),n=this._updateTime(t),0<(e=this._updateWeight(e))){t=this._interpolants,i=this._propertyBindings;for(var o=0,a=t.length;o!==a;++o)t[o].evaluate(n),i[o].accumulate(r,e)}}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=2202===r;if(0===e)return-1===i?t:o&&1===(1&i)?n-t:t;if(2200===r)e:{if(-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1)),t>=n)t=n;else{if(!(0>t))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>e?-1:1})}else{if(-1===i&&(0<=e?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||0>t){r=Math.floor(t/n),t-=n*r,i+=Math.abs(r);var a=this.repetitions-i;0>=a?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=0<e?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1})):(1===a?(e=0>e,this._setEndings(e,!e,o)):this._setEndings(!1,!1,o),this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:r}))}if(o&&1===(1&i))return this.time=t,n-t}return this.time=t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;return null===o&&(this._weightInterpolant=o=r._lendControlInterpolant()),r=o.parameterPositions,o=o.sampleValues,r[0]=i,o[0]=t,r[1]=i+e,o[1]=n,this}}),_i.prototype=Object.assign(Object.create(n.prototype),{constructor:_i,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings;e=e._interpolants;var a=n.uuid,s=this._bindingsByRootAndName,c=s[a];for(void 0===c&&(c={},s[a]=c),s=0;s!==i;++s){var l=r[s],u=l.name,h=c[u];if(void 0===h){if(void 0!==(h=o[s])){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,a,u));continue}h=new gi(yi.create(n,u,t&&t._propertyBindings[s].binding.parsedPath),l.ValueTypeName,l.getValueSize()),++h.referenceCount,this._addInactiveBinding(h,a,u)}o[s]=h,e[s].resultBuffer=h.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){return null!==(e=e._cacheIndex)&&e<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];void 0===o?(o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o):(t=o.knownActions,e._byClipCacheIndex=t.length,t.push(e)),e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null,t=e._clip.uuid,n=this._actionsByClip,r=n[t];var i=r.knownActions,o=i[i.length-1],a=e._byClipCacheIndex;o._byClipCacheIndex=a,i[a]=o,i.pop(),e._byClipCacheIndex=null,delete r.actionByRoot[(e._localRoot||this._root).uuid],0===i.length&&delete n[t],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){e=e._propertyBindings;for(var t=0,n=e.length;t!==n;++t){var r=e[t];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid;n=n.path;var i=this._bindingsByRootAndName,o=i[r],a=t[t.length-1];e=e._cacheIndex,a._cacheIndex=e,t[e]=a,t.pop(),delete o[n];e:{for(var s in o)break e;delete i[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new Gr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid;n="string"===typeof e?Jr.findByName(n,e):e,e=null!==n?n.uuid:e;var i=this._actionsByClip[e],o=null;if(void 0!==i){if(void 0!==(o=i.actionByRoot[r]))return o;o=i.knownActions[0],null===n&&(n=o._clip)}return null===n?null:(t=new bi(this,n,t),this._bindAction(t,o),this._addInactiveAction(t,e,r),t)},existingAction:function(e,t){var n=t||this._root;return t=n.uuid,n="string"===typeof e?Jr.findByName(n,e):e,e=this._actionsByClip[n?n.uuid:e],void 0!==e?e.actionByRoot[t]||null:null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings,i=this._nActiveBindings=this._nActiveActions=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a)t[a]._update(r,e,i,o);for(e=this._bindings,t=this._nActiveBindings,a=0;a!==t;++a)e[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions;e=e.uuid;var n=this._actionsByClip,r=n[e];if(void 0!==r){r=r.knownActions;for(var i=0,o=r.length;i!==o;++i){var a=r[i];this._deactivateAction(a);var s=a._cacheIndex,c=t[t.length-1];a._cacheIndex=null,a._byClipCacheIndex=null,c._cacheIndex=s,t[s]=c,t.pop(),this._removeInactiveBindingsForAction(a)}delete n[e]}},uncacheRoot:function(e){e=e.uuid;var t=this._actionsByClip;for(r in t){var n=t[r].actionByRoot[e];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}var r=this._bindingsByRootAndName[e];if(void 0!==r)for(var i in r)e=r[i],e.restoreOriginalState(),this._removeInactiveBinding(e)},uncacheAction:function(e,t){null!==(e=this.existingAction(e,t))&&(this._deactivateAction(e),this._removeInactiveAction(e))}}),wi.prototype.clone=function(){return new wi(void 0===this.value.clone?this.value:this.value.clone())},Ei.prototype=Object.assign(Object.create(k.prototype),{constructor:Ei,isInstancedBufferGeometry:!0,copy:function(e){return k.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Mi.prototype=Object.assign(Object.create(St.prototype),{constructor:Mi,isInstancedInterleavedBuffer:!0,copy:function(e){return St.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Ti.prototype=Object.assign(Object.create(A.prototype),{constructor:Ti,isInstancedBufferAttribute:!0,copy:function(e){return A.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Si.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){return n=n||[],Ci(e,this,n,t),n.sort(Ai),n},intersectObjects:function(e,t,n){if(n=n||[],!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,i=e.length;r<i;r++)Ci(e[r],this,n,t);return n.sort(Ai),n}}),Object.assign(Ri.prototype,{start:function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Li.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(e,n),this.phi=Math.acos(to.clamp(t/this.radius,-1,1))),this}}),Object.assign(Pi.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}),Object.assign(Ii.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new r;return function(t,n){return n=e.copy(n).multiplyScalar(.5),this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new r),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new r),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new r),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new r),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new r;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Oi.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new a),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new a),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new a),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new a,t=new a;return function(n,r){return e.subVectors(n,this.start),t.subVectors(this.end,this.start),n=t.dot(t),n=t.dot(e)/n,r&&(n=to.clamp(n,0,1)),n}}(),closestPointToPoint:function(e,t,n){return e=this.closestPointToPointParameter(e,t),void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new a),this.delta(n).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Ni.prototype=Object.create(w.prototype),Ni.prototype.constructor=Ni,Ni.prototype.isImmediateRenderObject=!0,Di.prototype=Object.create(Ut.prototype),Di.prototype.constructor=Di,Di.prototype.update=function(){var e=new a,t=new a,n=new s;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,c=a.faces,l=a=0,u=c.length;l<u;l++)for(var h=c[l],p=0,d=h.vertexNormals.length;p<d;p++){var f=h.vertexNormals[p];e.copy(s[h[r[p]]]).applyMatrix4(i),t.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(a,e.x,e.y,e.z),a+=1,o.setXYZ(a,t.x,t.y,t.z),a+=1}else if(a&&a.isBufferGeometry)for(r=a.attributes.position,s=a.attributes.normal,p=a=0,d=r.count;p<d;p++)e.set(r.getX(p),r.getY(p),r.getZ(p)).applyMatrix4(i),t.set(s.getX(p),s.getY(p),s.getZ(p)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(a,e.x,e.y,e.z),a+=1,o.setXYZ(a,t.x,t.y,t.z),a+=1;o.needsUpdate=!0}}(),Ui.prototype=Object.create(w.prototype),Ui.prototype.constructor=Ui,Ui.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Ui.prototype.update=function(){var e=new a,t=new a;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Bi.prototype=Object.create(Ut.prototype),Bi.prototype.constructor=Bi,Bi.prototype.updateMatrixWorld=function(){var e=new a,t=new i,n=new i;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,c=0;s<i.length;s++){var l=i[s];l.parent&&l.parent.isBone&&(t.multiplyMatrices(n,l.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(c,e.x,e.y,e.z),t.multiplyMatrices(n,l.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(c+1,e.x,e.y,e.z),c+=2)}o.getAttribute("position").needsUpdate=!0,w.prototype.updateMatrixWorld.call(this,r)}}(),ki.prototype=Object.create(Z.prototype),ki.prototype.constructor=ki,ki.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ki.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Hi.prototype=Object.create(w.prototype),Hi.prototype.constructor=Hi,Hi.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Hi.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Gi.prototype=Object.create(w.prototype),Gi.prototype.constructor=Gi,Gi.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Gi.prototype.update=function(){var e=new a,t=new v,n=new v;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),zi.prototype=Object.create(Ut.prototype),zi.prototype.constructor=zi,ji.prototype=Object.create(Ut.prototype),ji.prototype.constructor=ji,Vi.prototype=Object.create(Ut.prototype),Vi.prototype.constructor=Vi,Vi.prototype.update=function(){var e=new a,t=new a,n=new s;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices;o=o.faces;for(var s=0,c=0,l=o.length;c<l;c++){var u=o[c],h=u.normal;e.copy(a[u.a]).add(a[u.b]).add(a[u.c]).divideScalar(3).applyMatrix4(r),t.copy(h).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(s,e.x,e.y,e.z),s+=1,i.setXYZ(s,t.x,t.y,t.z),s+=1}i.needsUpdate=!0}}(),Wi.prototype=Object.create(w.prototype),Wi.prototype.constructor=Wi,Wi.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Wi.prototype.update=function(){var e=new a,t=new a,n=new a;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),Xi.prototype=Object.create(Ut.prototype),Xi.prototype.constructor=Xi,Xi.prototype.update=function(){function e(e,o,a,s){if(r.set(o,a,s).unproject(i),void 0!==(e=n[e]))for(o=t.getAttribute("position"),a=0,s=e.length;a<s;a++)o.setXYZ(e[a],r.x,r.y,r.z)}var t,n,r=new a,i=new E;return function(){t=this.geometry,n=this.pointMap,i.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),qi.prototype=Object.create(Ut.prototype),qi.prototype.constructor=qi,qi.prototype.update=function(){var e=new d;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){t=e.min;var n=e.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),qi.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Yi.prototype=Object.create(Ut.prototype),Yi.prototype.constructor=Yi,Yi.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),w.prototype.updateMatrixWorld.call(this,e))},Zi.prototype=Object.create(Dt.prototype),Zi.prototype.constructor=Zi,Zi.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;1e-8>Math.abs(t)&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=0>t?1:0,this.lookAt(this.plane.normal),w.prototype.updateMatrixWorld.call(this,e)};var Xo,qo;Ki.prototype=Object.create(w.prototype),Ki.prototype.constructor=Ki,Ki.prototype.setDirection=function(){var e,t=new a;return function(n){.99999<n.y?this.quaternion.set(0,0,0,1):-.99999>n.y?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),Ki.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Ki.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Ji.prototype=Object.create(Ut.prototype),Ji.prototype.constructor=Ji,hr.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(hr.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Sr.prototype,{createPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getPoints(e),this.createGeometry(e)},createSpacedPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getSpacedPoints(e),this.createGeometry(e)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new S,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new a(i.x,i.y,i.z||0))}return t}}),Object.assign(Ar.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Qi.prototype=Object.create(mr.prototype),$i.prototype=Object.create(mr.prototype),eo.prototype=Object.create(mr.prototype),Object.assign(eo.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),zi.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Bi.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(ni.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ho.extractUrlBase(e)}}),Object.assign(Ii.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(d.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Oi.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(to,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),to.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),to.ceilPowerOfTwo(e)}}),Object.assign(s.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(i.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new a),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),m.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},o.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(q.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Y.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Y,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Y.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Y.getNormal(e,t,n,r)}}),Object.assign(Cr.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Cn(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new kn(this,e)}}),Object.assign(r.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(a.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(l.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(S.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(w.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(w.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Lt.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Pt.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(hr.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),yt.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Rr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(A.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(k.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(k.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Rn.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(wi.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(V.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new v}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties($n.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(X.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(wt.prototype,{animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(wt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(dt.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(u.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(bt.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),di.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new li).load(e,function(e){t.setBuffer(e)}),this},mi.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},hi.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},no.crossOrigin=void 0,no.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new ur;return i.setCrossOrigin(this.crossOrigin),e=i.load(e,n,void 0,r),t&&(e.mapping=t),e},no.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new lr;return i.setCrossOrigin(this.crossOrigin),e=i.load(e,n,void 0,r),t&&(e.mapping=t),e},no.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},no.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},t.WebGLRenderTargetCube=h,t.WebGLRenderTarget=u,t.WebGLRenderer=wt,t.ShaderLib=co,t.UniformsLib=so,t.UniformsUtils=oo,t.ShaderChunk=io,t.FogExp2=Et,t.Fog=Mt,t.Scene=Tt,t.Sprite=Rt,t.LOD=Lt,t.SkinnedMesh=Ot,t.Skeleton=Pt,t.Bone=It,t.Mesh=Z,t.LineSegments=Ut,t.LineLoop=Ft,t.Line=Dt,t.Points=kt,t.Group=vt,t.VideoTexture=Ht,t.DataTexture=p,t.CompressedTexture=Gt,t.CubeTexture=se,t.CanvasTexture=zt,t.DepthTexture=jt,t.Texture=c,t.CompressedTextureLoader=ar,t.DataTextureLoader=sr,t.CubeTextureLoader=lr,t.TextureLoader=ur,t.ObjectLoader=ii,t.MaterialLoader=ei,t.BufferGeometryLoader=ti,t.DefaultLoadingManager=Po,t.LoadingManager=ir,t.JSONLoader=ri,t.ImageLoader=cr,t.ImageBitmapLoader=oi,t.FontLoader=ci,t.FileLoader=or,t.Loader=ni,t.LoaderUtils=Ho,t.Cache=Lo,t.AudioLoader=li,t.SpotLightShadow=Ir,t.SpotLight=Or,t.PointLight=Nr,t.RectAreaLight=Br,t.HemisphereLight=Lr,t.DirectionalLightShadow=Dr,t.DirectionalLight=Ur,t.AmbientLight=Fr,t.LightShadow=Pr,t.Light=Rr,t.StereoCamera=ui,t.PerspectiveCamera=yt,t.OrthographicCamera=M,t.CubeCamera=hi,t.ArrayCamera=xt,t.Camera=E,t.AudioListener=pi,t.PositionalAudio=fi,t.AudioContext=Wo,t.AudioAnalyser=mi,t.Audio=di,t.VectorKeyframeTrack=Kr,t.StringKeyframeTrack=Zr,t.QuaternionKeyframeTrack=Yr,t.NumberKeyframeTrack=Xr,t.ColorKeyframeTrack=Wr,t.BooleanKeyframeTrack=Vr,t.PropertyMixer=gi,t.PropertyBinding=yi,t.KeyframeTrack=jr,t.AnimationUtils=Bo,t.AnimationObjectGroup=xi,t.AnimationMixer=_i,t.AnimationClip=Jr,t.Uniform=wi,t.InstancedBufferGeometry=Ei,t.BufferGeometry=k,t.Geometry=S,t.InterleavedBufferAttribute=At,t.InstancedInterleavedBuffer=Mi,t.InterleavedBuffer=St,t.InstancedBufferAttribute=Ti,t.Face3=T,t.Object3D=w,t.Raycaster=Si,t.Layers=_,t.EventDispatcher=n,t.Clock=Ri,t.QuaternionLinearInterpolant=qr,t.LinearInterpolant=Gr,t.DiscreteInterpolant=zr,t.CubicInterpolant=Hr,t.Interpolant=kr,t.Triangle=Y,t.Math=to,t.Spherical=Li,t.Cylindrical=Pi,t.Plane=m,t.Frustum=g,t.Sphere=f,t.Ray=q,t.Matrix4=i,t.Matrix3=s,t.Box3=d,t.Box2=Ii,t.Line3=Oi,t.Euler=b,t.Vector4=l,t.Vector3=a,t.Vector2=r,t.Quaternion=o,t.Color=v,t.ImmediateRenderObject=Ni,t.VertexNormalsHelper=Di,t.SpotLightHelper=Ui,t.SkeletonHelper=Bi,t.PointLightHelper=ki,t.RectAreaLightHelper=Hi,t.HemisphereLightHelper=Gi,t.GridHelper=zi,t.PolarGridHelper=ji,t.FaceNormalsHelper=Vi,t.DirectionalLightHelper=Wi,t.CameraHelper=Xi,t.BoxHelper=qi,t.Box3Helper=Yi,t.PlaneHelper=Zi,t.ArrowHelper=Ki,t.AxesHelper=Ji,t.Shape=Cr,t.Path=Ar,t.ShapePath=ai,t.Font=si;t.CurvePath=Sr,t.Curve=hr,t.ImageUtils=no,t.ShapeUtils=So,t.WebGLUtils=gt,t.WireframeGeometry=Vt,t.ParametricGeometry=Wt,t.ParametricBufferGeometry=Xt,t.TetrahedronGeometry=Zt,t.TetrahedronBufferGeometry=Kt,t.OctahedronGeometry=Jt,t.OctahedronBufferGeometry=Qt,t.IcosahedronGeometry=$t,t.IcosahedronBufferGeometry=en,t.DodecahedronGeometry=tn,t.DodecahedronBufferGeometry=nn,t.PolyhedronGeometry=qt,t.PolyhedronBufferGeometry=Yt,t.TubeGeometry=rn,t.TubeBufferGeometry=on,t.TorusKnotGeometry=an,t.TorusKnotBufferGeometry=sn,t.TorusGeometry=cn,t.TorusBufferGeometry=ln,t.TextGeometry=Pn,t.TextBufferGeometry=In,t.SphereGeometry=On,t.SphereBufferGeometry=Nn,t.RingGeometry=Dn,t.RingBufferGeometry=Un,t.PlaneGeometry=z,t.PlaneBufferGeometry=j,t.LatheGeometry=Fn,t.LatheBufferGeometry=Bn,t.ShapeGeometry=kn,t.ShapeBufferGeometry=Hn,t.ExtrudeGeometry=Cn,t.ExtrudeBufferGeometry=Rn,t.EdgesGeometry=zn,t.ConeGeometry=Wn,t.ConeBufferGeometry=Xn,t.CylinderGeometry=jn,t.CylinderBufferGeometry=Vn,t.CircleGeometry=qn,t.CircleBufferGeometry=Yn,t.BoxGeometry=H,t.BoxBufferGeometry=G,t.ShadowMaterial=Zn,t.SpriteMaterial=Ct,t.RawShaderMaterial=Kn,t.ShaderMaterial=X,t.PointsMaterial=Bt,t.MeshPhysicalMaterial=Qn,t.MeshStandardMaterial=Jn,t.MeshPhongMaterial=$n,t.MeshToonMaterial=er,t.MeshNormalMaterial=tr,t.MeshLambertMaterial=nr,t.MeshDepthMaterial=ht,t.MeshDistanceMaterial=pt,t.MeshBasicMaterial=W,t.LineDashedMaterial=rr,t.LineBasicMaterial=Nt,t.Material=V,t.Float64BufferAttribute=U,t.Float32BufferAttribute=D,t.Uint32BufferAttribute=N,t.Int32BufferAttribute=O,t.Uint16BufferAttribute=I,t.Int16BufferAttribute=P,t.Uint8ClampedBufferAttribute=L,t.Uint8BufferAttribute=R,t.Int8BufferAttribute=C,t.BufferAttribute=A,t.ArcCurve=dr,t.CatmullRomCurve3=mr,t.CubicBezierCurve=xr,t.CubicBezierCurve3=br,t.EllipseCurve=pr,t.LineCurve=_r,t.LineCurve3=wr,t.QuadraticBezierCurve=Er,t.QuadraticBezierCurve3=Mr,t.SplineCurve=Tr,t.REVISION="96",t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.CullFaceNone=0,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.FrontSide=0,t.BackSide=1,t.DoubleSide=2,t.FlatShading=1,t.SmoothShading=2,t.NoColors=0,t.FaceColors=1,t.VertexColors=2,t.NoBlending=0,t.NormalBlending=1,t.AdditiveBlending=2,t.SubtractiveBlending=3,t.MultiplyBlending=4,t.CustomBlending=5,t.AddEquation=100,t.SubtractEquation=101,t.ReverseSubtractEquation=102,t.MinEquation=103,t.MaxEquation=104,t.ZeroFactor=200,t.OneFactor=201,t.SrcColorFactor=202,t.OneMinusSrcColorFactor=203,t.SrcAlphaFactor=204,t.OneMinusSrcAlphaFactor=205,t.DstAlphaFactor=206,t.OneMinusDstAlphaFactor=207,t.DstColorFactor=208,t.OneMinusDstColorFactor=209,t.SrcAlphaSaturateFactor=210,t.NeverDepth=0,t.AlwaysDepth=1,t.LessDepth=2,t.LessEqualDepth=3,t.EqualDepth=4,t.GreaterEqualDepth=5,t.GreaterDepth=6,t.NotEqualDepth=7,t.MultiplyOperation=0,t.MixOperation=1,t.AddOperation=2,t.NoToneMapping=0,t.LinearToneMapping=1,t.ReinhardToneMapping=2,t.Uncharted2ToneMapping=3,t.CineonToneMapping=4,t.UVMapping=300,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.SphericalReflectionMapping=305,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.RepeatWrapping=1e3,t.ClampToEdgeWrapping=1001,t.MirroredRepeatWrapping=1002,t.NearestFilter=1003,t.NearestMipMapNearestFilter=1004,t.NearestMipMapLinearFilter=1005,t.LinearFilter=1006,t.LinearMipMapNearestFilter=1007,t.LinearMipMapLinearFilter=1008,t.UnsignedByteType=1009,t.ByteType=1010,t.ShortType=1011,t.UnsignedShortType=1012,t.IntType=1013,t.UnsignedIntType=1014,t.FloatType=1015,t.HalfFloatType=1016,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedInt248Type=1020,t.AlphaFormat=1021,t.RGBFormat=1022,t.RGBAFormat=1023,t.LuminanceFormat=1024,t.LuminanceAlphaFormat=1025,t.RGBEFormat=1023,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.RGB_S3TC_DXT1_Format=33776,t.RGBA_S3TC_DXT1_Format=33777,t.RGBA_S3TC_DXT3_Format=33778,t.RGBA_S3TC_DXT5_Format=33779,t.RGB_PVRTC_4BPPV1_Format=35840,t.RGB_PVRTC_2BPPV1_Format=35841,t.RGBA_PVRTC_4BPPV1_Format=35842,t.RGBA_PVRTC_2BPPV1_Format=35843,t.RGB_ETC1_Format=36196,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_12x10_Format=37820;t.RGBA_ASTC_12x12_Format=37821,t.LoopOnce=2200,t.LoopRepeat=2201,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=2400,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=0,t.TriangleStripDrawMode=1,t.TriangleFanDrawMode=2,t.LinearEncoding=3e3,t.sRGBEncoding=3001,t.GammaEncoding=3007,t.RGBEEncoding=3002,t.LogLuvEncoding=3003,t.RGBM7Encoding=3004,t.RGBM16Encoding=3005,t.RGBDEncoding=3006,t.BasicDepthPacking=3200,t.RGBADepthPacking=3201,t.TangentSpaceNormalMap=0,t.ObjectSpaceNormalMap=1,t.CubeGeometry=H,t.Face4=function(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new T(e,t,n,i,o,a)},t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},t.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},t.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new kt(e,t)},t.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Rt(e)},t.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new kt(e,t)},t.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Bt(e)},t.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Bt(e)},t.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Bt(e)},t.Vertex=function(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new a(e,t,n)},t.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new A(e,t).setDynamic(!0)},t.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new C(e,t)},t.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new R(e,t)},t.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new L(e,t)},t.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new P(e,t)},t.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new I(e,t)},t.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new O(e,t)},t.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new N(e,t)},t.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new D(e,t)},t.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new U(e,t)},t.ClosedSplineCurve3=Qi,t.SplineCurve3=$i,t.Spline=eo,t.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Ji(e)},t.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new qi(e,t)},t.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ut(new zn(e.geometry),new Nt({color:void 0!==t?t:16777215}))},t.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ut(new Vt(e.geometry),new Nt({color:void 0!==t?t:16777215}))},t.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new or(e)},t.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new sr(e)},t.GeometryUtils={merge:function(e,t,n){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();var r=t.matrix;t=t.geometry}e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},t.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},t.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}},t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(t,"__esModule",{value:!0})})}).call(t,n(28))},function(e,t,n){"use strict";function r(){if(s)for(var e in c){var t=c[e],n=s.indexOf(e);if(n>-1||a("96",e),!l.plugins[n]){t.extractEvents||a("97",e),l.plugins[n]=t;var r=t.eventTypes;for(var o in r)i(r[o],t,o)||a("98",o,e)}}}function i(e,t,n){l.eventNameDispatchConfigs.hasOwnProperty(n)&&a("99",n),l.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];o(s,t,n)}return!0}return!!e.registrationName&&(o(e.registrationName,t,n),!0)}function o(e,t,n){l.registrationNameModules[e]&&a("100",e),l.registrationNameModules[e]=t,l.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var a=n(1),s=(n(0),null),c={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){s&&a("101"),s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];c.hasOwnProperty(n)&&c[n]===i||(c[n]&&a("102",n),c[n]=i,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return l.registrationNameModules[t.registrationName]||null;if(void 0!==t.phasedRegistrationNames){var n=t.phasedRegistrationNames;for(var r in n)if(n.hasOwnProperty(r)){var i=l.registrationNameModules[n[r]];if(i)return i}}return null},_resetEventPlugins:function(){s=null;for(var e in c)c.hasOwnProperty(e)&&delete c[e];l.plugins.length=0;var t=l.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=l.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};e.exports=l},function(e,t,n){"use strict";function r(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e}function i(e){return"topMouseMove"===e||"topTouchMove"===e}function o(e){return"topMouseDown"===e||"topTouchStart"===e}function a(e,t,n,r){var i=e.type||"unknown-event";e.currentTarget=v.getNodeFromInstance(r),t?m.invokeGuardedCallbackWithCatch(i,n,e):m.invokeGuardedCallback(i,n,e),e.currentTarget=null}function s(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)a(e,t,n[i],r[i]);else n&&a(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null}function c(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function l(e){var t=c(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function u(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)&&f("103"),e.currentTarget=t?v.getNodeFromInstance(n):null;var r=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,r}function h(e){return!!e._dispatchListeners}var p,d,f=n(1),m=n(31),g=(n(0),n(2),{injectComponentTree:function(e){p=e},injectTreeTraversal:function(e){d=e}}),v={isEndish:r,isMoveish:i,isStartish:o,executeDirectDispatch:u,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:l,hasDispatches:h,getInstanceFromNode:function(e){return p.getInstanceFromNode(e)},getNodeFromInstance:function(e){return p.getNodeFromInstance(e)},isAncestor:function(e,t){return d.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return d.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return d.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return d.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,r,i){return d.traverseEnterLeave(e,t,n,r,i)},injection:g};e.exports=v},function(e,t,n){"use strict";function r(e,t,n){try{t(n)}catch(e){null===i&&(i=e)}}var i=null,o={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(i){var e=i;throw i=null,e}}};e.exports=o},function(e,t,n){"use strict";function r(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"===typeof a[n]}return!r&&i&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,o=n(5);o.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=r},function(e,t,n){"use strict";function r(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=o[e];return!!r&&!!n[r]}function i(e){return r}var o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=i},function(e,t,n){"use strict";function r(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function i(e,t,n){u.insertTreeBefore(e,t,n)}function o(e,t,n){Array.isArray(t)?s(e,t[0],t[1],n):m(e,t,n)}function a(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],c(e,t,n),e.removeChild(n)}e.removeChild(t)}function s(e,t,n,r){for(var i=t;;){var o=i.nextSibling;if(m(e,i,r),i===n)break;i=o}}function c(e,t,n){for(;;){var r=t.nextSibling;if(r===n)break;e.removeChild(r)}}function l(e,t,n){var r=e.parentNode,i=e.nextSibling;i===t?n&&m(r,document.createTextNode(n),i):n?(f(i,n),c(r,i,t)):c(r,e,t)}var u=n(16),h=n(117),p=(n(4),n(6),n(37)),d=n(25),f=n(62),m=p(function(e,t,n){e.insertBefore(t,n)}),g=h.dangerouslyReplaceNodeWithMarkup,v={dangerouslyReplaceNodeWithMarkup:g,replaceDelimitedText:l,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var s=t[n];switch(s.type){case"INSERT_MARKUP":i(e,s.content,r(e,s.afterNode));break;case"MOVE_EXISTING":o(e,s.fromNode,r(e,s.afterNode));break;case"SET_MARKUP":d(e,s.content);break;case"TEXT_CONTENT":f(e,s.content);break;case"REMOVE_NODE":a(e,s.fromNode)}}}};e.exports=v},function(e,t,n){"use strict";var r={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};e.exports=r},function(e,t,n){"use strict";var r=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e};e.exports=r},function(e,t,n){"use strict";function r(e){null!=e.checkedLink&&null!=e.valueLink&&s("87")}function i(e){r(e),(null!=e.value||null!=e.onChange)&&s("88")}function o(e){r(e),(null!=e.checked||null!=e.onChange)&&s("89")}function a(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=n(1),c=n(135),l=n(52),u=n(12),h=l(u.isValidElement),p=(n(0),n(2),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),d={value:function(e,t,n){return!e[t]||p[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:h.func},f={},m={checkPropTypes:function(e,t,n){for(var r in d){if(d.hasOwnProperty(r))var i=d[r](t,r,e,"prop",null,c);if(i instanceof Error&&!(i.message in f)){f[i.message]=!0;a(n)}}},getValue:function(e){return e.valueLink?(i(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(o(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(i(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(o(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=m},function(e,t,n){"use strict";var r=n(1),i=(n(0),!1),o={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){i&&r("104"),o.replaceNodeWithMarkup=e.replaceNodeWithMarkup,o.processChildrenUpdates=e.processChildrenUpdates,i=!0}}};e.exports=o},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function i(e,t){if(r(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;e.exports=i},function(e,t,n){"use strict";function r(e,t){var n=null===e||!1===e,r=null===t||!1===t;if(n||r)return n===r;var i=typeof e,o=typeof t;return"string"===i||"number"===i?"string"===o||"number"===o:"object"===o&&e.type===t.type&&e.key===t.key}e.exports=r},function(e,t,n){"use strict";function r(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function i(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(t,function(e){return n[e]})}var o={escape:r,unescape:i};e.exports=o},function(e,t,n){"use strict";function r(e){c.enqueueUpdate(e)}function i(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,r=Object.keys(e);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function o(e,t){var n=s.get(e);if(!n){return null}return n}var a=n(1),s=(n(9),n(21)),c=(n(6),n(8)),l=(n(0),n(2),{isMounted:function(e){var t=s.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){l.validateCallback(t,n);var i=o(e);if(!i)return null;i._pendingCallbacks?i._pendingCallbacks.push(t):i._pendingCallbacks=[t],r(i)},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=o(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t,n){var i=o(e,"replaceState");i&&(i._pendingStateQueue=[t],i._pendingReplaceState=!0,void 0!==n&&null!==n&&(l.validateCallback(n,"replaceState"),i._pendingCallbacks?i._pendingCallbacks.push(n):i._pendingCallbacks=[n]),r(i))},enqueueSetState:function(e,t){var n=o(e,"setState");if(n){(n._pendingStateQueue||(n._pendingStateQueue=[])).push(t),r(n)}},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,r(e)},validateCallback:function(e,t){e&&"function"!==typeof e&&a("122",t,i(e))}});e.exports=l},function(e,t,n){"use strict";var r=(n(3),n(7)),i=(n(2),r);e.exports=i},function(e,t,n){"use strict";function r(e){var t,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,t>=32||13===t?t:0}e.exports=r},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return v=e,y}}function o(e,t){try{return e(t)}catch(e){return v=e,y}}function a(e,t,n){try{e(t,n)}catch(e){return v=e,y}}function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==r&&m(e,this)}function c(e,t,n){return new e.constructor(function(i,o){var a=new s(r);a.then(i,o),l(e,new f(t,n,a))})}function l(e,t){for(;3===e._83;)e=e._18;if(s._47&&s._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);u(e,t)}function u(e,t){g(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?h(t.promise,e._18):p(t.promise,e._18));var r=o(n,e._18);r===y?p(t.promise,v):h(t.promise,r)})}function h(e,t){if(t===e)return p(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=i(t);if(n===y)return p(e,v);if(n===e.then&&t instanceof s)return e._83=3,e._18=t,void d(e);if("function"===typeof n)return void m(n.bind(t),e)}e._83=1,e._18=t,d(e)}function p(e,t){e._83=2,e._18=t,s._71&&s._71(e,t),d(e)}function d(e){if(1===e._75&&(l(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)l(e,e._38[t]);e._38=null}}function f(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=a(e,function(e){n||(n=!0,h(t,e))},function(e){n||(n=!0,p(t,e))});n||r!==y||(n=!0,p(t,v))}var g=n(82),v=null,y={};e.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(e,t){if(this.constructor!==s)return c(this,e,t);var n=new s(r);return l(this,new f(e,t,n)),n}},function(e,t,n){"use strict";e.exports=n(12)},function(e,t,n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=l,this.updater=n||c}function i(e,t,n){this.props=e,this.context=t,this.refs=l,this.updater=n||c}function o(){}var a=n(17),s=n(3),c=n(49),l=(n(50),n(22));n(0),n(87);r.prototype.isReactComponent={},r.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&a("85"),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")};o.prototype=r.prototype,i.prototype=new o,i.prototype.constructor=i,s(i.prototype,r.prototype),i.prototype.isPureReactComponent=!0,e.exports={Component:r,PureComponent:i}},function(e,t,n){"use strict";var r=(n(2),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){},enqueueReplaceState:function(e,t){},enqueueSetState:function(e,t){}});e.exports=r},function(e,t,n){"use strict";var r=!1;e.exports=r},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=r},function(e,t,n){"use strict";var r=n(95);e.exports=function(e){return r(e,!1)}},function(e,t,n){"use strict";var r={hasCachedChildNodes:1};e.exports=r},function(e,t,n){"use strict";function r(e,t){return null==t&&i("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}var i=n(1);n(0);e.exports=r},function(e,t,n){"use strict";function r(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}e.exports=r},function(e,t,n){"use strict";function r(){return!o&&i.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var i=n(5),o=null;e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(1),o=n(11),a=(n(0),function(){function e(t){r(this,e),this._callbacks=null,this._contexts=null,this._arg=t}return e.prototype.enqueue=function(e,t){this._callbacks=this._callbacks||[],this._callbacks.push(e),this._contexts=this._contexts||[],this._contexts.push(t)},e.prototype.notifyAll=function(){var e=this._callbacks,t=this._contexts,n=this._arg;if(e&&t){e.length!==t.length&&i("24"),this._callbacks=null,this._contexts=null;for(var r=0;r<e.length;r++)e[r].call(t[r],n);e.length=0,t.length=0}},e.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},e.prototype.rollback=function(e){this._callbacks&&this._contexts&&(this._callbacks.length=e,this._contexts.length=e)},e.prototype.reset=function(){this._callbacks=null,this._contexts=null},e.prototype.destructor=function(){this.reset()},e}());e.exports=o.addPoolingTo(a)},function(e,t,n){"use strict";var r={logTopLevelRenders:!1};e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.type,n=e.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===t||"radio"===t)}function i(e){return e._wrapperState.valueTracker}function o(e,t){e._wrapperState.valueTracker=t}function a(e){e._wrapperState.valueTracker=null}function s(e){var t;return e&&(t=r(e)?""+e.checked:e.value),t}var c=n(4),l={_getTrackerFromNode:function(e){return i(c.getInstanceFromNode(e))},track:function(e){if(!i(e)){var t=c.getNodeFromInstance(e),n=r(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];t.hasOwnProperty(n)||"function"!==typeof s.get||"function"!==typeof s.set||(Object.defineProperty(t,n,{enumerable:s.enumerable,configurable:!0,get:function(){return s.get.call(this)},set:function(e){l=""+e,s.set.call(this,e)}}),o(e,{getValue:function(){return l},setValue:function(e){l=""+e},stopTracking:function(){a(e),delete t[n]}}))}},updateValueIfChanged:function(e){if(!e)return!1;var t=i(e);if(!t)return l.track(e),!0;var n=t.getValue(),r=s(c.getNodeFromInstance(e));return r!==n&&(t.setValue(r),!0)},stopTracking:function(e){var t=i(e);t&&t.stopTracking()}};e.exports=l},function(e,t,n){"use strict";function r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!i[e.type]:"textarea"===t}var i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=r},function(e,t,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};e.exports=r},function(e,t,n){"use strict";var r=n(5),i=n(26),o=n(25),a=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(a=function(e,t){if(3===e.nodeType)return void(e.nodeValue=t);o(e,i(t))})),e.exports=a},function(e,t,n){"use strict";function r(e){try{e.focus()}catch(e){}}e.exports=r},function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var i={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(e){o.forEach(function(t){i[r(t,e)]=i[e]})});var a={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:i,shorthandPropertyExpansions:a};e.exports=s},function(e,t,n){"use strict";function r(e){return!!l.hasOwnProperty(e)||!c.hasOwnProperty(e)&&(s.test(e)?(l[e]=!0,!0):(c[e]=!0,!1))}function i(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&!1===t}var o=n(14),a=(n(4),n(6),n(131)),s=(n(2),new RegExp("^["+o.ATTRIBUTE_NAME_START_CHAR+"]["+o.ATTRIBUTE_NAME_CHAR+"]*$")),c={},l={},u={createMarkupForID:function(e){return o.ID_ATTRIBUTE_NAME+"="+a(e)},setAttributeForID:function(e,t){e.setAttribute(o.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return o.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(o.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(n){if(i(n,t))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&!0===t?r+'=""':r+"="+a(t)}return o.isCustomAttribute(e)?null==t?"":e+"="+a(t):null},createMarkupForCustomAttribute:function(e,t){return r(e)&&null!=t?e+"="+a(t):""},setValueForProperty:function(e,t,n){var r=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(r){var a=r.mutationMethod;if(a)a(e,n);else{if(i(r,n))return void this.deleteValueForProperty(e,t);if(r.mustUseProperty)e[r.propertyName]=n;else{var s=r.attributeName,c=r.attributeNamespace;c?e.setAttributeNS(c,s,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?e.setAttribute(s,""):e.setAttribute(s,""+n)}}}else if(o.isCustomAttribute(t))return void u.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){if(r(t)){null==n?e.removeAttribute(t):e.setAttribute(t,""+n)}},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(n){var r=n.mutationMethod;if(r)r(e,void 0);else if(n.mustUseProperty){var i=n.propertyName;n.hasBooleanValue?e[i]=!1:e[i]=""}else e.removeAttribute(n.attributeName)}else o.isCustomAttribute(t)&&e.removeAttribute(t)}};e.exports=u},function(e,t,n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=s.getValue(e);null!=t&&i(this,Boolean(e.multiple),t)}}function i(e,t,n){var r,i,o=c.getNodeFromInstance(e).options;if(t){for(r={},i=0;i<n.length;i++)r[""+n[i]]=!0;for(i=0;i<o.length;i++){var a=r.hasOwnProperty(o[i].value);o[i].selected!==a&&(o[i].selected=a)}}else{for(r=""+n,i=0;i<o.length;i++)if(o[i].value===r)return void(o[i].selected=!0);o.length&&(o[0].selected=!0)}}function o(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),l.asap(r,this),n}var a=n(3),s=n(38),c=n(4),l=n(8),u=(n(2),!1),h={getHostProps:function(e,t){return a({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=s.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:o.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||u||(u=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var r=s.getValue(t);null!=r?(e._wrapperState.pendingUpdate=!1,i(e,Boolean(t.multiple),r)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?i(e,Boolean(t.multiple),t.defaultValue):i(e,Boolean(t.multiple),t.multiple?[]:""))}};e.exports=h},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){m&&d&&(m=!1,d.length?f=d.concat(f):g=-1,f.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=f.length;t;){for(d=f,f=[];++g<t;)d&&d[g].run();g=-1,t=f.length}d=null,m=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var u,h,p=e.exports={};!function(){try{u="function"===typeof setTimeout?setTimeout:n}catch(e){u=n}try{h="function"===typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var d,f=[],m=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new c(e,t)),1!==f.length||m||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function i(e){return"function"===typeof e&&"undefined"!==typeof e.prototype&&"function"===typeof e.prototype.mountComponent&&"function"===typeof e.prototype.receiveComponent}function o(e,t){var n;if(null===e||!1===e)n=l.create(o);else if("object"===typeof e){var s=e,c=s.type;if("function"!==typeof c&&"string"!==typeof c){var p="";p+=r(s._owner),a("130",null==c?c:typeof c,p)}"string"===typeof s.type?n=u.createInternalComponent(s):i(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new h(s)}else"string"===typeof e||"number"===typeof e?n=u.createInstanceForText(e):a("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}var a=n(1),s=n(3),c=n(140),l=n(70),u=n(71),h=(n(141),n(0),n(2),function(e){this.construct(e)});s(h.prototype,c,{_instantiateReactComponent:o}),e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(12),o=(n(0),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||!1===e?o.EMPTY:i.isValidElement(e)?"function"===typeof e.type?o.COMPOSITE:o.HOST:void r("26",e)}});e.exports=o},function(e,t,n){"use strict";var r,i={injectEmptyComponentFactory:function(e){r=e}},o={create:function(e){return r(e)}};o.injection=i,e.exports=o},function(e,t,n){"use strict";function r(e){return s||a("111",e.type),new s(e)}function i(e){return new c(e)}function o(e){return e instanceof c}var a=n(1),s=(n(0),null),c=null,l={injectGenericComponentClass:function(e){s=e},injectTextComponentClass:function(e){c=e}},u={createInternalComponent:r,createInstanceForText:i,isTextComponent:o,injection:l};e.exports=u},function(e,t,n){"use strict";function r(e,t){return e&&"object"===typeof e&&null!=e.key?l.escape(e.key):t.toString(36)}function i(e,t,n,o){var p=typeof e;if("undefined"!==p&&"boolean"!==p||(e=null),null===e||"string"===p||"number"===p||"object"===p&&e.$$typeof===s)return n(o,e,""===t?u+r(e,0):t),1;var d,f,m=0,g=""===t?u:t+h;if(Array.isArray(e))for(var v=0;v<e.length;v++)d=e[v],f=g+r(d,v),m+=i(d,f,n,o);else{var y=c(e);if(y){var x,b=y.call(e);if(y!==e.entries)for(var _=0;!(x=b.next()).done;)d=x.value,f=g+r(d,_++),m+=i(d,f,n,o);else for(;!(x=b.next()).done;){var w=x.value;w&&(d=w[1],f=g+l.escape(w[0])+h+r(d,0),m+=i(d,f,n,o))}}else if("object"===p){var E="",M=String(e);a("31","[object Object]"===M?"object with keys {"+Object.keys(e).join(", ")+"}":M,E)}}return m}function o(e,t,n){return null==e?0:i(e,"",t,n)}var a=n(1),s=(n(9),n(142)),c=n(143),l=(n(0),n(42)),u=(n(2),"."),h=":";e.exports=o},function(e,t,n){"use strict";function r(e){var t=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+t.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var i=t.call(e);return r.test(i)}catch(e){return!1}}function i(e){var t=l(e);if(t){var n=t.childIDs;u(e),n.forEach(i)}}function o(e,t,n){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")}function a(e){return null==e?"#empty":"string"===typeof e||"number"===typeof e?"#text":"string"===typeof e.type?e.type:e.type.displayName||e.type.name||"Unknown"}function s(e){var t,n=T.getDisplayName(e),r=T.getElement(e),i=T.getOwnerID(e);return i&&(t=T.getDisplayName(i)),o(n,r&&r._source,t)}var c,l,u,h,p,d,f,m=n(17),g=n(9),v=(n(0),n(2),"function"===typeof Array.from&&"function"===typeof Map&&r(Map)&&null!=Map.prototype&&"function"===typeof Map.prototype.keys&&r(Map.prototype.keys)&&"function"===typeof Set&&r(Set)&&null!=Set.prototype&&"function"===typeof Set.prototype.keys&&r(Set.prototype.keys));if(v){var y=new Map,x=new Set;c=function(e,t){y.set(e,t)},l=function(e){return y.get(e)},u=function(e){y.delete(e)},h=function(){return Array.from(y.keys())},p=function(e){x.add(e)},d=function(e){x.delete(e)},f=function(){return Array.from(x.keys())}}else{var b={},_={},w=function(e){return"."+e},E=function(e){return parseInt(e.substr(1),10)};c=function(e,t){var n=w(e);b[n]=t},l=function(e){var t=w(e);return b[t]},u=function(e){var t=w(e);delete b[t]},h=function(){return Object.keys(b).map(E)},p=function(e){var t=w(e);_[t]=!0},d=function(e){var t=w(e);delete _[t]},f=function(){return Object.keys(_).map(E)}}var M=[],T={onSetChildren:function(e,t){var n=l(e);n||m("144"),n.childIDs=t;for(var r=0;r<t.length;r++){var i=t[r],o=l(i);o||m("140"),null==o.childIDs&&"object"===typeof o.element&&null!=o.element&&m("141"),o.isMounted||m("71"),null==o.parentID&&(o.parentID=e),o.parentID!==e&&m("142",i,o.parentID,e)}},onBeforeMountComponent:function(e,t,n){c(e,{element:t,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0})},onBeforeUpdateComponent:function(e,t){var n=l(e);n&&n.isMounted&&(n.element=t)},onMountComponent:function(e){var t=l(e);t||m("144"),t.isMounted=!0,0===t.parentID&&p(e)},onUpdateComponent:function(e){var t=l(e);t&&t.isMounted&&t.updateCount++},onUnmountComponent:function(e){var t=l(e);if(t){t.isMounted=!1;0===t.parentID&&d(e)}M.push(e)},purgeUnmountedComponents:function(){if(!T._preventPurging){for(var e=0;e<M.length;e++){i(M[e])}M.length=0}},isMounted:function(e){var t=l(e);return!!t&&t.isMounted},getCurrentStackAddendum:function(e){var t="";if(e){var n=a(e),r=e._owner;t+=o(n,e._source,r&&r.getName())}var i=g.current,s=i&&i._debugID;return t+=T.getStackAddendumByID(s)},getStackAddendumByID:function(e){for(var t="";e;)t+=s(e),e=T.getParentID(e);return t},getChildIDs:function(e){var t=l(e);return t?t.childIDs:[]},getDisplayName:function(e){var t=T.getElement(e);return t?a(t):null},getElement:function(e){var t=l(e);return t?t.element:null},getOwnerID:function(e){var t=T.getElement(e);return t&&t._owner?t._owner._debugID:null},getParentID:function(e){var t=l(e);return t?t.parentID:null},getSource:function(e){var t=l(e),n=t?t.element:null;return null!=n?n._source:null},getText:function(e){var t=T.getElement(e);return"string"===typeof t?t:"number"===typeof t?""+t:null},getUpdateCount:function(e){var t=l(e);return t?t.updateCount:0},getRootIDs:f,getRegisteredIDs:h,pushNonStandardWarningStack:function(e,t){if("function"===typeof console.reactStack){var n=[],r=g.current,i=r&&r._debugID;try{for(e&&n.push({name:i?T.getDisplayName(i):null,fileName:t?t.fileName:null,lineNumber:t?t.lineNumber:null});i;){var o=T.getElement(i),a=T.getParentID(i),s=T.getOwnerID(i),c=s?T.getDisplayName(s):null,l=o&&o._source;n.push({name:c,fileName:l?l.fileName:null,lineNumber:l?l.lineNumber:null}),i=a}}catch(e){}console.reactStack(n)}},popNonStandardWarningStack:function(){"function"===typeof console.reactStackEnd&&console.reactStackEnd()}};e.exports=T},function(e,t,n){"use strict";var r=n(7),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=i},function(e,t,n){"use strict";function r(e){return o(document.documentElement,e)}var i=n(155),o=n(157),a=n(63),s=n(76),c={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:c.hasSelectionCapabilities(e)?c.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,i=e.selectionRange;t!==n&&r(n)&&(c.hasSelectionCapabilities(n)&&c.setSelection(n,i),a(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=i.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if(void 0===r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var o=e.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(e,t)}};e.exports=c},function(e,t,n){"use strict";function r(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=r},function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function i(e){return e?e.nodeType===N?e.documentElement:e.firstChild:null}function o(e){return e.getAttribute&&e.getAttribute(P)||""}function a(e,t,n,r,i){var o;if(_.logTopLevelRenders){var a=e._currentElement.props.child,s=a.type;o="React mount: "+("string"===typeof s?s:s.displayName||s.name),console.time(o)}var c=M.mountComponent(e,n,null,x(e,t),i,0);o&&console.timeEnd(o),e._renderedComponent._topLevelWrapper=e,k._mountImageIntoNode(c,t,e,r,n)}function s(e,t,n,r){var i=S.ReactReconcileTransaction.getPooled(!n&&b.useCreateElement);i.perform(a,null,e,t,i,n,r),S.ReactReconcileTransaction.release(i)}function c(e,t,n){for(M.unmountComponent(e,n),t.nodeType===N&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function l(e){var t=i(e);if(t){var n=y.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function u(e){return!(!e||e.nodeType!==O&&e.nodeType!==N&&e.nodeType!==D)}function h(e){var t=i(e),n=t&&y.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function p(e){var t=h(e);return t?t._hostContainerInfo._topLevelWrapper:null}var d=n(1),f=n(16),m=n(14),g=n(12),v=n(27),y=(n(9),n(4)),x=n(172),b=n(173),_=n(58),w=n(21),E=(n(6),n(174)),M=n(15),T=n(43),S=n(8),A=n(22),C=n(68),R=(n(0),n(25)),L=n(41),P=(n(2),m.ID_ATTRIBUTE_NAME),I=m.ROOT_ATTRIBUTE_NAME,O=1,N=9,D=11,U={},F=1,B=function(){this.rootID=F++};B.prototype.isReactComponent={},B.prototype.render=function(){return this.props.child},B.isReactTopLevelWrapper=!0;var k={TopLevelWrapper:B,_instancesByReactRootID:U,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r,i){return k.scrollMonitor(r,function(){T.enqueueElementInternal(e,t,n),i&&T.enqueueCallbackInternal(e,i)}),e},_renderNewRootComponent:function(e,t,n,r){u(t)||d("37"),v.ensureScrollValueMonitoring();var i=C(e,!1);S.batchedUpdates(s,i,t,n,r);var o=i._instance.rootID;return U[o]=i,i},renderSubtreeIntoContainer:function(e,t,n,r){return null!=e&&w.has(e)||d("38"),k._renderSubtreeIntoContainer(e,t,n,r)},_renderSubtreeIntoContainer:function(e,t,n,r){T.validateCallback(r,"ReactDOM.render"),g.isValidElement(t)||d("39","string"===typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"===typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=g.createElement(B,{child:t});if(e){var c=w.get(e);a=c._processChildContext(c._context)}else a=A;var u=p(n);if(u){var h=u._currentElement,f=h.props.child;if(L(f,t)){var m=u._renderedComponent.getPublicInstance(),v=r&&function(){r.call(m)};return k._updateRootComponent(u,s,a,n,v),m}k.unmountComponentAtNode(n)}var y=i(n),x=y&&!!o(y),b=l(n),_=x&&!u&&!b,E=k._renderNewRootComponent(s,n,_,a)._renderedComponent.getPublicInstance();return r&&r.call(E),E},render:function(e,t,n){return k._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){u(e)||d("40");var t=p(e);if(!t){l(e),1===e.nodeType&&e.hasAttribute(I);return!1}return delete U[t._instance.rootID],S.batchedUpdates(c,t,e,!1),!0},_mountImageIntoNode:function(e,t,n,o,a){if(u(t)||d("41"),o){var s=i(t);if(E.canReuseMarkup(e,s))return void y.precacheNode(n,s);var c=s.getAttribute(E.CHECKSUM_ATTR_NAME);s.removeAttribute(E.CHECKSUM_ATTR_NAME);var l=s.outerHTML;s.setAttribute(E.CHECKSUM_ATTR_NAME,c);var h=e,p=r(h,l),m=" (client) "+h.substring(p-20,p+20)+"\n (server) "+l.substring(p-20,p+20);t.nodeType===N&&d("42",m)}if(t.nodeType===N&&d("43"),a.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);f.insertTreeBefore(t,e,null)}else R(t,e),y.precacheNode(n,t.firstChild)}};e.exports=k},function(e,t,n){"use strict";function r(e){for(var t;(t=e._renderedNodeType)===i.COMPOSITE;)e=e._renderedComponent;return t===i.HOST?e._renderedComponent:t===i.EMPTY?null:void 0}var i=n(69);e.exports=r},function(e,t,n){n(80),e.exports=n(86)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(81).enable(),window.Promise=n(84)),n(85),Object.assign=n(3)},function(e,t,n){"use strict";function r(){l=!1,s._47=null,s._71=null}function i(e){function t(t){(e.allRejections||a(h[t].error,e.whitelist||c))&&(h[t].displayId=u++,e.onUnhandled?(h[t].logged=!0,e.onUnhandled(h[t].displayId,h[t].error)):(h[t].logged=!0,o(h[t].displayId,h[t].error)))}function n(t){h[t].logged&&(e.onHandled?e.onHandled(h[t].displayId,h[t].error):h[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+h[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+h[t].displayId+".")))}e=e||{},l&&r(),l=!0;var i=0,u=0,h={};s._47=function(e){2===e._83&&h[e._56]&&(h[e._56].logged?n(e._56):clearTimeout(h[e._56].timeout),delete h[e._56])},s._71=function(e,n){0===e._75&&(e._56=i++,h[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),a(n,c)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(46),c=[ReferenceError,TypeError,RangeError],l=!1;t.disable=r,t.enable=i},function(e,t,n){"use strict";(function(t){function n(e){a.length||(o(),s=!0),a[a.length]=e}function r(){for(;c<a.length;){var e=c;if(c+=1,a[e].call(),c>l){for(var t=0,n=a.length-c;t<n;t++)a[t]=a[t+c];a.length-=c,c=0}}a.length=0,c=0,s=!1}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var o,a=[],s=!1,c=0,l=1024,u="undefined"!==typeof t?t:self,h=u.MutationObserver||u.WebKitMutationObserver;o="function"===typeof h?function(e){var t=1,n=new h(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(t,n(83))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){var t=new i(i._44);return t._83=1,t._18=e,t}var i=n(46);e.exports=i;var o=r(!0),a=r(!1),s=r(null),c=r(void 0),l=r(0),u=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return c;if(!0===e)return o;if(!1===e)return a;if(0===e)return l;if(""===e)return u;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(e){r(a,e)},n))}var c=s.then;if("function"===typeof c){return void new i(c.bind(s)).then(function(e){r(a,e)},n)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)r(a,t[a])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function c(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function l(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&x(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!b(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var n=t.body;if(e instanceof d){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function f(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function m(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],x=function(e){return e&&DataView.prototype.isPrototypeOf(e)},b=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},v.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},h.call(d.prototype),h.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];g.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=d,e.Response=g,e.fetch=function(e,t){return new Promise(function(n,r){var i=new d(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:m(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new g(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&v.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(47),i=n.n(r),o=n(102),a=n.n(o),s=n(179),c=(n.n(s),n(180)),l=n(184);a.a.render(i.a.createElement(c.a,null),document.getElementById("root")),Object(l.a)()},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";function r(e){return(""+e).replace(b,"$&/")}function i(e,t){this.func=e,this.context=t,this.count=0}function o(e,t,n){var r=e.func,i=e.context;r.call(i,t,e.count++)}function a(e,t,n){if(null==e)return e;var r=i.getPooled(t,n);v(e,o,r),i.release(r)}function s(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function c(e,t,n){var i=e.result,o=e.keyPrefix,a=e.func,s=e.context,c=a.call(s,t,e.count++);Array.isArray(c)?l(c,i,n,g.thatReturnsArgument):null!=c&&(m.isValidElement(c)&&(c=m.cloneAndReplaceKey(c,o+(!c.key||t&&t.key===c.key?"":r(c.key)+"/")+n)),i.push(c))}function l(e,t,n,i,o){var a="";null!=n&&(a=r(n)+"/");var l=s.getPooled(t,a,i,o);v(e,c,l),s.release(l)}function u(e,t,n){if(null==e)return e;var r=[];return l(e,r,null,t,n),r}function h(e,t,n){return null}function p(e,t){return v(e,h,null)}function d(e){var t=[];return l(e,t,null,g.thatReturnsArgument),t}var f=n(89),m=n(13),g=n(7),v=n(90),y=f.twoArgumentPooler,x=f.fourArgumentPooler,b=/\/+/g;i.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},f.addPoolingTo(i,y),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},f.addPoolingTo(s,x);var _={forEach:a,map:u,mapIntoWithKeyPrefixInternal:l,count:p,toArray:d};e.exports=_},function(e,t,n){"use strict";var r=n(17),i=(n(0),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),o=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},a=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},s=function(e,t,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,e,t,n,r),o}return new i(e,t,n,r)},c=function(e){var t=this;e instanceof t||r("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},l=i,u=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=10),n.release=c,n},h={addPoolingTo:u,oneArgumentPooler:i,twoArgumentPooler:o,threeArgumentPooler:a,fourArgumentPooler:s};e.exports=h},function(e,t,n){"use strict";function r(e,t){return e&&"object"===typeof e&&null!=e.key?l.escape(e.key):t.toString(36)}function i(e,t,n,o){var p=typeof e;if("undefined"!==p&&"boolean"!==p||(e=null),null===e||"string"===p||"number"===p||"object"===p&&e.$$typeof===s)return n(o,e,""===t?u+r(e,0):t),1;var d,f,m=0,g=""===t?u:t+h;if(Array.isArray(e))for(var v=0;v<e.length;v++)d=e[v],f=g+r(d,v),m+=i(d,f,n,o);else{var y=c(e);if(y){var x,b=y.call(e);if(y!==e.entries)for(var _=0;!(x=b.next()).done;)d=x.value,f=g+r(d,_++),m+=i(d,f,n,o);else for(;!(x=b.next()).done;){var w=x.value;w&&(d=w[1],f=g+l.escape(w[0])+h+r(d,0),m+=i(d,f,n,o))}}else if("object"===p){var E="",M=String(e);a("31","[object Object]"===M?"object with keys {"+Object.keys(e).join(", ")+"}":M,E)}}return m}function o(e,t,n){return null==e?0:i(e,"",t,n)}var a=n(17),s=(n(9),n(51)),c=n(91),l=(n(0),n(92)),u=(n(2),"."),h=":";e.exports=o},function(e,t,n){"use strict";function r(e){var t=e&&(i&&e[i]||e[o]);if("function"===typeof t)return t}var i="function"===typeof Symbol&&Symbol.iterator,o="@@iterator";e.exports=r},function(e,t,n){"use strict";function r(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function i(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(t,function(e){return n[e]})}var o={escape:r,unescape:i};e.exports=o},function(e,t,n){"use strict";var r=n(13),i=r.createFactory,o={a:i("a"),abbr:i("abbr"),address:i("address"),area:i("area"),article:i("article"),aside:i("aside"),audio:i("audio"),b:i("b"),base:i("base"),bdi:i("bdi"),bdo:i("bdo"),big:i("big"),blockquote:i("blockquote"),body:i("body"),br:i("br"),button:i("button"),canvas:i("canvas"),caption:i("caption"),cite:i("cite"),code:i("code"),col:i("col"),colgroup:i("colgroup"),data:i("data"),datalist:i("datalist"),dd:i("dd"),del:i("del"),details:i("details"),dfn:i("dfn"),dialog:i("dialog"),div:i("div"),dl:i("dl"),dt:i("dt"),em:i("em"),embed:i("embed"),fieldset:i("fieldset"),figcaption:i("figcaption"),figure:i("figure"),footer:i("footer"),form:i("form"),h1:i("h1"),h2:i("h2"),h3:i("h3"),h4:i("h4"),h5:i("h5"),h6:i("h6"),head:i("head"),header:i("header"),hgroup:i("hgroup"),hr:i("hr"),html:i("html"),i:i("i"),iframe:i("iframe"),img:i("img"),input:i("input"),ins:i("ins"),kbd:i("kbd"),keygen:i("keygen"),label:i("label"),legend:i("legend"),li:i("li"),link:i("link"),main:i("main"),map:i("map"),mark:i("mark"),menu:i("menu"),menuitem:i("menuitem"),meta:i("meta"),meter:i("meter"),nav:i("nav"),noscript:i("noscript"),object:i("object"),ol:i("ol"),optgroup:i("optgroup"),option:i("option"),output:i("output"),p:i("p"),param:i("param"),picture:i("picture"),pre:i("pre"),progress:i("progress"),q:i("q"),rp:i("rp"),rt:i("rt"),ruby:i("ruby"),s:i("s"),samp:i("samp"),script:i("script"),section:i("section"),select:i("select"),small:i("small"),source:i("source"),span:i("span"),strong:i("strong"),style:i("style"),sub:i("sub"),summary:i("summary"),sup:i("sup"),table:i("table"),tbody:i("tbody"),td:i("td"),textarea:i("textarea"),tfoot:i("tfoot"),th:i("th"),thead:i("thead"),time:i("time"),title:i("title"),tr:i("tr"),track:i("track"),u:i("u"),ul:i("ul"),var:i("var"),video:i("video"),wbr:i("wbr"),circle:i("circle"),clipPath:i("clipPath"),defs:i("defs"),ellipse:i("ellipse"),g:i("g"),image:i("image"),line:i("line"),linearGradient:i("linearGradient"),mask:i("mask"),path:i("path"),pattern:i("pattern"),polygon:i("polygon"),polyline:i("polyline"),radialGradient:i("radialGradient"),rect:i("rect"),stop:i("stop"),svg:i("svg"),text:i("text"),tspan:i("tspan")};e.exports=o},function(e,t,n){"use strict";var r=n(13),i=r.isValidElement,o=n(52);e.exports=o(i)},function(e,t,n){"use strict";function r(){return null}var i=n(3),o=n(96),a=n(97),s=function(){};e.exports=function(e,t){function n(e){var t=e&&(T&&e[T]||e[S]);if("function"===typeof t)return t}function c(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function l(e){this.message=e,this.stack=""}function u(e){function n(n,r,i,a,s,c,u){if(a=a||A,c=c||i,u!==o){if(t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}return null==r[i]?n?new l(null===r[i]?"The "+s+" `"+c+"` is marked as required in `"+a+"`, but its value is `null`.":"The "+s+" `"+c+"` is marked as required in `"+a+"`, but its value is `undefined`."):null:e(r,i,a,s,c)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function h(e){function t(t,n,r,i,o,a){var s=t[n];if(_(s)!==e)return new l("Invalid "+i+" `"+o+"` of type `"+w(s)+"` supplied to `"+r+"`, expected `"+e+"`.");return null}return u(t)}function p(e){function t(t,n,r,i,a){if("function"!==typeof e)return new l("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){return new l("Invalid "+i+" `"+a+"` of type `"+_(s)+"` supplied to `"+r+"`, expected an array.")}for(var c=0;c<s.length;c++){var u=e(s,c,r,i,a+"["+c+"]",o);if(u instanceof Error)return u}return null}return u(t)}function d(e){function t(t,n,r,i,o){if(!(t[n]instanceof e)){var a=e.name||A;return new l("Invalid "+i+" `"+o+"` of type `"+M(t[n])+"` supplied to `"+r+"`, expected instance of `"+a+"`.")}return null}return u(t)}function f(e){function t(t,n,r,i,o){for(var a=t[n],s=0;s<e.length;s++)if(c(a,e[s]))return null;return new l("Invalid "+i+" `"+o+"` of value `"+a+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?u(t):r}function m(e){function t(t,n,r,i,a){if("function"!==typeof e)return new l("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],c=_(s);if("object"!==c)return new l("Invalid "+i+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var u in s)if(s.hasOwnProperty(u)){var h=e(s,u,r,i,a+"."+u,o);if(h instanceof Error)return h}return null}return u(t)}function g(e){function t(t,n,r,i,a){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,n,r,i,a,o))return null}return new l("Invalid "+i+" `"+a+"` supplied to `"+r+"`.")}if(!Array.isArray(e))return r;for(var n=0;n<e.length;n++){var i=e[n];if("function"!==typeof i)return s("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+E(i)+" at index "+n+"."),r}return u(t)}function v(e){function t(t,n,r,i,a){var s=t[n],c=_(s);if("object"!==c)return new l("Invalid "+i+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");for(var u in e){var h=e[u];if(h){var p=h(s,u,r,i,a+"."+u,o);if(p)return p}}return null}return u(t)}function y(e){function t(t,n,r,a,s){var c=t[n],u=_(c);if("object"!==u)return new l("Invalid "+a+" `"+s+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");var h=i({},t[n],e);for(var p in h){var d=e[p];if(!d)return new l("Invalid "+a+" `"+s+"` key `"+p+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var f=d(c,p,r,a,s+"."+p,o);if(f)return f}return null}return u(t)}function x(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(x);if(null===t||e(t))return!0;var r=n(t);if(!r)return!1;var i,o=r.call(t);if(r!==t.entries){for(;!(i=o.next()).done;)if(!x(i.value))return!1}else for(;!(i=o.next()).done;){var a=i.value;if(a&&!x(a[1]))return!1}return!0;default:return!1}}function b(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"===typeof Symbol&&t instanceof Symbol)}function _(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":b(t,e)?"symbol":t}function w(e){if("undefined"===typeof e||null===e)return""+e;var t=_(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function E(e){var t=w(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function M(e){return e.constructor&&e.constructor.name?e.constructor.name:A}var T="function"===typeof Symbol&&Symbol.iterator,S="@@iterator",A="<<anonymous>>",C={array:h("array"),bool:h("boolean"),func:h("function"),number:h("number"),object:h("object"),string:h("string"),symbol:h("symbol"),any:function(){return u(r)}(),arrayOf:p,element:function(){function t(t,n,r,i,o){var a=t[n];if(!e(a)){return new l("Invalid "+i+" `"+o+"` of type `"+_(a)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return u(t)}(),instanceOf:d,node:function(){function e(e,t,n,r,i){return x(e[t])?null:new l("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")}return u(e)}(),objectOf:m,oneOf:f,oneOfType:g,shape:v,exact:y};return l.prototype=Error.prototype,C.checkPropTypes=a,C.PropTypes=C,C}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e,t,n,r,i){}e.exports=r},function(e,t,n){"use strict";e.exports="15.6.2"},function(e,t,n){"use strict";var r=n(48),i=r.Component,o=n(13),a=o.isValidElement,s=n(49),c=n(100);e.exports=c(i,a,s)},function(e,t,n){"use strict";function r(e){return e}function i(e,t,n){function i(e,t){var n=y.hasOwnProperty(t)?y[t]:null;E.hasOwnProperty(t)&&s("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&s("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function l(e,n){if(n){s("function"!==typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),s(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,o=r.__reactAutoBindPairs;n.hasOwnProperty(c)&&b.mixins(e,n.mixins);for(var a in n)if(n.hasOwnProperty(a)&&a!==c){var l=n[a],u=r.hasOwnProperty(a);if(i(u,a),b.hasOwnProperty(a))b[a](e,l);else{var h=y.hasOwnProperty(a),f="function"===typeof l,m=f&&!h&&!u&&!1!==n.autobind;if(m)o.push(a,l),r[a]=l;else if(u){var g=y[a];s(h&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,a),"DEFINE_MANY_MERGED"===g?r[a]=p(r[a],l):"DEFINE_MANY"===g&&(r[a]=d(r[a],l))}else r[a]=l}}}else;}function u(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var i=n in b;s(!i,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var o=n in e;if(o){var a=x.hasOwnProperty(n)?x[n]:null;return s("DEFINE_MANY_MERGED"===a,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(e[n]=p(e[n],r))}e[n]=r}}}function h(e,t){s(e&&t&&"object"===typeof e&&"object"===typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(s(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function p(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return h(i,n),h(i,r),i}}function d(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function f(e,t){var n=t.bind(e);return n}function m(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e[r]=f(e,i)}}function g(e){var t=r(function(e,r,i){this.__reactAutoBindPairs.length&&m(this),this.props=e,this.context=r,this.refs=a,this.updater=i||n,this.state=null;var o=this.getInitialState?this.getInitialState():null;s("object"===typeof o&&!Array.isArray(o),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=o});t.prototype=new M,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],v.forEach(l.bind(null,t)),l(t,_),l(t,e),l(t,w),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),s(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var i in y)t.prototype[i]||(t.prototype[i]=null);return t}var v=[],y={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},x={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},b={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)l(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=o({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=o({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=p(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=o({},e.propTypes,t)},statics:function(e,t){u(e,t)},autobind:function(){}},_={componentDidMount:function(){this.__isMounted=!0}},w={componentWillUnmount:function(){this.__isMounted=!1}},E={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},M=function(){};return o(M.prototype,e.prototype,E),g}var o=n(3),a=n(22),s=n(0),c="mixins";e.exports=i},function(e,t,n){"use strict";function r(e){return o.isValidElement(e)||i("143"),e}var i=n(17),o=n(13);n(0);e.exports=r},function(e,t,n){"use strict";e.exports=n(103)},function(e,t,n){"use strict";var r=n(4),i=n(104),o=n(77),a=n(15),s=n(8),c=n(176),l=n(177),u=n(78),h=n(178);n(2);i.inject();var p={findDOMNode:l,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:c,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:h};"undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=u(e)),e?r.getNodeFromInstance(e):null}},Mount:o,Reconciler:a});e.exports=p},function(e,t,n){"use strict";function r(){E||(E=!0,y.EventEmitter.injectReactEventListener(v),y.EventPluginHub.injectEventPluginOrder(s),y.EventPluginUtils.injectComponentTree(p),y.EventPluginUtils.injectTreeTraversal(f),y.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:w,EnterLeaveEventPlugin:c,ChangeEventPlugin:a,SelectEventPlugin:_,BeforeInputEventPlugin:o}),y.HostComponent.injectGenericComponentClass(h),y.HostComponent.injectTextComponentClass(m),y.DOMProperty.injectDOMPropertyConfig(i),y.DOMProperty.injectDOMPropertyConfig(l),y.DOMProperty.injectDOMPropertyConfig(b),y.EmptyComponent.injectEmptyComponentFactory(function(e){return new d(e)}),y.Updates.injectReconcileTransaction(x),y.Updates.injectBatchingStrategy(g),y.Component.injectEnvironment(u))}var i=n(105),o=n(106),a=n(110),s=n(113),c=n(114),l=n(115),u=n(116),h=n(122),p=n(4),d=n(147),f=n(148),m=n(149),g=n(150),v=n(151),y=n(153),x=n(154),b=n(160),_=n(161),w=n(162),E=!1;e.exports={inject:r}},function(e,t,n){"use strict";var r={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};e.exports=r},function(e,t,n){"use strict";function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function i(e){switch(e){case"topCompositionStart":return T.compositionStart;case"topCompositionEnd":return T.compositionEnd;case"topCompositionUpdate":return T.compositionUpdate}}function o(e,t){return"topKeyDown"===e&&t.keyCode===y}function a(e,t){switch(e){case"topKeyUp":return-1!==v.indexOf(t.keyCode);case"topKeyDown":return t.keyCode!==y;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function s(e){var t=e.detail;return"object"===typeof t&&"data"in t?t.data:null}function c(e,t,n,r){var c,l;if(x?c=i(e):A?a(e,n)&&(c=T.compositionEnd):o(e,n)&&(c=T.compositionStart),!c)return null;w&&(A||c!==T.compositionStart?c===T.compositionEnd&&A&&(l=A.getData()):A=f.getPooled(r));var u=m.getPooled(c,t,n,r);if(l)u.data=l;else{var h=s(n);null!==h&&(u.data=h)}return p.accumulateTwoPhaseDispatches(u),u}function l(e,t){switch(e){case"topCompositionEnd":return s(t);case"topKeyPress":return t.which!==E?null:(S=!0,M);case"topTextInput":var n=t.data;return n===M&&S?null:n;default:return null}}function u(e,t){if(A){if("topCompositionEnd"===e||!x&&a(e,t)){var n=A.getData();return f.release(A),A=null,n}return null}switch(e){case"topPaste":return null;case"topKeyPress":return t.which&&!r(t)?String.fromCharCode(t.which):null;case"topCompositionEnd":return w?null:t.data;default:return null}}function h(e,t,n,r){var i;if(!(i=_?l(e,n):u(e,n)))return null;var o=g.getPooled(T.beforeInput,t,n,r);return o.data=i,p.accumulateTwoPhaseDispatches(o),o}var p=n(18),d=n(5),f=n(107),m=n(108),g=n(109),v=[9,13,27,32],y=229,x=d.canUseDOM&&"CompositionEvent"in window,b=null;d.canUseDOM&&"documentMode"in document&&(b=document.documentMode);var _=d.canUseDOM&&"TextEvent"in window&&!b&&!function(){var e=window.opera;return"object"===typeof e&&"function"===typeof e.version&&parseInt(e.version(),10)<=12}(),w=d.canUseDOM&&(!x||b&&b>8&&b<=11),E=32,M=String.fromCharCode(E),T={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},S=!1,A=null,C={eventTypes:T,extractEvents:function(e,t,n,r){return[c(e,t,n,r),h(e,t,n,r)]}};e.exports=C},function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var i=n(3),o=n(11),a=n(56);i(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=i.slice(e,s),this._fallbackText}}),o.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(10),o={data:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(10),o={data:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=S.getPooled(P.change,e,t,n);return r.type="change",w.accumulateTwoPhaseDispatches(r),r}function i(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function o(e){var t=r(O,e,C(e));T.batchedUpdates(a,t)}function a(e){_.enqueueEvents(e),_.processEventQueue(!1)}function s(e,t){I=e,O=t,I.attachEvent("onchange",o)}function c(){I&&(I.detachEvent("onchange",o),I=null,O=null)}function l(e,t){var n=A.updateValueIfChanged(e),r=!0===t.simulated&&U._allowSimulatedPassThrough;if(n||r)return e}function u(e,t){if("topChange"===e)return t}function h(e,t,n){"topFocus"===e?(c(),s(t,n)):"topBlur"===e&&c()}function p(e,t){I=e,O=t,I.attachEvent("onpropertychange",f)}function d(){I&&(I.detachEvent("onpropertychange",f),I=null,O=null)}function f(e){"value"===e.propertyName&&l(O,e)&&o(e)}function m(e,t,n){"topFocus"===e?(d(),p(t,n)):"topBlur"===e&&d()}function g(e,t,n){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return l(O,n)}function v(e){var t=e.nodeName;return t&&"input"===t.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function y(e,t,n){if("topClick"===e)return l(t,n)}function x(e,t,n){if("topInput"===e||"topChange"===e)return l(t,n)}function b(e,t){if(null!=e){var n=e._wrapperState||t._wrapperState;if(n&&n.controlled&&"number"===t.type){var r=""+t.value;t.getAttribute("value")!==r&&t.setAttribute("value",r)}}}var _=n(19),w=n(18),E=n(5),M=n(4),T=n(8),S=n(10),A=n(59),C=n(32),R=n(33),L=n(60),P={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},I=null,O=null,N=!1;E.canUseDOM&&(N=R("change")&&(!document.documentMode||document.documentMode>8));var D=!1;E.canUseDOM&&(D=R("input")&&(!document.documentMode||document.documentMode>9));var U={eventTypes:P,_allowSimulatedPassThrough:!0,_isInputEventSupported:D,extractEvents:function(e,t,n,o){var a,s,c=t?M.getNodeFromInstance(t):window;if(i(c)?N?a=u:s=h:L(c)?D?a=x:(a=g,s=m):v(c)&&(a=y),a){var l=a(e,t,n);if(l){return r(l,n,o)}}s&&s(e,c,t),"topBlur"===e&&b(t,c)}};e.exports=U},function(e,t,n){"use strict";function r(e,t,n){"function"===typeof e?e(t.getPublicInstance()):o.addComponentAsRefTo(t,e,n)}function i(e,t,n){"function"===typeof e?e(null):o.removeComponentAsRefFrom(t,e,n)}var o=n(112),a={};a.attachRefs=function(e,t){if(null!==t&&"object"===typeof t){var n=t.ref;null!=n&&r(n,e,t._owner)}},a.shouldUpdateRefs=function(e,t){var n=null,r=null;null!==e&&"object"===typeof e&&(n=e.ref,r=e._owner);var i=null,o=null;return null!==t&&"object"===typeof t&&(i=t.ref,o=t._owner),n!==i||"string"===typeof i&&o!==r},a.detachRefs=function(e,t){if(null!==t&&"object"===typeof t){var n=t.ref;null!=n&&i(n,e,t._owner)}},e.exports=a},function(e,t,n){"use strict";function r(e){return!(!e||"function"!==typeof e.attachRef||"function"!==typeof e.detachRef)}var i=n(1),o=(n(0),{addComponentAsRefTo:function(e,t,n){r(n)||i("119"),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(n)||i("120");var o=n.getPublicInstance();o&&o.refs[t]===e.getPublicInstance()&&n.detachRef(t)}});e.exports=o},function(e,t,n){"use strict";var r=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];e.exports=r},function(e,t,n){"use strict";var r=n(18),i=n(4),o=n(24),a={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},s={eventTypes:a,extractEvents:function(e,t,n,s){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==e&&"topMouseOver"!==e)return null;var c;if(s.window===s)c=s;else{var l=s.ownerDocument;c=l?l.defaultView||l.parentWindow:window}var u,h;if("topMouseOut"===e){u=t;var p=n.relatedTarget||n.toElement;h=p?i.getClosestInstanceFromNode(p):null}else u=null,h=t;if(u===h)return null;var d=null==u?c:i.getNodeFromInstance(u),f=null==h?c:i.getNodeFromInstance(h),m=o.getPooled(a.mouseLeave,u,n,s);m.type="mouseleave",m.target=d,m.relatedTarget=f;var g=o.getPooled(a.mouseEnter,h,n,s);return g.type="mouseenter",g.target=f,g.relatedTarget=d,r.accumulateEnterLeaveDispatches(m,g,u,h),[m,g]}};e.exports=s},function(e,t,n){"use strict";var r=n(14),i=r.injection.MUST_USE_PROPERTY,o=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,c=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,l={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,as:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:i|o,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,controlsList:0,coords:0,crossOrigin:0,data:0,dateTime:0,default:o,defer:o,dir:0,disabled:o,download:c,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:i|o,muted:i|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,playsInline:o,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,referrerPolicy:0,rel:0,required:o,reversed:o,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:i|o,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}};e.exports=l},function(e,t,n){"use strict";var r=n(35),i=n(121),o={processChildrenUpdates:i.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(16),o=n(5),a=n(118),s=n(7),c=(n(0),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(o.canUseDOM||r("56"),t||r("57"),"HTML"===e.nodeName&&r("58"),"string"===typeof t){var n=a(t,s)[0];e.parentNode.replaceChild(n,e)}else i.replaceChildWithTree(e,t)}});e.exports=c},function(e,t,n){"use strict";function r(e){var t=e.match(u);return t&&t[1].toLowerCase()}function i(e,t){var n=l;l||c(!1);var i=r(e),o=i&&s(i);if(o){n.innerHTML=o[1]+e+o[2];for(var u=o[0];u--;)n=n.lastChild}else n.innerHTML=e;var h=n.getElementsByTagName("script");h.length&&(t||c(!1),a(h).forEach(t));for(var p=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return p}var o=n(5),a=n(119),s=n(120),c=n(0),l=o.canUseDOM?document.createElement("div"):null,u=/^\s*<(\w+)/;e.exports=i},function(e,t,n){"use strict";function r(e){var t=e.length;if((Array.isArray(e)||"object"!==typeof e&&"function"!==typeof e)&&a(!1),"number"!==typeof t&&a(!1),0===t||t-1 in e||a(!1),"function"===typeof e.callee&&a(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function i(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function o(e){return i(e)?Array.isArray(e)?e.slice():r(e):[e]}var a=n(0);e.exports=o},function(e,t,n){"use strict";function r(e){return a||o(!1),p.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||(a.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?p[e]:null}var i=n(5),o=n(0),a=i.canUseDOM?document.createElement("div"):null,s={},c=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],u=[3,"<table><tbody><tr>","</tr></tbody></table>"],h=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:c,option:c,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:u,th:u};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach(function(e){p[e]=h,s[e]=!0}),e.exports=r},function(e,t,n){"use strict";var r=n(35),i=n(4),o={dangerouslyProcessChildrenUpdates:function(e,t){var n=i.getNodeFromInstance(e);r.processUpdates(n,t)}};e.exports=o},function(e,t,n){"use strict";function r(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function i(e,t){t&&(Z[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&g("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&g("60"),"object"===typeof t.dangerouslySetInnerHTML&&j in t.dangerouslySetInnerHTML||g("61")),null!=t.style&&"object"!==typeof t.style&&g("62",r(e)))}function o(e,t,n,r){if(!(r instanceof N)){var i=e._hostContainerInfo,o=i._node&&i._node.nodeType===W,s=o?i._node:i._ownerDocument;H(t,s),r.getReactMountReady().enqueue(a,{inst:e,registrationName:t,listener:n})}}function a(){var e=this;M.putListener(e.inst,e.registrationName,e.listener)}function s(){var e=this;R.postMountWrapper(e)}function c(){var e=this;I.postMountWrapper(e)}function l(){var e=this;L.postMountWrapper(e)}function u(){U.track(this)}function h(){var e=this;e._rootNodeID||g("63");var t=k(e);switch(t||g("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[S.trapBubbledEvent("topLoad","load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in X)X.hasOwnProperty(n)&&e._wrapperState.listeners.push(S.trapBubbledEvent(n,X[n],t));break;case"source":e._wrapperState.listeners=[S.trapBubbledEvent("topError","error",t)];break;case"img":e._wrapperState.listeners=[S.trapBubbledEvent("topError","error",t),S.trapBubbledEvent("topLoad","load",t)];break;case"form":e._wrapperState.listeners=[S.trapBubbledEvent("topReset","reset",t),S.trapBubbledEvent("topSubmit","submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[S.trapBubbledEvent("topInvalid","invalid",t)]}}function p(){P.postUpdateWrapper(this)}function d(e){Q.call(J,e)||(K.test(e)||g("65",e),J[e]=!0)}function f(e,t){return e.indexOf("-")>=0||null!=t.is}function m(e){var t=e.type;d(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var g=n(1),v=n(3),y=n(123),x=n(124),b=n(16),_=n(36),w=n(14),E=n(65),M=n(19),T=n(29),S=n(27),A=n(53),C=n(4),R=n(134),L=n(136),P=n(66),I=n(137),O=(n(6),n(138)),N=n(145),D=(n(7),n(26)),U=(n(0),n(33),n(40),n(59)),F=(n(44),n(2),A),B=M.deleteListener,k=C.getNodeFromInstance,H=S.listenTo,G=T.registrationNameModules,z={string:!0,number:!0},j="__html",V={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},W=11,X={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},q={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Y={listing:!0,pre:!0,textarea:!0},Z=v({menuitem:!0},q),K=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,J={},Q={}.hasOwnProperty,$=1;m.displayName="ReactDOMComponent",m.Mixin={mountComponent:function(e,t,n,r){this._rootNodeID=$++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var o=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(h,this);break;case"input":R.mountWrapper(this,o,t),o=R.getHostProps(this,o),e.getReactMountReady().enqueue(u,this),e.getReactMountReady().enqueue(h,this);break;case"option":L.mountWrapper(this,o,t),o=L.getHostProps(this,o);break;case"select":P.mountWrapper(this,o,t),o=P.getHostProps(this,o),e.getReactMountReady().enqueue(h,this);break;case"textarea":I.mountWrapper(this,o,t),o=I.getHostProps(this,o),e.getReactMountReady().enqueue(u,this),e.getReactMountReady().enqueue(h,this)}i(this,o);var a,p;null!=t?(a=t._namespaceURI,p=t._tag):n._tag&&(a=n._namespaceURI,p=n._tag),(null==a||a===_.svg&&"foreignobject"===p)&&(a=_.html),a===_.html&&("svg"===this._tag?a=_.svg:"math"===this._tag&&(a=_.mathml)),this._namespaceURI=a;var d;if(e.useCreateElement){var f,m=n._ownerDocument;if(a===_.html)if("script"===this._tag){var g=m.createElement("div"),v=this._currentElement.type;g.innerHTML="<"+v+"></"+v+">",f=g.removeChild(g.firstChild)}else f=o.is?m.createElement(this._currentElement.type,o.is):m.createElement(this._currentElement.type);else f=m.createElementNS(a,this._currentElement.type);C.precacheNode(this,f),this._flags|=F.hasCachedChildNodes,this._hostParent||E.setAttributeForRoot(f),this._updateDOMProperties(null,o,e);var x=b(f);this._createInitialChildren(e,o,r,x),d=x}else{var w=this._createOpenTagMarkupAndPutListeners(e,o),M=this._createContentMarkup(e,o,r);d=!M&&q[this._tag]?w+"/>":w+">"+M+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(s,this),o.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(c,this),o.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"select":case"button":o.autoFocus&&e.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(l,this)}return d},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(null!=i)if(G.hasOwnProperty(r))i&&o(this,r,i,e);else{"style"===r&&(i&&(i=this._previousStyleCopy=v({},t.style)),i=x.createMarkupForStyles(i,this));var a=null;null!=this._tag&&f(this._tag,t)?V.hasOwnProperty(r)||(a=E.createMarkupForCustomAttribute(r,i)):a=E.createMarkupForProperty(r,i),a&&(n+=" "+a)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+E.createMarkupForRoot()),n+=" "+E.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var r="",i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&(r=i.__html);else{var o=z[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)r=D(o);else if(null!=a){var s=this.mountChildren(a,e,n);r=s.join("")}}return Y[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(e,t,n,r){var i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&b.queueHTML(r,i.__html);else{var o=z[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)""!==o&&b.queueText(r,o);else if(null!=a)for(var s=this.mountChildren(a,e,n),c=0;c<s.length;c++)b.queueChild(r,s[c])}},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,r){var o=t.props,a=this._currentElement.props;switch(this._tag){case"input":o=R.getHostProps(this,o),a=R.getHostProps(this,a);break;case"option":o=L.getHostProps(this,o),a=L.getHostProps(this,a);break;case"select":o=P.getHostProps(this,o),a=P.getHostProps(this,a);break;case"textarea":o=I.getHostProps(this,o),a=I.getHostProps(this,a)}switch(i(this,a),this._updateDOMProperties(o,a,e),this._updateDOMChildren(o,a,e,r),this._tag){case"input":R.updateWrapper(this),U.updateValueIfChanged(this);break;case"textarea":I.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(p,this)}},_updateDOMProperties:function(e,t,n){var r,i,a;for(r in e)if(!t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&null!=e[r])if("style"===r){var s=this._previousStyleCopy;for(i in s)s.hasOwnProperty(i)&&(a=a||{},a[i]="");this._previousStyleCopy=null}else G.hasOwnProperty(r)?e[r]&&B(this,r):f(this._tag,e)?V.hasOwnProperty(r)||E.deleteValueForAttribute(k(this),r):(w.properties[r]||w.isCustomAttribute(r))&&E.deleteValueForProperty(k(this),r);for(r in t){var c=t[r],l="style"===r?this._previousStyleCopy:null!=e?e[r]:void 0;if(t.hasOwnProperty(r)&&c!==l&&(null!=c||null!=l))if("style"===r)if(c?c=this._previousStyleCopy=v({},c):this._previousStyleCopy=null,l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(a=a||{},a[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(a=a||{},a[i]=c[i])}else a=c;else if(G.hasOwnProperty(r))c?o(this,r,c,n):l&&B(this,r);else if(f(this._tag,t))V.hasOwnProperty(r)||E.setValueForAttribute(k(this),r,c);else if(w.properties[r]||w.isCustomAttribute(r)){var u=k(this);null!=c?E.setValueForProperty(u,r,c):E.deleteValueForProperty(u,r)}}a&&x.setValueForStyles(k(this),a,this)},_updateDOMChildren:function(e,t,n,r){var i=z[typeof e.children]?e.children:null,o=z[typeof t.children]?t.children:null,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,c=null!=i?null:e.children,l=null!=o?null:t.children,u=null!=i||null!=a,h=null!=o||null!=s;null!=c&&null==l?this.updateChildren(null,n,r):u&&!h&&this.updateTextContent(""),null!=o?i!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=l&&this.updateChildren(l,n,r)},getHostNode:function(){return k(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"input":case"textarea":U.stopTracking(this);break;case"html":case"head":case"body":g("66",this._tag)}this.unmountChildren(e),C.uncacheNode(this),M.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return k(this)}},v(m.prototype,m.Mixin,O.Mixin),e.exports=m},function(e,t,n){"use strict";var r=n(4),i=n(63),o={focusDOMComponent:function(){i(r.getNodeFromInstance(this))}};e.exports=o},function(e,t,n){"use strict";var r=n(64),i=n(5),o=(n(6),n(125),n(127)),a=n(128),s=n(130),c=(n(2),s(function(e){return a(e)})),l=!1,u="cssFloat";if(i.canUseDOM){var h=document.createElement("div").style;try{h.font=""}catch(e){l=!0}void 0===document.documentElement.style.cssFloat&&(u="styleFloat")}var p={createMarkupForStyles:function(e,t){var n="";for(var r in e)if(e.hasOwnProperty(r)){var i=0===r.indexOf("--"),a=e[r];null!=a&&(n+=c(r)+":",n+=o(r,a,t,i)+";")}return n||null},setValueForStyles:function(e,t,n){var i=e.style;for(var a in t)if(t.hasOwnProperty(a)){var s=0===a.indexOf("--"),c=o(a,t[a],n,s);if("float"!==a&&"cssFloat"!==a||(a=u),s)i.setProperty(a,c);else if(c)i[a]=c;else{var h=l&&r.shorthandPropertyExpansions[a];if(h)for(var p in h)i[p]="";else i[a]=""}}}};e.exports=p},function(e,t,n){"use strict";function r(e){return i(e.replace(o,"ms-"))}var i=n(126),o=/^-ms-/;e.exports=r},function(e,t,n){"use strict";function r(e){return e.replace(i,function(e,t){return t.toUpperCase()})}var i=/-(.)/g;e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){if(null==t||"boolean"===typeof t||""===t)return"";var i=isNaN(t);if(r||i||0===t||o.hasOwnProperty(e)&&o[e])return""+t;if("string"===typeof t){t=t.trim()}return t+"px"}var i=n(64),o=(n(2),i.isUnitlessNumber);e.exports=r},function(e,t,n){"use strict";function r(e){return i(e).replace(o,"-ms-")}var i=n(129),o=/^ms-/;e.exports=r},function(e,t,n){"use strict";function r(e){return e.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;e.exports=r},function(e,t,n){"use strict";function r(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=r},function(e,t,n){"use strict";function r(e){return'"'+i(e)+'"'}var i=n(26);e.exports=r},function(e,t,n){"use strict";function r(e){i.enqueueEvents(e),i.processEventQueue(!1)}var i=n(19),o={handleTopLevel:function(e,t,n,o){r(i.extractEvents(e,t,n,o))}};e.exports=o},function(e,t,n){"use strict";function r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function i(e){if(s[e])return s[e];if(!a[e])return e;var t=a[e];for(var n in t)if(t.hasOwnProperty(n)&&n in c)return s[e]=t[n];return""}var o=n(5),a={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},c={};o.canUseDOM&&(c=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),e.exports=i},function(e,t,n){"use strict";function r(){this._rootNodeID&&p.updateWrapper(this)}function i(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}function o(e){var t=this._currentElement.props,n=l.executeOnChange(t,e);h.asap(r,this);var i=t.name;if("radio"===t.type&&null!=i){for(var o=u.getNodeFromInstance(this),s=o;s.parentNode;)s=s.parentNode;for(var c=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),p=0;p<c.length;p++){var d=c[p];if(d!==o&&d.form===o.form){var f=u.getInstanceFromNode(d);f||a("90"),h.asap(r,f)}}}return n}var a=n(1),s=n(3),c=n(65),l=n(38),u=n(4),h=n(8),p=(n(0),n(2),{getHostProps:function(e,t){var n=l.getValue(t),r=l.getChecked(t);return s({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:o.bind(e),controlled:i(t)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&c.setValueForProperty(u.getNodeFromInstance(e),"checked",n||!1);var r=u.getNodeFromInstance(e),i=l.getValue(t);if(null!=i)if(0===i&&""===r.value)r.value="0";else if("number"===t.type){var o=parseFloat(r.value,10)||0;(i!=o||i==o&&r.value!=i)&&(r.value=""+i)}else r.value!==""+i&&(r.value=""+i);else null==t.value&&null!=t.defaultValue&&r.defaultValue!==""+t.defaultValue&&(r.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(r.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=u.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}});e.exports=p},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){var t="";return o.Children.forEach(e,function(e){null!=e&&("string"===typeof e||"number"===typeof e?t+=e:c||(c=!0))}),t}var i=n(3),o=n(12),a=n(4),s=n(66),c=(n(2),!1),l={mountWrapper:function(e,t,n){var i=null;if(null!=n){var o=n;"optgroup"===o._tag&&(o=o._hostParent),null!=o&&"select"===o._tag&&(i=s.getSelectValueContext(o))}var a=null;if(null!=i){var c;if(c=null!=t.value?t.value+"":r(t.children),a=!1,Array.isArray(i)){for(var l=0;l<i.length;l++)if(""+i[l]===c){a=!0;break}}else a=""+i===c}e._wrapperState={selected:a}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){a.getNodeFromInstance(e).setAttribute("value",t.value)}},getHostProps:function(e,t){var n=i({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var o=r(t.children);return o&&(n.children=o),n}};e.exports=l},function(e,t,n){"use strict";function r(){this._rootNodeID&&u.updateWrapper(this)}function i(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return l.asap(r,this),n}var o=n(1),a=n(3),s=n(38),c=n(4),l=n(8),u=(n(0),n(2),{getHostProps:function(e,t){return null!=t.dangerouslySetInnerHTML&&o("91"),a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=s.getValue(t),r=n;if(null==n){var a=t.defaultValue,c=t.children;null!=c&&(null!=a&&o("92"),Array.isArray(c)&&(c.length<=1||o("93"),c=c[0]),a=""+c),null==a&&(a=""),r=a}e._wrapperState={initialValue:""+r,listeners:null,onChange:i.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=c.getNodeFromInstance(e),r=s.getValue(t);if(null!=r){var i=""+r;i!==n.value&&(n.value=i),null==t.defaultValue&&(n.defaultValue=i)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=c.getNodeFromInstance(e),n=t.textContent;n===e._wrapperState.initialValue&&(t.value=n)}});e.exports=u},function(e,t,n){"use strict";function r(e,t,n){return{type:"INSERT_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function i(e,t,n){return{type:"MOVE_EXISTING",content:null,fromIndex:e._mountIndex,fromNode:p.getHostNode(e),toIndex:n,afterNode:t}}function o(e,t){return{type:"REMOVE_NODE",content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function a(e){return{type:"SET_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(e){return{type:"TEXT_CONTENT",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function c(e,t){return t&&(e=e||[],e.push(t)),e}function l(e,t){h.processChildrenUpdates(e,t)}var u=n(1),h=n(39),p=(n(21),n(6),n(9),n(15)),d=n(139),f=(n(7),n(144)),m=(n(0),{Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return d.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,r,i,o){var a,s=0;return a=f(t,s),d.updateChildren(e,a,n,r,i,this,this._hostContainerInfo,o,s),a},mountChildren:function(e,t,n){var r=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=r;var i=[],o=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],c=0,l=p.mountComponent(s,t,this,this._hostContainerInfo,n,c);s._mountIndex=o++,i.push(l)}return i},updateTextContent:function(e){var t=this._renderedChildren;d.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&u("118");l(this,[s(e)])},updateMarkup:function(e){var t=this._renderedChildren;d.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&u("118");l(this,[a(e)])},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var r=this._renderedChildren,i={},o=[],a=this._reconcilerUpdateChildren(r,e,o,i,t,n);if(a||r){var s,u=null,h=0,d=0,f=0,m=null;for(s in a)if(a.hasOwnProperty(s)){var g=r&&r[s],v=a[s];g===v?(u=c(u,this.moveChild(g,m,h,d)),d=Math.max(g._mountIndex,d),g._mountIndex=h):(g&&(d=Math.max(g._mountIndex,d)),u=c(u,this._mountChildAtIndex(v,o[f],m,h,t,n)),f++),h++,m=p.getHostNode(v)}for(s in i)i.hasOwnProperty(s)&&(u=c(u,this._unmountChild(r[s],i[s])));u&&l(this,u),this._renderedChildren=a}},unmountChildren:function(e){var t=this._renderedChildren;d.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,r){if(e._mountIndex<r)return i(e,t,n)},createChild:function(e,t,n){return r(n,t,e._mountIndex)},removeChild:function(e,t){return o(e,t)},_mountChildAtIndex:function(e,t,n,r,i,o){return e._mountIndex=r,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}});e.exports=m},function(e,t,n){"use strict";(function(t){function r(e,t,n,r){var i=void 0===e[n];null!=t&&i&&(e[n]=o(t,!0))}var i=n(15),o=n(68),a=(n(42),n(41)),s=n(72);n(2);"undefined"!==typeof t&&Object({NODE_ENV:"production",PUBLIC_URL:""});var c={instantiateChildren:function(e,t,n,i){if(null==e)return null;var o={};return s(e,r,o),o},updateChildren:function(e,t,n,r,s,c,l,u,h){if(t||e){var p,d;for(p in t)if(t.hasOwnProperty(p)){d=e&&e[p];var f=d&&d._currentElement,m=t[p];if(null!=d&&a(f,m))i.receiveComponent(d,m,s,u),t[p]=d;else{d&&(r[p]=i.getHostNode(d),i.unmountComponent(d,!1));var g=o(m,!0);t[p]=g;var v=i.mountComponent(g,s,c,l,u,h);n.push(v)}}for(p in e)!e.hasOwnProperty(p)||t&&t.hasOwnProperty(p)||(d=e[p],r[p]=i.getHostNode(d),i.unmountComponent(d,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];i.unmountComponent(r,t)}}};e.exports=c}).call(t,n(67))},function(e,t,n){"use strict";function r(e){}function i(e){return!(!e.prototype||!e.prototype.isReactComponent)}function o(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}var a=n(1),s=n(3),c=n(12),l=n(39),u=n(9),h=n(31),p=n(21),d=(n(6),n(69)),f=n(15),m=n(22),g=(n(0),n(40)),v=n(41),y=(n(2),{ImpureClass:0,PureClass:1,StatelessFunctional:2});r.prototype.render=function(){var e=p.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return t};var x=1,b={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,s){this._context=s,this._mountOrder=x++,this._hostParent=t,this._hostContainerInfo=n;var l,u=this._currentElement.props,h=this._processContext(s),d=this._currentElement.type,f=e.getUpdateQueue(),g=i(d),v=this._constructComponent(g,u,h,f);g||null!=v&&null!=v.render?o(d)?this._compositeType=y.PureClass:this._compositeType=y.ImpureClass:(l=v,null===v||!1===v||c.isValidElement(v)||a("105",d.displayName||d.name||"Component"),v=new r(d),this._compositeType=y.StatelessFunctional);v.props=u,v.context=h,v.refs=m,v.updater=f,this._instance=v,p.set(v,this);var b=v.state;void 0===b&&(v.state=b=null),("object"!==typeof b||Array.isArray(b))&&a("106",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var _;return _=v.unstable_handleError?this.performInitialMountWithErrorHandling(l,t,n,e,s):this.performInitialMount(l,t,n,e,s),v.componentDidMount&&e.getReactMountReady().enqueue(v.componentDidMount,v),_},_constructComponent:function(e,t,n,r){return this._constructComponentWithoutOwner(e,t,n,r)},_constructComponentWithoutOwner:function(e,t,n,r){var i=this._currentElement.type;return e?new i(t,n,r):i(t,n,r)},performInitialMountWithErrorHandling:function(e,t,n,r,i){var o,a=r.checkpoint();try{o=this.performInitialMount(e,t,n,r,i)}catch(s){r.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(a),o=this.performInitialMount(e,t,n,r,i)}return o},performInitialMount:function(e,t,n,r,i){var o=this._instance,a=0;o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===e&&(e=this._renderValidatedComponent());var s=d.getType(e);this._renderedNodeType=s;var c=this._instantiateReactComponent(e,s!==d.EMPTY);this._renderedComponent=c;var l=f.mountComponent(c,r,t,n,this._processChildContext(i),a);return l},getHostNode:function(){return f.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";h.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(f.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,p.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return m;var r={};for(var i in n)r[i]=e[i];return r},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t,n=this._currentElement.type,r=this._instance;if(r.getChildContext&&(t=r.getChildContext()),t){"object"!==typeof n.childContextTypes&&a("107",this.getName()||"ReactCompositeComponent");for(var i in t)i in n.childContextTypes||a("108",this.getName()||"ReactCompositeComponent",i);return s({},e,t)}return e},_checkContextTypes:function(e,t,n){},receiveComponent:function(e,t,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,r,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?f.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,r,i){var o=this._instance;null==o&&a("136",this.getName()||"ReactCompositeComponent");var s,c=!1;this._context===i?s=o.context:(s=this._processContext(i),c=!0);var l=t.props,u=n.props;t!==n&&(c=!0),c&&o.componentWillReceiveProps&&o.componentWillReceiveProps(u,s);var h=this._processPendingState(u,s),p=!0;this._pendingForceUpdate||(o.shouldComponentUpdate?p=o.shouldComponentUpdate(u,h,s):this._compositeType===y.PureClass&&(p=!g(l,u)||!g(o.state,h))),this._updateBatchNumber=null,p?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,u,h,s,e,i)):(this._currentElement=n,this._context=i,o.props=u,o.state=h,o.context=s)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var o=s({},i?r[0]:n.state),a=i?1:0;a<r.length;a++){var c=r[a];s(o,"function"===typeof c?c.call(n,o,e,t):c)}return o},_performComponentUpdate:function(e,t,n,r,i,o){var a,s,c,l=this._instance,u=Boolean(l.componentDidUpdate);u&&(a=l.props,s=l.state,c=l.context),l.componentWillUpdate&&l.componentWillUpdate(t,n,r),this._currentElement=e,this._context=o,l.props=t,l.state=n,l.context=r,this._updateRenderedComponent(i,o),u&&i.getReactMountReady().enqueue(l.componentDidUpdate.bind(l,a,s,c),l)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,i=this._renderValidatedComponent(),o=0;if(v(r,i))f.receiveComponent(n,i,e,this._processChildContext(t));else{var a=f.getHostNode(n);f.unmountComponent(n,!1);var s=d.getType(i);this._renderedNodeType=s;var c=this._instantiateReactComponent(i,s!==d.EMPTY);this._renderedComponent=c;var l=f.mountComponent(c,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),o);this._replaceNodeWithMarkup(a,l,n)}},_replaceNodeWithMarkup:function(e,t,n){l.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance;return e.render()},_renderValidatedComponent:function(){var e;if(this._compositeType!==y.StatelessFunctional){u.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{u.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||!1===e||c.isValidElement(e)||a("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n&&a("110");var r=t.getPublicInstance();(n.refs===m?n.refs={}:n.refs)[e]=r},detachRef:function(e){delete this.getPublicInstance().refs[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===y.StatelessFunctional?null:e},_instantiateReactComponent:null};e.exports=b},function(e,t,n){"use strict";function r(){return i++}var i=1;e.exports=r},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=r},function(e,t,n){"use strict";function r(e){var t=e&&(i&&e[i]||e[o]);if("function"===typeof t)return t}var i="function"===typeof Symbol&&Symbol.iterator,o="@@iterator";e.exports=r},function(e,t,n){"use strict";(function(t){function r(e,t,n,r){if(e&&"object"===typeof e){var i=e,o=void 0===i[n];o&&null!=t&&(i[n]=t)}}function i(e,t){if(null==e)return e;var n={};return o(e,r,n),n}var o=(n(42),n(72));n(2);"undefined"!==typeof t&&Object({NODE_ENV:"production",PUBLIC_URL:""}),e.exports=i}).call(t,n(67))},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new s(this)}var i=n(3),o=n(11),a=n(23),s=(n(6),n(146)),c=[],l={enqueue:function(){}},u={getTransactionWrappers:function(){return c},getReactMountReady:function(){return l},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};i(r.prototype,a,u),o.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(43),o=(n(2),function(){function e(t){r(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&i.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()&&i.enqueueForceUpdate(e)},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()&&i.enqueueReplaceState(e,t)},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()&&i.enqueueSetState(e,t)},e}());e.exports=o},function(e,t,n){"use strict";var r=n(3),i=n(16),o=n(4),a=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(a.prototype,{mountComponent:function(e,t,n,r){var a=n._idCounter++;this._domID=a,this._hostParent=t,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(e.useCreateElement){var c=n._ownerDocument,l=c.createComment(s);return o.precacheNode(this,l),i(l)}return e.renderToStaticMarkup?"":"\x3c!--"+s+"--\x3e"},receiveComponent:function(){},getHostNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),e.exports=a},function(e,t,n){"use strict";function r(e,t){"_hostNode"in e||c("33"),"_hostNode"in t||c("33");for(var n=0,r=e;r;r=r._hostParent)n++;for(var i=0,o=t;o;o=o._hostParent)i++;for(;n-i>0;)e=e._hostParent,n--;for(;i-n>0;)t=t._hostParent,i--;for(var a=n;a--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function i(e,t){"_hostNode"in e||c("35"),"_hostNode"in t||c("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function o(e){return"_hostNode"in e||c("36"),e._hostParent}function a(e,t,n){for(var r=[];e;)r.push(e),e=e._hostParent;var i;for(i=r.length;i-- >0;)t(r[i],"captured",n);for(i=0;i<r.length;i++)t(r[i],"bubbled",n)}function s(e,t,n,i,o){for(var a=e&&t?r(e,t):null,s=[];e&&e!==a;)s.push(e),e=e._hostParent;for(var c=[];t&&t!==a;)c.push(t),t=t._hostParent;var l;for(l=0;l<s.length;l++)n(s[l],"bubbled",i);for(l=c.length;l-- >0;)n(c[l],"captured",o)}var c=n(1);n(0);e.exports={isAncestor:i,getLowestCommonAncestor:r,getParentInstance:o,traverseTwoPhase:a,traverseEnterLeave:s}},function(e,t,n){"use strict";var r=n(1),i=n(3),o=n(35),a=n(16),s=n(4),c=n(26),l=(n(0),n(44),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});i(l.prototype,{mountComponent:function(e,t,n,r){var i=n._idCounter++,o=" react-text: "+i+" ";if(this._domID=i,this._hostParent=t,e.useCreateElement){var l=n._ownerDocument,u=l.createComment(o),h=l.createComment(" /react-text "),p=a(l.createDocumentFragment());return a.queueChild(p,a(u)),this._stringText&&a.queueChild(p,a(l.createTextNode(this._stringText))),a.queueChild(p,a(h)),s.precacheNode(this,u),this._closingComment=h,p}var d=c(this._stringText);return e.renderToStaticMarkup?d:"\x3c!--"+o+"--\x3e"+d+"\x3c!-- /react-text --\x3e"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();o.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=s.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n&&r("67",this._domID),8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),e.exports=l},function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var i=n(3),o=n(8),a=n(23),s=n(7),c={initialize:s,close:function(){p.isBatchingUpdates=!1}},l={initialize:s,close:o.flushBatchedUpdates.bind(o)},u=[l,c];i(r.prototype,a,{getTransactionWrappers:function(){return u}});var h=new r,p={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,i,o){var a=p.isBatchingUpdates;return p.isBatchingUpdates=!0,a?e(t,n,r,i,o):h.perform(e,null,t,n,r,i,o)}};e.exports=p},function(e,t,n){"use strict";function r(e){for(;e._hostParent;)e=e._hostParent;var t=h.getNodeFromInstance(e),n=t.parentNode;return h.getClosestInstanceFromNode(n)}function i(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function o(e){var t=d(e.nativeEvent),n=h.getClosestInstanceFromNode(t),i=n;do{e.ancestors.push(i),i=i&&r(i)}while(i);for(var o=0;o<e.ancestors.length;o++)n=e.ancestors[o],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,d(e.nativeEvent))}function a(e){e(f(window))}var s=n(3),c=n(74),l=n(5),u=n(11),h=n(4),p=n(8),d=n(32),f=n(152);s(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),u.addPoolingTo(i,u.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){return n?c.listen(n,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?c.capture(n,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=a.bind(null,e);c.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=i.getPooled(e,t);try{p.batchedUpdates(o,n)}finally{i.release(n)}}}};e.exports=m},function(e,t,n){"use strict";function r(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=r},function(e,t,n){"use strict";var r=n(14),i=n(19),o=n(30),a=n(39),s=n(70),c=n(27),l=n(71),u=n(8),h={Component:a.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:i.injection,EventPluginUtils:o.injection,EventEmitter:c.injection,HostComponent:l.injection,Updates:u.injection};e.exports=h},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=e}var i=n(3),o=n(57),a=n(11),s=n(27),c=n(75),l=(n(6),n(23)),u=n(43),h={initialize:c.getSelectionInformation,close:c.restoreSelection},p={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f=[h,p,d],m={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return u},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};i(r.prototype,l,m),a.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function i(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var o=i.text.length;return{start:o,end:o+r}}function o(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,i=t.anchorOffset,o=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(e){return null}var c=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),l=c?0:s.toString().length,u=s.cloneRange();u.selectNodeContents(e),u.setEnd(s.startContainer,s.startOffset);var h=r(u.startContainer,u.startOffset,u.endContainer,u.endOffset),p=h?0:u.toString().length,d=p+l,f=document.createRange();f.setStart(n,i),f.setEnd(o,a);var m=f.collapsed;return{start:m?d:p,end:m?p:d}}function a(e,t){var n,r,i=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),i.moveToElementText(e),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),r=e[u()].length,i=Math.min(t.start,r),o=void 0===t.end?i:Math.min(t.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=l(e,i),c=l(e,o);if(s&&c){var h=document.createRange();h.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(h),n.extend(c.node,c.offset)):(h.setEnd(c.node,c.offset),n.addRange(h))}}}var c=n(5),l=n(156),u=n(56),h=c.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:h?i:o,setOffsets:h?a:s};e.exports=p},function(e,t,n){"use strict";function r(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function o(e,t){for(var n=r(e),o=0,a=0;n;){if(3===n.nodeType){if(a=o+n.textContent.length,o<=t&&a>=t)return{node:n,offset:t-o};o=a}n=r(i(n))}}e.exports=o},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!i(e)&&(i(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var i=n(158);e.exports=r},function(e,t,n){"use strict";function r(e){return i(e)&&3==e.nodeType}var i=n(159);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"===typeof n.Node?e instanceof n.Node:"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName))}e.exports=r},function(e,t,n){"use strict";var r={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},i={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},o={Properties:{},DOMAttributeNamespaces:{xlinkActuate:r.xlink,xlinkArcrole:r.xlink,xlinkHref:r.xlink,xlinkRole:r.xlink,xlinkShow:r.xlink,xlinkTitle:r.xlink,xlinkType:r.xlink,xmlBase:r.xml,xmlLang:r.xml,xmlSpace:r.xml},DOMAttributeNames:{}};Object.keys(i).forEach(function(e){o.Properties[e]=0,i[e]&&(o.DOMAttributeNames[e]=i[e])}),e.exports=o},function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&c.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(e,t){if(y||null==m||m!==u())return null;var n=r(m);if(!v||!p(v,n)){v=n;var i=l.getPooled(f.select,g,e,t);return i.type="select",i.target=m,o.accumulateTwoPhaseDispatches(i),i}return null}var o=n(18),a=n(5),s=n(4),c=n(75),l=n(10),u=n(76),h=n(60),p=n(40),d=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,f={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},m=null,g=null,v=null,y=!1,x=!1,b={eventTypes:f,extractEvents:function(e,t,n,r){if(!x)return null;var o=t?s.getNodeFromInstance(t):window;switch(e){case"topFocus":(h(o)||"true"===o.contentEditable)&&(m=o,g=t,v=null);break;case"topBlur":m=null,g=null,v=null;break;case"topMouseDown":y=!0;break;case"topContextMenu":case"topMouseUp":return y=!1,i(n,r);case"topSelectionChange":if(d)break;case"topKeyDown":case"topKeyUp":return i(n,r)}return null},didPutListener:function(e,t,n){"onSelect"===t&&(x=!0)}};e.exports=b},function(e,t,n){"use strict";function r(e){return"."+e._rootNodeID}function i(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}var o=n(1),a=n(74),s=n(18),c=n(4),l=n(163),u=n(164),h=n(10),p=n(165),d=n(166),f=n(24),m=n(168),g=n(169),v=n(170),y=n(20),x=n(171),b=n(7),_=n(45),w=(n(0),{}),E={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t,r="top"+t,i={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r]};w[e]=i,E[r]=i});var M={},T={eventTypes:w,extractEvents:function(e,t,n,r){var i=E[e];if(!i)return null;var a;switch(e){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":a=h;break;case"topKeyPress":if(0===_(n))return null;case"topKeyDown":case"topKeyUp":a=d;break;case"topBlur":case"topFocus":a=p;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":a=f;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":a=m;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":a=g;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":a=l;break;case"topTransitionEnd":a=v;break;case"topScroll":a=y;break;case"topWheel":a=x;break;case"topCopy":case"topCut":case"topPaste":a=u}a||o("86",e);var c=a.getPooled(i,t,n,r);return s.accumulateTwoPhaseDispatches(c),c},didPutListener:function(e,t,n){if("onClick"===t&&!i(e._tag)){var o=r(e),s=c.getNodeFromInstance(e);M[o]||(M[o]=a.listen(s,"click",b))}},willDeleteListener:function(e,t){if("onClick"===t&&!i(e._tag)){var n=r(e);M[n].remove(),delete M[n]}}};e.exports=T},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(10),o={animationName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(10),o={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(20),o={relatedTarget:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(20),o=n(45),a=n(167),s=n(34),c={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?o(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?o(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};i.augmentClass(r,c),e.exports=r},function(e,t,n){"use strict";function r(e){if(e.key){var t=o[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=i(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?a[e.keyCode]||"Unidentified":""}var i=n(45),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(24),o={dataTransfer:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(20),o=n(34),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};i.augmentClass(r,a),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(10),o={propertyName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(24),o={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t){var n={_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===i?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null};return n}var i=(n(44),9);e.exports=r},function(e,t,n){"use strict";var r={useCreateElement:!0,useFiber:!1};e.exports=r},function(e,t,n){"use strict";var r=n(175),i=/\/?>/,o=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return o.test(e)?e:e.replace(i," "+a.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(a.CHECKSUM_ATTR_NAME);return n=n&&parseInt(n,10),r(e)===n}};e.exports=a},function(e,t,n){"use strict";function r(e){for(var t=1,n=0,r=0,o=e.length,a=-4&o;r<a;){for(var s=Math.min(r+4096,a);r<s;r+=4)n+=(t+=e.charCodeAt(r))+(t+=e.charCodeAt(r+1))+(t+=e.charCodeAt(r+2))+(t+=e.charCodeAt(r+3));t%=i,n%=i}for(;r<o;r++)n+=t+=e.charCodeAt(r);return t%=i,n%=i,t|n<<16}var i=65521;e.exports=r},function(e,t,n){"use strict";e.exports="15.6.2"},function(e,t,n){"use strict";function r(e){if(null==e)return null;if(1===e.nodeType)return e;var t=a.get(e);if(t)return t=s(t),t?o.getNodeFromInstance(t):null;"function"===typeof e.render?i("44"):i("45",Object.keys(e))}var i=n(1),o=(n(9),n(4)),a=n(21),s=n(78);n(0),n(2);e.exports=r},function(e,t,n){"use strict";var r=n(77);e.exports=r.renderSubtreeIntoContainer},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(47),s=n.n(a),c=n(28),l=(n.n(c),n(181)),u=(n.n(l),n(182)),h=(n.n(u),n(183)),p=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),d=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.start=o.start.bind(o),o.stop=o.stop.bind(o),o.animate=o.animate.bind(o),o}return o(t,e),p(t,[{key:"componentDidMount",value:function(){var e=this,t=window.innerWidth,n=window.innerHeight;this.scene=new c.Scene,this.camera=new c.PerspectiveCamera(75,t/n,.1,1e3),this.renderer=new c.WebGLRenderer({antialias:!0}),this.renderer.setClearColor("#000000"),this.renderer.setSize(t,n),this.controls=new c.OrbitControls(this.camera),this.camera.position.y=5,this.camera.position.z=0,this.controls.target=new c.Vector3(10,0,-15),this.controls.update(),this.scene.add(new c.GridHelper(100,50));var r=new c.HemisphereLight(12303359,4473890);r.position.set(0,5,0),this.scene.add(r),(new c.GLTFLoader).load("models/rak.glb",function(t){console.log("GLTF loaded"),e.scene.add(t.scene)},function(e){console.log("Loading...")},function(e){console.log("An error occurred",e)}),this.div.appendChild(this.renderer.domElement),this.start()}},{key:"componentWillUnmount",value:function(){this.stop(),this.div.removeChild(this.renderer.domElement)}},{key:"start",value:function(){this.frame||(this.frame=requestAnimationFrame(this.animate))}},{key:"stop",value:function(){cancelAnimationFrame(this.frame)}},{key:"animate",value:function(){this.frame=window.requestAnimationFrame(this.animate),this.controls.update(),this.renderScene()}},{key:"renderScene",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{ref:function(t){e.div=t}})}}]),t}(a.Component);t.a=d},function(e,t,n){(function(e){e.GLTFLoader=function(){function t(t){this.manager=void 0!==t?t:e.DefaultLoadingManager,this.dracoLoader=null}function n(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}function r(){if(!e.DDSLoader)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=S.MSFT_TEXTURE_DDS,this.ddsLoader=new e.DDSLoader}function i(t){this.name=S.KHR_LIGHTS_PUNCTUAL,this.lights=[];for(var n=t.extensions&&t.extensions[S.KHR_LIGHTS_PUNCTUAL]||{},r=n.lights||[],i=0;i<r.length;i++){var o,a=r[i],s=new e.Color(16777215);void 0!==a.color&&s.fromArray(a.color);var c=void 0!==a.range?a.range:0;switch(a.type){case"directional":o=new e.DirectionalLight(s),o.target.position.set(0,0,1),o.add(o.target);break;case"point":o=new e.PointLight(s),o.distance=c;break;case"spot":o=new e.SpotLight(s),o.distance=c,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,o.angle=a.spot.outerConeAngle,o.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,o.target.position.set(0,0,1),o.add(o.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+a.type+'".')}o.decay=2,void 0!==a.intensity&&(o.intensity=a.intensity),o.name=a.name||"light_"+i,this.lights.push(o)}}function o(e){this.name=S.KHR_MATERIALS_UNLIT}function a(t){this.name=S.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,C);if(this.header={magic:e.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==A)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var r=new DataView(t,C),i=0;i<r.byteLength;){var o=r.getUint32(i,!0);i+=4;var a=r.getUint32(i,!0);if(i+=4,a===R.JSON){var s=new Uint8Array(t,C+i,o);this.content=e.LoaderUtils.decodeText(s)}else if(a===R.BIN){var c=C+i;this.body=t.slice(c,c+o)}i+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function s(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=S.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function c(){return{name:S.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return e.ShaderMaterial},extendParams:function(t,n,r){var i=n.extensions[this.name],o=e.ShaderLib.standard,a=e.UniformsUtils.clone(o.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),c=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),u=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),p=o.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",c).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",u).replace("#include <lights_physical_fragment>",h);delete a.roughness,delete a.metalness,delete a.roughnessMap,delete a.metalnessMap,a.specular={value:(new e.Color).setHex(1118481)},a.glossiness={value:.5},a.specularMap={value:null},a.glossinessMap={value:null},t.vertexShader=o.vertexShader,t.fragmentShader=p,t.uniforms=a,t.defines={STANDARD:""},t.color=new e.Color(1,1,1),t.opacity=1;var d=[];if(Array.isArray(i.diffuseFactor)){var f=i.diffuseFactor;t.color.fromArray(f),t.opacity=f[3]}if(void 0!==i.diffuseTexture&&d.push(r.assignTexture(t,"map",i.diffuseTexture.index)),t.emissive=new e.Color(0,0,0),t.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,t.specular=new e.Color(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var m=i.specularGlossinessTexture.index;d.push(r.assignTexture(t,"glossinessMap",m)),d.push(r.assignTexture(t,"specularMap",m))}return Promise.all(d)},createMaterial:function(t){var n=new e.ShaderMaterial({defines:t.defines,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,fog:!0,lights:!0,opacity:t.opacity,transparent:t.transparent});return n.isGLTFSpecularGlossinessMaterial=!0,n.color=t.color,n.map=void 0===t.map?null:t.map,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=void 0===t.aoMap?null:t.aoMap,n.aoMapIntensity=1,n.emissive=t.emissive,n.emissiveIntensity=1,n.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,n.bumpMap=void 0===t.bumpMap?null:t.bumpMap,n.bumpScale=1,n.normalMap=void 0===t.normalMap?null:t.normalMap,t.normalScale&&(n.normalScale=t.normalScale),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=void 0===t.specularMap?null:t.specularMap,n.specular=t.specular,n.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,n.glossiness=t.glossiness,n.alphaMap=null,n.envMap=void 0===t.envMap?null:t.envMap,n.envMapIntensity=1,n.refractionRatio=.98,n.extensions.derivatives=!0,n},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,r=0,i=n.length;r<i;r++)t[n[r]]=e[n[r]];return t},refreshUniforms:function(e,t,n,r,i,o){if(!0===i.isGLTFSpecularGlossinessMaterial){var a=i.uniforms,s=i.defines;a.opacity.value=i.opacity,a.diffuse.value.copy(i.color),a.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),a.map.value=i.map,a.specularMap.value=i.specularMap,a.alphaMap.value=i.alphaMap,a.lightMap.value=i.lightMap,a.lightMapIntensity.value=i.lightMapIntensity,a.aoMap.value=i.aoMap,a.aoMapIntensity.value=i.aoMapIntensity;var c;i.map?c=i.map:i.specularMap?c=i.specularMap:i.displacementMap?c=i.displacementMap:i.normalMap?c=i.normalMap:i.bumpMap?c=i.bumpMap:i.glossinessMap?c=i.glossinessMap:i.alphaMap?c=i.alphaMap:i.emissiveMap&&(c=i.emissiveMap),void 0!==c&&(c.isWebGLRenderTarget&&(c=c.texture),!0===c.matrixAutoUpdate&&c.updateMatrix(),a.uvTransform.value.copy(c.matrix)),a.envMap.value=i.envMap,a.envMapIntensity.value=i.envMapIntensity,a.flipEnvMap.value=i.envMap&&i.envMap.isCubeTexture?-1:1,a.refractionRatio.value=i.refractionRatio,a.specular.value.copy(i.specular),a.glossiness.value=i.glossiness,a.glossinessMap.value=i.glossinessMap,a.emissiveMap.value=i.emissiveMap,a.bumpMap.value=i.bumpMap,a.normalMap.value=i.normalMap,a.displacementMap.value=i.displacementMap,a.displacementScale.value=i.displacementScale,a.displacementBias.value=i.displacementBias,null!==a.glossinessMap.value&&void 0===s.USE_GLOSSINESSMAP&&(s.USE_GLOSSINESSMAP="",s.USE_ROUGHNESSMAP=""),null===a.glossinessMap.value&&void 0!==s.USE_GLOSSINESSMAP&&(delete s.USE_GLOSSINESSMAP,delete s.USE_ROUGHNESSMAP)}}}}function l(t,n,r,i){e.Interpolant.call(this,t,n,r,i)}function u(e,t){return"string"!==typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function h(){return new e.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:e.FrontSide})}function p(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function d(e,t){void 0!==t.extras&&("object"===typeof t.extras?e.userData=t.extras:console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function f(e,t,n){for(var r=!1,i=!1,o=0,a=t.length;o<a;o++){var s=t[o];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(i=!0),r&&i)break}if(r||i){for(var c=[],l=[],o=0,a=t.length;o<a;o++){var s=t[o],u="morphTarget"+o;if(r){if(void 0!==s.POSITION){var h=w(n[s.POSITION]);h.name=u;for(var p=e.attributes.position,d=0,f=h.count;d<f;d++)h.setXYZ(d,h.getX(d)+p.getX(d),h.getY(d)+p.getY(d),h.getZ(d)+p.getZ(d))}else h=e.attributes.position;c.push(h)}if(i){var m;if(void 0!==s.NORMAL){var m=w(n[s.NORMAL]);m.name=u;for(var g=e.attributes.normal,d=0,f=m.count;d<f;d++)m.setXYZ(d,m.getX(d)+g.getX(d),m.getY(d)+g.getY(d),m.getZ(d)+g.getZ(d))}else m=e.attributes.normal;l.push(m)}}r&&(e.morphAttributes.position=c),i&&(e.morphAttributes.normal=l)}}function m(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(var n=0,r=i.length;n<r;n++)e.morphTargetDictionary[i[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function g(e,t){return e.indices===t.indices&&v(e.attributes,t.attributes)}function v(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}function y(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function x(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(g(i.primitive,t))return i.promise}return null}function b(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(y(t,i.baseGeometries))return i.geometry}return null}function _(e,t,n){for(var r=0,i=e.length;r<i;r++){var o=e[r];if(t===o.baseGeometry&&y(n,o.primitives))return o.geometry}return null}function w(t){if(t.isInterleavedBufferAttribute){for(var n=t.count,r=t.itemSize,i=t.array.slice(0,n*r),o=0;o<n;++o)i[o]=t.getX(o),r>=2&&(i[o+1]=t.getY(o)),r>=3&&(i[o+2]=t.getZ(o)),r>=4&&(i[o+3]=t.getW(o));return new e.BufferAttribute(i,r,t.normalized)}return t.clone()}function E(e){if(e.length<2)return!1;var t=e[0],n=t.targets||[];if(void 0===t.indices)return!1;for(var r=1,i=e.length;r<i;r++){var o=e[r];if(t.mode!==o.mode)return!1;if(void 0===o.indices)return!1;if(!v(t.attributes,o.attributes))return!1;var a=o.targets||[];if(n.length!==a.length)return!1;for(var s=0,c=n.length;s<c;s++)if(!v(n[s],a[s]))return!1}return!0}function M(t,r,i){this.json=t||{},this.extensions=r||{},this.options=i||{},this.cache=new n,this.primitiveCache=[],this.multiplePrimitivesCache=[],this.multiPassGeometryCache=[],this.textureLoader=new e.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new e.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function T(e,t,n){var r=t.attributes;for(var i in r){var o=D[i],a=n[r[i]];o&&(o in e.attributes||e.addAttribute(o,a))}void 0===t.indices||e.index||e.setIndex(n[t.indices]),void 0!==t.targets&&f(e,t.targets,n),d(e,t)}t.prototype={constructor:t,crossOrigin:"anonymous",load:function(t,n,r,i){var o=this,a=void 0!==this.path?this.path:e.LoaderUtils.extractUrlBase(t);o.manager.itemStart(t);var s=function(e){i?i(e):console.error(e),o.manager.itemEnd(t),o.manager.itemError(t)},c=new e.FileLoader(o.manager);c.setResponseType("arraybuffer"),c.load(t,function(e){try{o.parse(e,a,function(e){n(e),o.manager.itemEnd(t)},s)}catch(e){s(e)}},r,s)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(t,n,l,u){var h,d={};if("string"===typeof t)h=t;else{if(e.LoaderUtils.decodeText(new Uint8Array(t,0,4))===A){try{d[S.KHR_BINARY_GLTF]=new a(t)}catch(e){return void(u&&u(e))}h=d[S.KHR_BINARY_GLTF].content}else h=e.LoaderUtils.decodeText(new Uint8Array(t))}var f=JSON.parse(h);if(void 0===f.asset||f.asset.version[0]<2)return void(u&&u(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.")));if(f.extensionsUsed)for(var m=0;m<f.extensionsUsed.length;++m){var g=f.extensionsUsed[m],v=f.extensionsRequired||[];switch(g){case S.KHR_LIGHTS_PUNCTUAL:d[g]=new i(f);break;case S.KHR_MATERIALS_UNLIT:d[g]=new o(f);break;case S.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:d[g]=new c;break;case S.KHR_DRACO_MESH_COMPRESSION:d[g]=new s(f,this.dracoLoader);break;case S.MSFT_TEXTURE_DDS:d[S.MSFT_TEXTURE_DDS]=new r;break;default:v.indexOf(g)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}var y=new M(f,d,{path:n||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager});y.parse(function(e,t,n,r,i){var o={scene:e,scenes:t,cameras:n,animations:r,asset:i.asset,parser:y,userData:{}};p(d,o,i),l(o)},u)}};var S={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};o.prototype.getMaterialType=function(t){return e.MeshBasicMaterial},o.prototype.extendParams=function(t,n,r){var i=[];t.color=new e.Color(1,1,1),t.opacity=1;var o=n.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var a=o.baseColorFactor;t.color.fromArray(a),t.opacity=a[3]}void 0!==o.baseColorTexture&&i.push(r.assignTexture(t,"map",o.baseColorTexture.index))}return Promise.all(i)};var A="glTF",C=12,R={JSON:1313821514,BIN:5130562};s.prototype.decodePrimitive=function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},c={};for(var l in o)l in D&&(a[D[l]]=o[l]);for(l in e.attributes)if(void 0!==D[l]&&void 0!==o[l]){var u=n.accessors[e.attributes[l]],h=P[u.componentType];c[D[l]]=h,s[D[l]]=!0===u.normalized}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t){r.decodeDracoFile(e,function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)},a,c)})})},l.prototype=Object.create(e.Interpolant.prototype),l.prototype.constructor=l,l.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,o=0;o!==r;o++)t[o]=n[i+o];return t},l.prototype.beforeStart_=l.prototype.copySampleValue_,l.prototype.afterEnd_=l.prototype.copySampleValue_,l.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,c=3*a,l=r-t,u=(n-t)/l,h=u*u,p=h*u,d=e*c,f=d-c,m=2*p-3*h+1,g=p-2*h+u,v=-2*p+3*h,y=p-h,x=0;x!==a;x++){var b=o[f+x+a],_=o[f+x+s]*l,w=o[d+x+a],E=o[d+x]*l;i[x]=m*b+g*_+v*w+y*E}return i};var L={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},P=(Number,e.Matrix3,e.Matrix4,e.Vector2,e.Vector3,e.Vector4,e.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),I={9728:e.NearestFilter,9729:e.LinearFilter,9984:e.NearestMipMapNearestFilter,9985:e.LinearMipMapNearestFilter,9986:e.NearestMipMapLinearFilter,9987:e.LinearMipMapLinearFilter},O={33071:e.ClampToEdgeWrapping,33648:e.MirroredRepeatWrapping,10497:e.RepeatWrapping},N=(e.BackSide,e.FrontSide,e.NeverDepth,e.LessDepth,e.EqualDepth,e.LessEqualDepth,e.GreaterEqualDepth,e.NotEqualDepth,e.GreaterEqualDepth,e.AlwaysDepth,e.AddEquation,e.SubtractEquation,e.ReverseSubtractEquation,e.ZeroFactor,e.OneFactor,e.SrcColorFactor,e.OneMinusSrcColorFactor,e.SrcAlphaFactor,e.OneMinusSrcAlphaFactor,e.DstAlphaFactor,e.OneMinusDstAlphaFactor,e.DstColorFactor,e.OneMinusDstColorFactor,e.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),D={POSITION:"position",NORMAL:"normal",TEXCOORD_0:"uv",TEXCOORD0:"uv",TEXCOORD:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",COLOR0:"color",COLOR:"color",WEIGHTS_0:"skinWeight",WEIGHT:"skinWeight",JOINTS_0:"skinIndex",JOINT:"skinIndex"},U={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},F={CUBICSPLINE:e.InterpolateSmooth,LINEAR:e.InterpolateLinear,STEP:e.InterpolateDiscrete},B={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},k={"image/png":e.RGBAFormat,"image/jpeg":e.RGBFormat};return M.prototype.parse=function(e,t){var n=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then(function(t){var r=t.scenes||[],i=r[n.scene||0],o=t.animations||[],a=t.cameras||[];e(i,r,a,o,n)}).catch(t)},M.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r={},i={},o=0,a=t.length;o<a;o++)for(var s=t[o].joints,c=0,l=s.length;c<l;c++)e[s[c]].isBone=!0;for(var u=0,h=e.length;u<h;u++){var p=e[u];void 0!==p.mesh&&(void 0===r[p.mesh]&&(r[p.mesh]=i[p.mesh]=0),r[p.mesh]++,void 0!==p.skin&&(n[p.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=i},M.prototype.getDependency=function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this.loadMesh(t);break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this.loadBufferView(t);break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this.loadMaterial(t);break;case"texture":r=this.loadTexture(t);break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r},M.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t},M.prototype.getMultiDependencies=function(e){for(var t={},n=[],r=0,i=e.length;r<i;r++){var o=e[r],a=this.getDependencies(o);a=a.then(function(e,n){t[e]=n}.bind(this,o+("mesh"===o?"es":"s"))),n.push(a)}return Promise.all(n).then(function(){return t})},M.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[S.KHR_BINARY_GLTF].body);var r=this.options;return new Promise(function(e,i){n.load(u(t.uri,r.path),e,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})},M.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)})},M.prototype.loadAccessor=function(t){var n=this,r=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return null;var o=[];return void 0!==i.bufferView?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then(function(t){var o,a,s=t[0],c=N[i.type],l=P[i.componentType],u=l.BYTES_PER_ELEMENT,h=u*c,p=i.byteOffset||0,d=void 0!==i.bufferView?r.bufferViews[i.bufferView].byteStride:void 0,f=!0===i.normalized;if(d&&d!==h){var m="InterleavedBuffer:"+i.bufferView+":"+i.componentType,g=n.cache.get(m);g||(o=new l(s),g=new e.InterleavedBuffer(o,d/u),n.cache.add(m,g)),a=new e.InterleavedBufferAttribute(g,c,p/u,f)}else o=null===s?new l(i.count*c):new l(s,p,i.count*c),a=new e.BufferAttribute(o,c,f);if(void 0!==i.sparse){var v=N.SCALAR,y=P[i.sparse.indices.componentType],x=i.sparse.indices.byteOffset||0,b=i.sparse.values.byteOffset||0,_=new y(t[1],x,i.sparse.count*v),w=new l(t[2],b,i.sparse.count*c);null!==s&&a.setArray(a.array.slice());for(var E=0,M=_.length;E<M;E++){var T=_[E];if(a.setX(T,w[E*c]),c>=2&&a.setY(T,w[E*c+1]),c>=3&&a.setZ(T,w[E*c+2]),c>=4&&a.setW(T,w[E*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a})},M.prototype.loadTexture=function(t){var n,r=this,i=this.json,o=this.options,a=this.textureLoader,s=window.URL||window.webkitURL,c=i.textures[t],l=c.extensions||{};n=l[S.MSFT_TEXTURE_DDS]?i.images[l[S.MSFT_TEXTURE_DDS].source]:i.images[c.source];var h=n.uri,p=!1;return void 0!==n.bufferView&&(h=r.getDependency("bufferView",n.bufferView).then(function(e){p=!0;var t=new Blob([e],{type:n.mimeType});return h=s.createObjectURL(t)})),Promise.resolve(h).then(function(t){var n=e.Loader.Handlers.get(t);return n||(n=l[S.MSFT_TEXTURE_DDS]?r.extensions[S.MSFT_TEXTURE_DDS].ddsLoader:a),new Promise(function(e,r){n.load(u(t,o.path),e,void 0,r)})}).then(function(t){!0===p&&s.revokeObjectURL(h),t.flipY=!1,void 0!==c.name&&(t.name=c.name),n.mimeType in k&&(t.format=k[n.mimeType]);var r=i.samplers||{},o=r[c.sampler]||{};return t.magFilter=I[o.magFilter]||e.LinearFilter,t.minFilter=I[o.minFilter]||e.LinearMipMapLinearFilter,t.wrapS=O[o.wrapS]||e.RepeatWrapping,t.wrapT=O[o.wrapT]||e.RepeatWrapping,t})},M.prototype.assignTexture=function(e,t,n){return this.getDependency("texture",n).then(function(n){e[t]=n})},M.prototype.loadMaterial=function(t){var n,r=this,i=this.json,o=this.extensions,a=i.materials[t],s={},c=a.extensions||{},l=[];if(c[S.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=o[S.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];n=u.getMaterialType(a),l.push(u.extendParams(s,a,r))}else if(c[S.KHR_MATERIALS_UNLIT]){var h=o[S.KHR_MATERIALS_UNLIT];n=h.getMaterialType(a),l.push(h.extendParams(s,a,r))}else{n=e.MeshStandardMaterial;var f=a.pbrMetallicRoughness||{};if(s.color=new e.Color(1,1,1),s.opacity=1,Array.isArray(f.baseColorFactor)){var m=f.baseColorFactor;s.color.fromArray(m),s.opacity=m[3]}if(void 0!==f.baseColorTexture&&l.push(r.assignTexture(s,"map",f.baseColorTexture.index)),s.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,s.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture){var g=f.metallicRoughnessTexture.index;l.push(r.assignTexture(s,"metalnessMap",g)),l.push(r.assignTexture(s,"roughnessMap",g))}}!0===a.doubleSided&&(s.side=e.DoubleSide);var v=a.alphaMode||B.OPAQUE;return v===B.BLEND?s.transparent=!0:(s.transparent=!1,v===B.MASK&&(s.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&n!==e.MeshBasicMaterial&&(l.push(r.assignTexture(s,"normalMap",a.normalTexture.index)),s.normalScale=new e.Vector2(1,1),void 0!==a.normalTexture.scale&&s.normalScale.set(a.normalTexture.scale,a.normalTexture.scale)),void 0!==a.occlusionTexture&&n!==e.MeshBasicMaterial&&(l.push(r.assignTexture(s,"aoMap",a.occlusionTexture.index)),void 0!==a.occlusionTexture.strength&&(s.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&n!==e.MeshBasicMaterial&&(s.emissive=(new e.Color).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&n!==e.MeshBasicMaterial&&l.push(r.assignTexture(s,"emissiveMap",a.emissiveTexture.index)),Promise.all(l).then(function(){var t;return t=n===e.ShaderMaterial?o[S.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new n(s),void 0!==a.name&&(t.name=a.name),t.normalScale&&(t.normalScale.y=-t.normalScale.y),t.map&&(t.map.encoding=e.sRGBEncoding),t.emissiveMap&&(t.emissiveMap.encoding=e.sRGBEncoding),t.specularMap&&(t.specularMap.encoding=e.sRGBEncoding),d(t,a),a.extensions&&p(o,t,a),t})},M.prototype.loadGeometries=function(t){var n,r=this,i=this.extensions,o=this.primitiveCache,a=E(t);return a&&(n=t,t=[t[0]]),this.getDependencies("accessor").then(function(s){for(var c=[],l=0,u=t.length;l<u;l++){var h=t[l],p=x(o,h);if(p)c.push(p);else if(h.extensions&&h.extensions[S.KHR_DRACO_MESH_COMPRESSION]){var d=i[S.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,r).then(function(e){return T(e,h,s),e});o.push({primitive:h,promise:d}),c.push(d)}else{var f=new e.BufferGeometry;T(f,h,s);var d=Promise.resolve(f);o.push({primitive:h,promise:d}),c.push(d)}}return Promise.all(c).then(function(i){if(a){var o=i[0],c=r.multiPassGeometryCache,l=_(c,o,n);if(null!==l)return[l.geometry];var u=new e.BufferGeometry;u.name=o.name,u.userData=o.userData;for(var h in o.attributes)u.addAttribute(h,o.attributes[h]);for(var h in o.morphAttributes)u.morphAttributes[h]=o.morphAttributes[h];for(var p=[],d=0,f=0,m=n.length;f<m;f++){for(var g=s[n[f].indices],v=0,y=g.count;v<y;v++)p.push(g.array[v]);u.addGroup(d,g.count,f),d+=g.count}return u.setIndex(p),c.push({geometry:u,baseGeometry:o,primitives:n}),[u]}if(i.length>1&&void 0!==e.BufferGeometryUtils){for(var f=1,m=t.length;f<m;f++)if(t[0].mode!==t[f].mode)return i;var c=r.multiplePrimitivesCache,l=b(c,i);if(l){if(null!==l.geometry)return[l.geometry]}else{var u=e.BufferGeometryUtils.mergeBufferGeometries(i,!0);if(c.push({geometry:u,baseGeometries:i}),null!==u)return[u]}}return i})})},M.prototype.loadMesh=function(t){var n=this,r=this.json,i=this.extensions,o=r.meshes[t];return this.getMultiDependencies(["accessor","material"]).then(function(r){for(var a=o.primitives,s=[],c=0,l=a.length;c<l;c++)s[c]=void 0===a[c].material?h():r.materials[a[c].material];return n.loadGeometries(a).then(function(r){for(var c=1===r.length&&r[0].groups.length>0,l=[],u=0,h=r.length;u<h;u++){var p,f=r[u],g=a[u],v=c?s:s[u];if(g.mode===L.TRIANGLES||g.mode===L.TRIANGLE_STRIP||g.mode===L.TRIANGLE_FAN||void 0===g.mode)p=!0===o.isSkinnedMesh?new e.SkinnedMesh(f,v):new e.Mesh(f,v),g.mode===L.TRIANGLE_STRIP?p.drawMode=e.TriangleStripDrawMode:g.mode===L.TRIANGLE_FAN&&(p.drawMode=e.TriangleFanDrawMode);else if(g.mode===L.LINES)p=new e.LineSegments(f,v);else if(g.mode===L.LINE_STRIP)p=new e.Line(f,v);else if(g.mode===L.LINE_LOOP)p=new e.LineLoop(f,v);else{if(g.mode!==L.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);p=new e.Points(f,v)}Object.keys(p.geometry.morphAttributes).length>0&&m(p,o),p.name=o.name||"mesh_"+t,r.length>1&&(p.name+="_"+u),d(p,o),l.push(p);for(var y=c?p.material:[p.material],x=void 0!==f.attributes.color,b=void 0===f.attributes.normal,_=!0===p.isSkinnedMesh,w=Object.keys(f.morphAttributes).length>0,E=w&&void 0!==f.morphAttributes.normal,M=0,T=y.length;M<T;M++){var v=y[M];if(p.isPoints){var A="PointsMaterial:"+v.uuid,C=n.cache.get(A);C||(C=new e.PointsMaterial,e.Material.prototype.copy.call(C,v),C.color.copy(v.color),C.map=v.map,C.lights=!1,n.cache.add(A,C)),v=C}else if(p.isLine){var A="LineBasicMaterial:"+v.uuid,R=n.cache.get(A);R||(R=new e.LineBasicMaterial,e.Material.prototype.copy.call(R,v),R.color.copy(v.color),R.lights=!1,n.cache.add(A,R)),v=R}if(x||b||_||w){var A="ClonedMaterial:"+v.uuid+":";v.isGLTFSpecularGlossinessMaterial&&(A+="specular-glossiness:"),_&&(A+="skinning:"),x&&(A+="vertex-colors:"),b&&(A+="flat-shading:"),w&&(A+="morph-targets:"),E&&(A+="morph-normals:");var P=n.cache.get(A);P||(P=v.isGLTFSpecularGlossinessMaterial?i[S.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(v):v.clone(),_&&(P.skinning=!0),x&&(P.vertexColors=e.VertexColors),b&&(P.flatShading=!0),w&&(P.morphTargets=!0),E&&(P.morphNormals=!0),n.cache.add(A,P)),v=P}y[M]=v,v.aoMap&&void 0===f.attributes.uv2&&void 0!==f.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),f.addAttribute("uv2",new e.BufferAttribute(f.attributes.uv.array,2))),v.isGLTFSpecularGlossinessMaterial&&(p.onBeforeRender=i[S.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)}p.material=c?y:y[0]}if(1===l.length)return l[0];for(var I=new e.Group,u=0,h=l.length;u<h;u++)I.add(l[u]);return I})})},M.prototype.loadCamera=function(t){var n,r=this.json.cameras[t],i=r[r.type];return i?("perspective"===r.type?n=new e.PerspectiveCamera(e.Math.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===r.type&&(n=new e.OrthographicCamera(i.xmag/-2,i.xmag/2,i.ymag/2,i.ymag/-2,i.znear,i.zfar)),void 0!==r.name&&(n.name=r.name),d(n,r),Promise.resolve(n)):void console.warn("THREE.GLTFLoader: Missing camera parameters.")},M.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return n.inverseBindMatrices=e,n})},M.prototype.loadAnimation=function(t){var n=this.json,r=n.animations[t];return this.getMultiDependencies(["accessor","node"]).then(function(n){for(var i=[],o=0,a=r.channels.length;o<a;o++){var s=r.channels[o],c=r.samplers[s.sampler];if(c){var u=s.target,h=void 0!==u.node?u.node:u.id,p=void 0!==r.parameters?r.parameters[c.input]:c.input,d=void 0!==r.parameters?r.parameters[c.output]:c.output,f=n.accessors[p],m=n.accessors[d],g=n.nodes[h];if(g){g.updateMatrix(),g.matrixAutoUpdate=!0;var v;switch(U[u.path]){case U.weights:v=e.NumberKeyframeTrack;break;case U.rotation:v=e.QuaternionKeyframeTrack;break;case U.position:case U.scale:default:v=e.VectorKeyframeTrack}var y=g.name?g.name:g.uuid,x=void 0!==c.interpolation?F[c.interpolation]:e.InterpolateLinear,b=[];U[u.path]===U.weights?g.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&b.push(e.name?e.name:e.uuid)}):b.push(y);for(var _=0,w=b.length;_<w;_++){var E=new v(b[_]+"."+U[u.path],e.AnimationUtils.arraySlice(f.array,0),e.AnimationUtils.arraySlice(m.array,0),x);"CUBICSPLINE"===c.interpolation&&(E.createInterpolant=function(e){return new l(this.times,this.values,this.getValueSize()/3,e)},E.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),i.push(E)}}}}var h=void 0!==r.name?r.name:"animation_"+t;return new e.AnimationClip(h,void 0,i)})},M.prototype.loadNode=function(t){var n=this.json,r=this.extensions,i=n.meshReferences,o=n.meshUses,a=n.nodes[t];return this.getMultiDependencies(["mesh","skin","camera","light"]).then(function(t){var n;if(!0===a.isBone)n=new e.Bone;else if(void 0!==a.mesh){var s=t.meshes[a.mesh];if(i[a.mesh]>1){var c=o[a.mesh]++;n=s.clone(),n.name+="_instance_"+c,n.onBeforeRender=s.onBeforeRender;for(var l=0,u=n.children.length;l<u;l++)n.children[l].name+="_instance_"+c,n.children[l].onBeforeRender=s.children[l].onBeforeRender}else n=s}else if(void 0!==a.camera)n=t.cameras[a.camera];else if(a.extensions&&a.extensions[S.KHR_LIGHTS_PUNCTUAL]&&void 0!==a.extensions[S.KHR_LIGHTS_PUNCTUAL].light){var h=r[S.KHR_LIGHTS_PUNCTUAL].lights;n=h[a.extensions[S.KHR_LIGHTS_PUNCTUAL].light]}else n=new e.Object3D;if(void 0!==a.name&&(n.name=e.PropertyBinding.sanitizeNodeName(a.name)),d(n,a),a.extensions&&p(r,n,a),void 0!==a.matrix){var f=new e.Matrix4;f.fromArray(a.matrix),n.applyMatrix(f)}else void 0!==a.translation&&n.position.fromArray(a.translation),void 0!==a.rotation&&n.quaternion.fromArray(a.rotation),void 0!==a.scale&&n.scale.fromArray(a.scale);return n})},M.prototype.loadScene=function(){function t(n,r,i,o,a){var s=o[n],c=i.nodes[n];if(void 0!==c.skin)for(var l=!0===s.isGroup?s.children:[s],u=0,h=l.length;u<h;u++){for(var p=l[u],d=a[c.skin],f=[],m=[],g=0,v=d.joints.length;g<v;g++){var y=d.joints[g],x=o[y];if(x){f.push(x);var b=new e.Matrix4;void 0!==d.inverseBindMatrices&&b.fromArray(d.inverseBindMatrices.array,16*g),m.push(b)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',y)}p.bind(new e.Skeleton(f,m),p.matrixWorld)}if(r.add(s),c.children)for(var _=c.children,u=0,h=_.length;u<h;u++){var w=_[u];t(w,s,i,o,a)}}return function(n){var r=this.json,i=this.extensions,o=this.json.scenes[n];return this.getMultiDependencies(["node","skin"]).then(function(n){var a=new e.Scene;void 0!==o.name&&(a.name=o.name),d(a,o),o.extensions&&p(i,a,o);for(var s=o.nodes||[],c=0,l=s.length;c<l;c++)t(s[c],a,r,n.nodes,n.skins);return a})}}(),t}()}).call(t,n(28))},function(e,t,n){(function(e){e.OrbitControls=function(t,n){function r(){return 2*Math.PI/60/60*I.autoRotateSpeed}function i(){return Math.pow(.95,I.zoomSpeed)}function o(e){H.theta-=e}function a(e){H.phi-=e}function s(e){I.object.isPerspectiveCamera?G/=e:I.object.isOrthographicCamera?(I.object.zoom=Math.max(I.minZoom,Math.min(I.maxZoom,I.object.zoom*e)),I.object.updateProjectionMatrix(),j=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),I.enableZoom=!1)}function c(e){I.object.isPerspectiveCamera?G*=e:I.object.isOrthographicCamera?(I.object.zoom=Math.max(I.minZoom,Math.min(I.maxZoom,I.object.zoom/e)),I.object.updateProjectionMatrix(),j=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),I.enableZoom=!1)}function l(e){V.set(e.clientX,e.clientY)}function u(e){K.set(e.clientX,e.clientY)}function h(e){q.set(e.clientX,e.clientY)}function p(e){W.set(e.clientX,e.clientY),X.subVectors(W,V).multiplyScalar(I.rotateSpeed);var t=I.domElement===document?I.domElement.body:I.domElement;o(2*Math.PI*X.x/t.clientHeight),a(2*Math.PI*X.y/t.clientHeight),V.copy(W),I.update()}function d(e){J.set(e.clientX,e.clientY),Q.subVectors(J,K),Q.y>0?s(i()):Q.y<0&&c(i()),K.copy(J),I.update()}function f(e){Y.set(e.clientX,e.clientY),Z.subVectors(Y,q).multiplyScalar(I.panSpeed),te(Z.x,Z.y),q.copy(Y),I.update()}function m(e){}function g(e){e.deltaY<0?c(i()):e.deltaY>0&&s(i()),I.update()}function v(e){switch(e.keyCode){case I.keys.UP:te(0,I.keyPanSpeed),I.update();break;case I.keys.BOTTOM:te(0,-I.keyPanSpeed),I.update();break;case I.keys.LEFT:te(I.keyPanSpeed,0),I.update();break;case I.keys.RIGHT:te(-I.keyPanSpeed,0),I.update()}}function y(e){V.set(e.touches[0].pageX,e.touches[0].pageY)}function x(e){if(I.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);K.set(0,r)}if(I.enablePan){var i=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);q.set(i,o)}}function b(e){W.set(e.touches[0].pageX,e.touches[0].pageY),X.subVectors(W,V).multiplyScalar(I.rotateSpeed);var t=I.domElement===document?I.domElement.body:I.domElement;o(2*Math.PI*X.x/t.clientHeight),a(2*Math.PI*X.y/t.clientHeight),V.copy(W),I.update()}function _(e){if(I.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);J.set(0,r),Q.set(0,Math.pow(J.y/K.y,I.zoomSpeed)),s(Q.y),K.copy(J)}if(I.enablePan){var i=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);Y.set(i,o),Z.subVectors(Y,q).multiplyScalar(I.panSpeed),te(Z.x,Z.y),q.copy(Y)}I.update()}function w(e){}function E(e){if(!1!==I.enabled){switch(e.preventDefault(),e.button){case I.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey){if(!1===I.enablePan)return;h(e),F=U.PAN}else{if(!1===I.enableRotate)return;l(e),F=U.ROTATE}break;case I.mouseButtons.MIDDLE:if(!1===I.enableZoom)return;u(e),F=U.DOLLY;break;case I.mouseButtons.RIGHT:if(!1===I.enablePan)return;h(e),F=U.PAN}F!==U.NONE&&(document.addEventListener("mousemove",M,!1),document.addEventListener("mouseup",T,!1),I.dispatchEvent(N))}}function M(e){if(!1!==I.enabled)switch(e.preventDefault(),F){case U.ROTATE:if(!1===I.enableRotate)return;p(e);break;case U.DOLLY:if(!1===I.enableZoom)return;d(e);break;case U.PAN:if(!1===I.enablePan)return;f(e)}}function T(e){!1!==I.enabled&&(m(e),document.removeEventListener("mousemove",M,!1),document.removeEventListener("mouseup",T,!1),I.dispatchEvent(D),F=U.NONE)}function S(e){!1===I.enabled||!1===I.enableZoom||F!==U.NONE&&F!==U.ROTATE||(e.preventDefault(),e.stopPropagation(),I.dispatchEvent(N),g(e),I.dispatchEvent(D))}function A(e){!1!==I.enabled&&!1!==I.enableKeys&&!1!==I.enablePan&&v(e)}function C(e){if(!1!==I.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===I.enableRotate)return;y(e),F=U.TOUCH_ROTATE;break;case 2:if(!1===I.enableZoom&&!1===I.enablePan)return;x(e),F=U.TOUCH_DOLLY_PAN;break;default:F=U.NONE}F!==U.NONE&&I.dispatchEvent(N)}}function R(e){if(!1!==I.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===I.enableRotate)return;if(F!==U.TOUCH_ROTATE)return;b(e);break;case 2:if(!1===I.enableZoom&&!1===I.enablePan)return;if(F!==U.TOUCH_DOLLY_PAN)return;_(e);break;default:F=U.NONE}}function L(e){!1!==I.enabled&&(w(e),I.dispatchEvent(D),F=U.NONE)}function P(e){!1!==I.enabled&&e.preventDefault()}this.object=t,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:e.MOUSE.LEFT,MIDDLE:e.MOUSE.MIDDLE,RIGHT:e.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return k.phi},this.getAzimuthalAngle=function(){return k.theta},this.saveState=function(){I.target0.copy(I.target),I.position0.copy(I.object.position),I.zoom0=I.object.zoom},this.reset=function(){I.target.copy(I.target0),I.object.position.copy(I.position0),I.object.zoom=I.zoom0,I.object.updateProjectionMatrix(),I.dispatchEvent(O),I.update(),F=U.NONE},this.update=function(){var n=new e.Vector3,i=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),a=i.clone().inverse(),s=new e.Vector3,c=new e.Quaternion;return function(){var e=I.object.position;return n.copy(e).sub(I.target),n.applyQuaternion(i),k.setFromVector3(n),I.autoRotate&&F===U.NONE&&o(r()),k.theta+=H.theta,k.phi+=H.phi,k.theta=Math.max(I.minAzimuthAngle,Math.min(I.maxAzimuthAngle,k.theta)),k.phi=Math.max(I.minPolarAngle,Math.min(I.maxPolarAngle,k.phi)),k.makeSafe(),k.radius*=G,k.radius=Math.max(I.minDistance,Math.min(I.maxDistance,k.radius)),I.target.add(z),n.setFromSpherical(k),n.applyQuaternion(a),e.copy(I.target).add(n),I.object.lookAt(I.target),!0===I.enableDamping?(H.theta*=1-I.dampingFactor,H.phi*=1-I.dampingFactor,z.multiplyScalar(1-I.dampingFactor)):(H.set(0,0,0),z.set(0,0,0)),G=1,!!(j||s.distanceToSquared(I.object.position)>B||8*(1-c.dot(I.object.quaternion))>B)&&(I.dispatchEvent(O),s.copy(I.object.position),c.copy(I.object.quaternion),j=!1,!0)}}(),this.dispose=function(){I.domElement.removeEventListener("contextmenu",P,!1),I.domElement.removeEventListener("mousedown",E,!1),I.domElement.removeEventListener("wheel",S,!1),I.domElement.removeEventListener("touchstart",C,!1),I.domElement.removeEventListener("touchend",L,!1),I.domElement.removeEventListener("touchmove",R,!1),document.removeEventListener("mousemove",M,!1),document.removeEventListener("mouseup",T,!1),window.removeEventListener("keydown",A,!1)};var I=this,O={type:"change"},N={type:"start"},D={type:"end"},U={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},F=U.NONE,B=1e-6,k=new e.Spherical,H=new e.Spherical,G=1,z=new e.Vector3,j=!1,V=new e.Vector2,W=new e.Vector2,X=new e.Vector2,q=new e.Vector2,Y=new e.Vector2,Z=new e.Vector2,K=new e.Vector2,J=new e.Vector2,Q=new e.Vector2,$=function(){var t=new e.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),z.add(t)}}(),ee=function(){var t=new e.Vector3;return function(e,n){!0===I.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(I.object.up,t)),t.multiplyScalar(e),z.add(t)}}(),te=function(){var t=new e.Vector3;return function(e,n){var r=I.domElement===document?I.domElement.body:I.domElement;if(I.object.isPerspectiveCamera){var i=I.object.position;t.copy(i).sub(I.target);var o=t.length();o*=Math.tan(I.object.fov/2*Math.PI/180),$(2*e*o/r.clientHeight,I.object.matrix),ee(2*n*o/r.clientHeight,I.object.matrix)}else I.object.isOrthographicCamera?($(e*(I.object.right-I.object.left)/I.object.zoom/r.clientWidth,I.object.matrix),ee(n*(I.object.top-I.object.bottom)/I.object.zoom/r.clientHeight,I.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),I.enablePan=!1)}}();I.domElement.addEventListener("contextmenu",P,!1),I.domElement.addEventListener("mousedown",E,!1),I.domElement.addEventListener("wheel",S,!1),I.domElement.addEventListener("touchstart",C,!1),I.domElement.addEventListener("touchend",L,!1),I.domElement.addEventListener("touchmove",R,!1),window.addEventListener("keydown",A,!1),this.update()},e.OrbitControls.prototype=Object.create(e.EventDispatcher.prototype),e.OrbitControls.prototype.constructor=e.OrbitControls,Object.defineProperties(e.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})}).call(t,n(28))},function(e,t){},function(e,t,n){"use strict";function r(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="/service-worker.js";a?(o(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):i(e)})}}function i(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function o(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):i(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}t.a=r;var a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))}]);
//# sourceMappingURL=main.658d0080.js.map